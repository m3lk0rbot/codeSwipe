# Google Cloud Contributions - Code Swipe

## Overview

Code Swipe leverages multiple Google Cloud services to deliver a scalable, performant, and cost-effective coding education platform. This document details our Google Cloud integration for the Cloud Run Hackathon submission.

---

## ðŸš€ Cloud Run Services (Primary Requirement & Bonus Points)

Code Swipe is built on a modern, multi-service architecture running entirely on Google Cloud Run, earning **0.4 bonus points**.

### 1. Frontend Service
- **Service Name**: `codeswipe-frontend` (Assumed Name)
- **Type**: Cloud Run Service (HTTP)
- **Region**: `us-west1`
- **Configuration**:
  - Container: React + Vite application
  - Auto-scaling: Scale to zero for cost-efficiency
  - Memory: 512 MB
  - CPU: 1 vCPU

**Features**:
- Serves the Progressive Web App (PWA) built with React.
- Handles all user interactions and client-side logic.
- Deployed via a simple `gcloud run deploy` command from source.

### 2. Backend Service (Curator)
- **Service Name**: `codeswipe-curator`
- **Type**: Cloud Run Service (HTTP)
- **Region**: `europe-west1`
- **Configuration**:
  - Container: Node.js + Express API
  - Auto-scaling: Scale to zero for cost-efficiency
  - Memory: 1 GB
  - CPU: 1 vCPU
  - **Service Account**: `curator-sa` with least-privilege IAM roles.
  - **Secrets**: Gemini API key securely injected via Secret Manager.

**Features**:
- AI-powered question generation and code review via Gemini API.
- Caching logic and fallback mechanisms for reliability.
- Securely interacts with Firebase services.

---

## ðŸ¤– Google AI Models

The platform's intelligence is powered by Google's Gemini models, earning  

### 1. Gemini 2.5 Pro
- **Use Case**: Advanced question generation for `Intermediate`, `Advanced`, and `Expert` challenges.
- **Implementation**: Used for generating complex coding problems, multi-step logic, and detailed test cases that require deeper reasoning.

### 2. Gemini 2.5 Flash
- **Use Case**: Fast content generation, code review, and `Beginner` challenges.
- **Implementation**: Powers the real-time AI code review feature, providing instant feedback. Used for generating simpler questions where speed is critical.

### 3. Context Caching Strategy
- **Use Case**: Massive cost and latency reduction.
- **Implementation**: The Curator service is designed to reuse system prompts and foundational instructions for Gemini. By caching this context, we only send the unique, user-specific part of the prompt for each request.
- **Benefits**:
  - **~90% cost reduction** on Gemini API calls.
  - **Faster response times** by reducing token count per request.

---

## ðŸ”¥ Firebase Platform

### 1. Cloud Firestore
- **Use Case**: Scalable NoSQL database for core application data.
- **Collections**: `Questions`, `Users`, `Achievements`, `Likes`, `Submissions`, `Settings`.
- **Optimization**:
  - **Composite Indexes**: Manually configured for complex queries (e.g., filtering questions by user and criteria), ensuring high performance.
  - **Content Hashing**: Used as document IDs in the `Questions` collection to prevent duplicates and ensure data integrity.

### 2. Firebase Authentication
- **Use Case**: Secure user authentication and management.
- **Method**: Google OAuth 2.0 for seamless and secure sign-in.

### 3. Firebase Storage (Planned)
- **Use Case**: Hosting user-generated content like profile pictures.

---

## ðŸ”’ Security & IAM

### 1. Secret Manager
- **Use Case**: Securely stores the `GEMINI_API_KEY`.
- **Integration**: The key is injected into the `codeswipe-curator` Cloud Run service as an environment variable at runtime, never exposed in code or client-side.

### 2. IAM (Identity and Access Management)
- **Principle**: Least-privilege access.
- **Service Account (`curator-sa`)**: A dedicated service account for the Curator with minimal permissions:
  - `Cloud Datastore User`: To access Firestore.
  - `Secret Manager Secret Accessor`: To access the Gemini API key.

---

## ðŸš€ Deployment & CI/CD

### Deployment Commands
Commands are designed for easy, repeatable deployments from source code.

**1. Backend (Curator) Deployment:**
```bash
# From the /curator directory
gcloud run deploy codeswipe-curator \
  --source . \
  --region europe-west1 \
  --allow-unauthenticated \
  --service-account "curator-sa@YOUR_PROJECT_ID.iam.gserviceaccount.com" \
  --set-secrets=GEMINI_API_KEY=GEMINI_API_KEY:latest \
  --env-vars-file env.yaml \
  --project "YOUR_PROJECT_ID"
```

**2. Frontend Deployment:**
```bash
# From the project root directory
gcloud run deploy codeswipe-frontend \
  --source . \
  --region us-west1 \
  --allow-unauthenticated \
  --project "YOUR_PROJECT_ID"
```

---


## ðŸŽ“ Conclusion

Code Swipe is a prime example of a modern serverless application built on Google Cloud. It combines the power and scalability of **Cloud Run**, the intelligence of **Gemini AI**, and the real-time capabilities of **Firebase** to create an innovative and engaging user experience. The architecture is secure, cost-effective, and ready for global scale.
