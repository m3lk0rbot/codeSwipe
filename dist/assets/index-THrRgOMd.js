(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function e1(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Fd={exports:{}},Vl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av;function ww(){if(av)return Vl;av=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:f,ref:o!==void 0?o:null,props:u}}return Vl.Fragment=e,Vl.jsx=n,Vl.jsxs=n,Vl}var ov;function Sw(){return ov||(ov=1,Fd.exports=ww()),Fd.exports}var _=Sw(),Gd={exports:{}},Ae={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lv;function Aw(){if(lv)return Ae;lv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),x=Symbol.iterator;function q(N){return N===null||typeof N!="object"?null:(N=x&&N[x]||N["@@iterator"],typeof N=="function"?N:null)}var K={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,k={};function re(N,Q,te){this.props=N,this.context=Q,this.refs=k,this.updater=te||K}re.prototype.isReactComponent={},re.prototype.setState=function(N,Q){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,Q,"setState")},re.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function ue(){}ue.prototype=re.prototype;function le(N,Q,te){this.props=N,this.context=Q,this.refs=k,this.updater=te||K}var ie=le.prototype=new ue;ie.constructor=le,M(ie,re.prototype),ie.isPureReactComponent=!0;var ye=Array.isArray;function me(){}var R={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function C(N,Q,te){var ae=te.ref;return{$$typeof:s,type:N,key:Q,ref:ae!==void 0?ae:null,props:te}}function O(N,Q){return C(N.type,Q,N.props)}function V(N){return typeof N=="object"&&N!==null&&N.$$typeof===s}function L(N){var Q={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(te){return Q[te]})}var I=/\/+/g;function Fe(N,Q){return typeof N=="object"&&N!==null&&N.key!=null?L(""+N.key):Q.toString(36)}function fe(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(me,me):(N.status="pending",N.then(function(Q){N.status==="pending"&&(N.status="fulfilled",N.value=Q)},function(Q){N.status==="pending"&&(N.status="rejected",N.reason=Q)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function H(N,Q,te,ae,ve){var Re=typeof N;(Re==="undefined"||Re==="boolean")&&(N=null);var Oe=!1;if(N===null)Oe=!0;else switch(Re){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(N.$$typeof){case s:case e:Oe=!0;break;case b:return Oe=N._init,H(Oe(N._payload),Q,te,ae,ve)}}if(Oe)return ve=ve(N),Oe=ae===""?"."+Fe(N,0):ae,ye(ve)?(te="",Oe!=null&&(te=Oe.replace(I,"$&/")+"/"),H(ve,Q,te,"",function(qi){return qi})):ve!=null&&(V(ve)&&(ve=O(ve,te+(ve.key==null||N&&N.key===ve.key?"":(""+ve.key).replace(I,"$&/")+"/")+Oe)),Q.push(ve)),1;Oe=0;var Et=ae===""?".":ae+":";if(ye(N))for(var rt=0;rt<N.length;rt++)ae=N[rt],Re=Et+Fe(ae,rt),Oe+=H(ae,Q,te,Re,ve);else if(rt=q(N),typeof rt=="function")for(N=rt.call(N),rt=0;!(ae=N.next()).done;)ae=ae.value,Re=Et+Fe(ae,rt++),Oe+=H(ae,Q,te,Re,ve);else if(Re==="object"){if(typeof N.then=="function")return H(fe(N),Q,te,ae,ve);throw Q=String(N),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function ne(N,Q,te){if(N==null)return N;var ae=[],ve=0;return H(N,ae,"","",function(Re){return Q.call(te,Re,ve++)}),ae}function de(N){if(N._status===-1){var Q=N._result;Q=Q(),Q.then(function(te){(N._status===0||N._status===-1)&&(N._status=1,N._result=te)},function(te){(N._status===0||N._status===-1)&&(N._status=2,N._result=te)}),N._status===-1&&(N._status=0,N._result=Q)}if(N._status===1)return N._result.default;throw N._result}var Ce=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},He={map:ne,forEach:function(N,Q,te){ne(N,function(){Q.apply(this,arguments)},te)},count:function(N){var Q=0;return ne(N,function(){Q++}),Q},toArray:function(N){return ne(N,function(Q){return Q})||[]},only:function(N){if(!V(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return Ae.Activity=w,Ae.Children=He,Ae.Component=re,Ae.Fragment=n,Ae.Profiler=o,Ae.PureComponent=le,Ae.StrictMode=r,Ae.Suspense=y,Ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ae.__COMPILER_RUNTIME={__proto__:null,c:function(N){return R.H.useMemoCache(N)}},Ae.cache=function(N){return function(){return N.apply(null,arguments)}},Ae.cacheSignal=function(){return null},Ae.cloneElement=function(N,Q,te){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var ae=M({},N.props),ve=N.key;if(Q!=null)for(Re in Q.key!==void 0&&(ve=""+Q.key),Q)!A.call(Q,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&Q.ref===void 0||(ae[Re]=Q[Re]);var Re=arguments.length-2;if(Re===1)ae.children=te;else if(1<Re){for(var Oe=Array(Re),Et=0;Et<Re;Et++)Oe[Et]=arguments[Et+2];ae.children=Oe}return C(N.type,ve,ae)},Ae.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},Ae.createElement=function(N,Q,te){var ae,ve={},Re=null;if(Q!=null)for(ae in Q.key!==void 0&&(Re=""+Q.key),Q)A.call(Q,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(ve[ae]=Q[ae]);var Oe=arguments.length-2;if(Oe===1)ve.children=te;else if(1<Oe){for(var Et=Array(Oe),rt=0;rt<Oe;rt++)Et[rt]=arguments[rt+2];ve.children=Et}if(N&&N.defaultProps)for(ae in Oe=N.defaultProps,Oe)ve[ae]===void 0&&(ve[ae]=Oe[ae]);return C(N,Re,ve)},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(N){return{$$typeof:g,render:N}},Ae.isValidElement=V,Ae.lazy=function(N){return{$$typeof:b,_payload:{_status:-1,_result:N},_init:de}},Ae.memo=function(N,Q){return{$$typeof:p,type:N,compare:Q===void 0?null:Q}},Ae.startTransition=function(N){var Q=R.T,te={};R.T=te;try{var ae=N(),ve=R.S;ve!==null&&ve(te,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(me,Ce)}catch(Re){Ce(Re)}finally{Q!==null&&te.types!==null&&(Q.types=te.types),R.T=Q}},Ae.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ae.use=function(N){return R.H.use(N)},Ae.useActionState=function(N,Q,te){return R.H.useActionState(N,Q,te)},Ae.useCallback=function(N,Q){return R.H.useCallback(N,Q)},Ae.useContext=function(N){return R.H.useContext(N)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(N,Q){return R.H.useDeferredValue(N,Q)},Ae.useEffect=function(N,Q){return R.H.useEffect(N,Q)},Ae.useEffectEvent=function(N){return R.H.useEffectEvent(N)},Ae.useId=function(){return R.H.useId()},Ae.useImperativeHandle=function(N,Q,te){return R.H.useImperativeHandle(N,Q,te)},Ae.useInsertionEffect=function(N,Q){return R.H.useInsertionEffect(N,Q)},Ae.useLayoutEffect=function(N,Q){return R.H.useLayoutEffect(N,Q)},Ae.useMemo=function(N,Q){return R.H.useMemo(N,Q)},Ae.useOptimistic=function(N,Q){return R.H.useOptimistic(N,Q)},Ae.useReducer=function(N,Q,te){return R.H.useReducer(N,Q,te)},Ae.useRef=function(N){return R.H.useRef(N)},Ae.useState=function(N){return R.H.useState(N)},Ae.useSyncExternalStore=function(N,Q,te){return R.H.useSyncExternalStore(N,Q,te)},Ae.useTransition=function(){return R.H.useTransition()},Ae.version="19.2.0",Ae}var uv;function Um(){return uv||(uv=1,Gd.exports=Aw()),Gd.exports}var ee=Um();const ea=e1(ee);var Qd={exports:{}},jl={},Yd={exports:{}},Kd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cv;function xw(){return cv||(cv=1,(function(s){function e(H,ne){var de=H.length;H.push(ne);e:for(;0<de;){var Ce=de-1>>>1,He=H[Ce];if(0<o(He,ne))H[Ce]=ne,H[de]=He,de=Ce;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ne=H[0],de=H.pop();if(de!==ne){H[0]=de;e:for(var Ce=0,He=H.length,N=He>>>1;Ce<N;){var Q=2*(Ce+1)-1,te=H[Q],ae=Q+1,ve=H[ae];if(0>o(te,de))ae<He&&0>o(ve,te)?(H[Ce]=ve,H[ae]=de,Ce=ae):(H[Ce]=te,H[Q]=de,Ce=Q);else if(ae<He&&0>o(ve,de))H[Ce]=ve,H[ae]=de,Ce=ae;else break e}}return ne}function o(H,ne){var de=H.sortIndex-ne.sortIndex;return de!==0?de:H.id-ne.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var f=Date,g=f.now();s.unstable_now=function(){return f.now()-g}}var y=[],p=[],b=1,w=null,x=3,q=!1,K=!1,M=!1,k=!1,re=typeof setTimeout=="function"?setTimeout:null,ue=typeof clearTimeout=="function"?clearTimeout:null,le=typeof setImmediate<"u"?setImmediate:null;function ie(H){for(var ne=n(p);ne!==null;){if(ne.callback===null)r(p);else if(ne.startTime<=H)r(p),ne.sortIndex=ne.expirationTime,e(y,ne);else break;ne=n(p)}}function ye(H){if(M=!1,ie(H),!K)if(n(y)!==null)K=!0,me||(me=!0,L());else{var ne=n(p);ne!==null&&fe(ye,ne.startTime-H)}}var me=!1,R=-1,A=5,C=-1;function O(){return k?!0:!(s.unstable_now()-C<A)}function V(){if(k=!1,me){var H=s.unstable_now();C=H;var ne=!0;try{e:{K=!1,M&&(M=!1,ue(R),R=-1),q=!0;var de=x;try{t:{for(ie(H),w=n(y);w!==null&&!(w.expirationTime>H&&O());){var Ce=w.callback;if(typeof Ce=="function"){w.callback=null,x=w.priorityLevel;var He=Ce(w.expirationTime<=H);if(H=s.unstable_now(),typeof He=="function"){w.callback=He,ie(H),ne=!0;break t}w===n(y)&&r(y),ie(H)}else r(y);w=n(y)}if(w!==null)ne=!0;else{var N=n(p);N!==null&&fe(ye,N.startTime-H),ne=!1}}break e}finally{w=null,x=de,q=!1}ne=void 0}}finally{ne?L():me=!1}}}var L;if(typeof le=="function")L=function(){le(V)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Fe=I.port2;I.port1.onmessage=V,L=function(){Fe.postMessage(null)}}else L=function(){re(V,0)};function fe(H,ne){R=re(function(){H(s.unstable_now())},ne)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(H){H.callback=null},s.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<H?Math.floor(1e3/H):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_next=function(H){switch(x){case 1:case 2:case 3:var ne=3;break;default:ne=x}var de=x;x=ne;try{return H()}finally{x=de}},s.unstable_requestPaint=function(){k=!0},s.unstable_runWithPriority=function(H,ne){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var de=x;x=H;try{return ne()}finally{x=de}},s.unstable_scheduleCallback=function(H,ne,de){var Ce=s.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Ce+de:Ce):de=Ce,H){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=de+He,H={id:b++,callback:ne,priorityLevel:H,startTime:de,expirationTime:He,sortIndex:-1},de>Ce?(H.sortIndex=de,e(p,H),n(y)===null&&H===n(p)&&(M?(ue(R),R=-1):M=!0,fe(ye,de-Ce))):(H.sortIndex=He,e(y,H),K||q||(K=!0,me||(me=!0,L()))),H},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(H){var ne=x;return function(){var de=x;x=ne;try{return H.apply(this,arguments)}finally{x=de}}}})(Kd)),Kd}var hv;function Rw(){return hv||(hv=1,Yd.exports=xw()),Yd.exports}var $d={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fv;function Cw(){if(fv)return tn;fv=1;var s=Um();function e(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,p,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:y,containerInfo:p,implementation:b}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,tn.createPortal=function(y,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(y,p,null,b)},tn.flushSync=function(y){var p=f.T,b=r.p;try{if(f.T=null,r.p=2,y)return y()}finally{f.T=p,r.p=b,r.d.f()}},tn.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(y,p))},tn.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},tn.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var b=p.as,w=g(b,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,q=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?r.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:w,integrity:x,fetchPriority:q}):b==="script"&&r.d.X(y,{crossOrigin:w,integrity:x,fetchPriority:q,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},tn.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=g(p.as,p.crossOrigin);r.d.M(y,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(y)},tn.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,w=g(b,p.crossOrigin);r.d.L(y,b,{crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},tn.preloadModule=function(y,p){if(typeof y=="string")if(p){var b=g(p.as,p.crossOrigin);r.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(y)},tn.requestFormReset=function(y){r.d.r(y)},tn.unstable_batchedUpdates=function(y,p){return y(p)},tn.useFormState=function(y,p,b){return f.H.useFormState(y,p,b)},tn.useFormStatus=function(){return f.H.useHostTransitionStatus()},tn.version="19.2.0",tn}var dv;function Iw(){if(dv)return $d.exports;dv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),$d.exports=Cw(),$d.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mv;function Nw(){if(mv)return jl;mv=1;var s=Rw(),e=Um(),n=Iw();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function y(t){if(u(t)!==t)throw Error(r(188))}function p(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return y(h),t;if(d===l)return y(h),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=d;else{for(var v=!1,T=h.child;T;){if(T===a){v=!0,a=h,l=d;break}if(T===l){v=!0,l=h,a=d;break}T=T.sibling}if(!v){for(T=d.child;T;){if(T===a){v=!0,a=d,l=h;break}if(T===l){v=!0,l=d,a=h;break}T=T.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function b(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=b(t),i!==null)return i;t=t.sibling}return null}var w=Object.assign,x=Symbol.for("react.element"),q=Symbol.for("react.transitional.element"),K=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),re=Symbol.for("react.profiler"),ue=Symbol.for("react.consumer"),le=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=V&&t[V]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function Fe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case M:return"Fragment";case re:return"Profiler";case k:return"StrictMode";case ye:return"Suspense";case me:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case K:return"Portal";case le:return t.displayName||"Context";case ue:return(t._context.displayName||"Context")+".Consumer";case ie:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return i=t.displayName||null,i!==null?i:Fe(t.type)||"Memo";case A:i=t._payload,t=t._init;try{return Fe(t(i))}catch{}}return null}var fe=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Ce=[],He=-1;function N(t){return{current:t}}function Q(t){0>He||(t.current=Ce[He],Ce[He]=null,He--)}function te(t,i){He++,Ce[He]=t.current,t.current=i}var ae=N(null),ve=N(null),Re=N(null),Oe=N(null);function Et(t,i){switch(te(Re,i),te(ve,t),te(ae,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?I0(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=I0(i),t=N0(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Q(ae),te(ae,t)}function rt(){Q(ae),Q(ve),Q(Re)}function qi(t){t.memoizedState!==null&&te(Oe,t);var i=ae.current,a=N0(i,t.type);i!==a&&(te(ve,t),te(ae,a))}function bs(t){ve.current===t&&(Q(ae),Q(ve)),Oe.current===t&&(Q(Oe),Nl._currentValue=de)}var Ts,Bi;function Rt(t){if(Ts===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Ts=i&&i[1]||"",Bi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ts+t+Bi}var _r=!1;function Qn(t,i){if(!t||_r)return"";_r=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(Y){var F=Y}Reflect.construct(t,[],Z)}else{try{Z.call()}catch(Y){F=Y}t.call(Z.prototype)}}else{try{throw Error()}catch(Y){F=Y}(Z=t())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(Y){if(Y&&F&&typeof Y.stack=="string")return[Y.stack,F.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],T=d[1];if(v&&T){var D=v.split(`
`),B=T.split(`
`);for(h=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(l===D.length||h===B.length)for(l=D.length-1,h=B.length-1;1<=l&&0<=h&&D[l]!==B[h];)h--;for(;1<=l&&0<=h;l--,h--)if(D[l]!==B[h]){if(l!==1||h!==1)do if(l--,h--,0>h||D[l]!==B[h]){var $=`
`+D[l].replace(" at new "," at ");return t.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",t.displayName)),$}while(1<=l&&0<=h);break}}}finally{_r=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Rt(a):""}function Er(t,i){switch(t.tag){case 26:case 27:case 5:return Rt(t.type);case 16:return Rt("Lazy");case 13:return t.child!==i&&i!==null?Rt("Suspense Fallback"):Rt("Suspense");case 19:return Rt("SuspenseList");case 0:case 15:return Qn(t.type,!1);case 11:return Qn(t.type.render,!1);case 1:return Qn(t.type,!0);case 31:return Rt("Activity");default:return""}}function ws(t){try{var i="",a=null;do i+=Er(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var yt=Object.prototype.hasOwnProperty,bt=s.unstable_scheduleCallback,ci=s.unstable_cancelCallback,Mo=s.unstable_shouldYield,da=s.unstable_requestPaint,Qt=s.unstable_now,hi=s.unstable_getCurrentPriorityLevel,Hi=s.unstable_ImmediatePriority,br=s.unstable_UserBlockingPriority,fi=s.unstable_NormalPriority,Vo=s.unstable_LowPriority,ma=s.unstable_IdlePriority,ga=s.log,pa=s.unstable_setDisableYieldValue,pe=null,ze=null;function ft(t){if(typeof ga=="function"&&pa(t),ze&&typeof ze.setStrictMode=="function")try{ze.setStrictMode(pe,t)}catch{}}var it=Math.clz32?Math.clz32:wr,Tr=Math.log,Fi=Math.LN2;function wr(t){return t>>>=0,t===0?32:31-(Tr(t)/Fi|0)|0}var gt=256,dn=262144,Ct=4194304;function di(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function mi(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?h=di(l):(v&=T,v!==0?h=di(v):a||(a=T&~t,a!==0&&(h=di(a))))):(T=l&~d,T!==0?h=di(T):v!==0?h=di(v):a||(a=l&~t,a!==0&&(h=di(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function Yn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Yh(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vu(){var t=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),t}function gi(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Sr(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Kh(t,i,a,l,h,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,D=t.expirationTimes,B=t.hiddenUpdates;for(a=v&~a;0<a;){var $=31-it(a),Z=1<<$;T[$]=0,D[$]=-1;var F=B[$];if(F!==null)for(B[$]=null,$=0;$<F.length;$++){var Y=F[$];Y!==null&&(Y.lane&=-536870913)}a&=~Z}l!==0&&Ar(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~i))}function Ar(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-it(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function jo(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-it(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function ko(t,i){var a=i&-i;return a=(a&42)!==0?1:xr(a),(a&(t.suspendedLanes|i))!==0?0:a}function xr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Gi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function _u(){var t=ne.p;return t!==0?t:(t=window.event,t===void 0?32:W0(t.type))}function Kn(t,i){var a=ne.p;try{return ne.p=t,i()}finally{ne.p=a}}var $n=Math.random().toString(36).slice(2),It="__reactFiber$"+$n,Bt="__reactProps$"+$n,pi="__reactContainer$"+$n,ya="__reactEvents$"+$n,$h="__reactListeners$"+$n,Eu="__reactHandles$"+$n,bu="__reactResources$"+$n,yi="__reactMarker$"+$n;function va(t){delete t[It],delete t[Bt],delete t[ya],delete t[$h],delete t[Eu]}function vi(t){var i=t[It];if(i)return i;for(var a=t.parentNode;a;){if(i=a[pi]||a[It]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=L0(t);t!==null;){if(a=t[It])return a;t=L0(t)}return i}t=a,a=t.parentNode}return null}function On(t){if(t=t[It]||t[pi]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Tn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function _i(t){var i=t[bu];return i||(i=t[bu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Nt(t){t[yi]=!0}var Lo=new Set,Uo={};function Ei(t,i){bi(t,i),bi(t+"Capture",i)}function bi(t,i){for(Uo[t]=i,t=0;t<i.length;t++)Lo.add(i[t])}var Po=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zo={},qo={};function Tu(t){return yt.call(qo,t)?!0:yt.call(zo,t)?!1:Po.test(t)?qo[t]=!0:(zo[t]=!0,!1)}function _a(t,i,a){if(Tu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function wn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Dt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function Ht(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ss(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Bo(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,d=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,d.call(this,v)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Xe(t){if(!t._valueTracker){var i=Ss(t)?"checked":"value";t._valueTracker=Bo(t,i,""+t[i])}}function Rr(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Ss(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Ti(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Cr=/[\n"\\]/g;function mn(t){return t.replace(Cr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ea(t,i,a,l,h,d,v,T){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Ht(i)):t.value!==""+Ht(i)&&(t.value=""+Ht(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?Ho(t,v,Ht(i)):a!=null?Ho(t,v,Ht(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Ht(T):t.removeAttribute("name")}function wu(t,i,a,l,h,d,v,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Xe(t);return}a=a!=null?""+Ht(a):"",i=i!=null?""+Ht(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),Xe(t)}function Ho(t,i,a){i==="number"&&Ti(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function As(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Ht(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Su(t,i,a){if(i!=null&&(i=""+Ht(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Ht(a):""}function xs(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(fe(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Ht(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Xe(t)}function gn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Au=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fo(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||Au.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Go(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Fo(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&Fo(t,d,i[d])}function ba(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ta(t){return Rs.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Xn(){}var Qo=null;function Mn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cs=null,wi=null;function Ir(t){var i=On(t);if(i&&(t=i.stateNode)){var a=t[Bt]||null;e:switch(t=i.stateNode,i.type){case"input":if(Ea(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+mn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[Bt]||null;if(!h)throw Error(r(90));Ea(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Rr(l)}break e;case"textarea":Su(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&As(t,!!a.multiple,i,!1)}}}var wa=!1;function Is(t,i,a){if(wa)return t(i,a);wa=!0;try{var l=t(i);return l}finally{if(wa=!1,(Cs!==null||wi!==null)&&(_c(),Cs&&(i=Cs,t=wi,wi=Cs=null,Ir(i),t)))for(i=0;i<t.length;i++)Ir(t[i])}}function Jn(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Bt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nr=!1;if(Vn)try{var We={};Object.defineProperty(We,"passive",{get:function(){Nr=!0}}),window.addEventListener("test",We,We),window.removeEventListener("test",We,We)}catch{Nr=!1}var Si=null,Yo=null,Dr=null;function Ko(){if(Dr)return Dr;var t,i=Yo,a=i.length,l,h="value"in Si?Si.value:Si.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&i[a-l]===h[d-l];l++);return Dr=h.slice(t,1<l?1-l:void 0)}function Or(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Qi(){return!0}function Zn(){return!1}function Yt(t){function i(a,l,h,d,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Qi:Zn,this.isPropagationStopped=Zn,this}return w(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Qi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Qi)},persist:function(){},isPersistent:Qi}),i}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ai=Yt(Yi),Ns=w({},Yi,{view:0,detail:0}),$o=Yt(Ns),Ds,Sa,xi,Aa=w({},Ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Os,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xi&&(xi&&t.type==="mousemove"?(Ds=t.screenX-xi.screenX,Sa=t.screenY-xi.screenY):Sa=Ds=0,xi=t),Ds)},movementY:function(t){return"movementY"in t?t.movementY:Sa}}),Xo=Yt(Aa),Mr=w({},Aa,{dataTransfer:0}),Ru=Yt(Mr),Cu=w({},Ns,{relatedTarget:0}),Vr=Yt(Cu),Jo=w({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),Iu=Yt(Jo),xa=w({},Yi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Nu=Yt(xa),Du=w({},Yi,{data:0}),Ri=Yt(Du),Ou={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ju(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Vu[t])?!!i[t]:!1}function Os(){return ju}var cn=w({},Ns,{key:function(t){if(t.key){var i=Ou[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Or(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Mu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Os,charCode:function(t){return t.type==="keypress"?Or(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Or(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ku=Yt(cn),Lu=w({},Aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ki=Yt(Lu),c=w({},Ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Os}),m=Yt(c),E=w({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Yt(E),P=w({},Aa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),G=Yt(P),se=w({},Yi,{newState:0,oldState:0}),Ie=Yt(se),Tt=[9,13,27,32],Ye=Vn&&"CompositionEvent"in window,dt=null;Vn&&"documentMode"in document&&(dt=document.documentMode);var jn=Vn&&"TextEvent"in window&&!dt,Ci=Vn&&(!Ye||dt&&8<dt&&11>=dt),Wn=" ",ei=!1;function jr(t,i){switch(t){case"keyup":return Tt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ra(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ca=!1;function Yb(t,i){switch(t){case"compositionend":return Ra(i);case"keypress":return i.which!==32?null:(ei=!0,Wn);case"textInput":return t=i.data,t===Wn&&ei?null:t;default:return null}}function Kb(t,i){if(Ca)return t==="compositionend"||!Ye&&jr(t,i)?(t=Ko(),Dr=Yo=Si=null,Ca=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ci&&i.locale!=="ko"?null:i.data;default:return null}}var $b={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zg(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!$b[t.type]:i==="textarea"}function qg(t,i,a,l){Cs?wi?wi.push(l):wi=[l]:Cs=l,i=xc(i,"onChange"),0<i.length&&(a=new Ai("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Zo=null,Wo=null;function Xb(t){w0(t,0)}function Uu(t){var i=Tn(t);if(Rr(i))return t}function Bg(t,i){if(t==="change")return i}var Hg=!1;if(Vn){var Xh;if(Vn){var Jh="oninput"in document;if(!Jh){var Fg=document.createElement("div");Fg.setAttribute("oninput","return;"),Jh=typeof Fg.oninput=="function"}Xh=Jh}else Xh=!1;Hg=Xh&&(!document.documentMode||9<document.documentMode)}function Gg(){Zo&&(Zo.detachEvent("onpropertychange",Qg),Wo=Zo=null)}function Qg(t){if(t.propertyName==="value"&&Uu(Wo)){var i=[];qg(i,Wo,t,Mn(t)),Is(Xb,i)}}function Jb(t,i,a){t==="focusin"?(Gg(),Zo=i,Wo=a,Zo.attachEvent("onpropertychange",Qg)):t==="focusout"&&Gg()}function Zb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uu(Wo)}function Wb(t,i){if(t==="click")return Uu(i)}function eT(t,i){if(t==="input"||t==="change")return Uu(i)}function tT(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Sn=typeof Object.is=="function"?Object.is:tT;function el(t,i){if(Sn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!yt.call(i,h)||!Sn(t[h],i[h]))return!1}return!0}function Yg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kg(t,i){var a=Yg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Yg(a)}}function $g(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?$g(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Xg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Ti(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Ti(t.document)}return i}function Zh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var nT=Vn&&"documentMode"in document&&11>=document.documentMode,Ia=null,Wh=null,tl=null,ef=!1;function Jg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ef||Ia==null||Ia!==Ti(l)||(l=Ia,"selectionStart"in l&&Zh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),tl&&el(tl,l)||(tl=l,l=xc(Wh,"onSelect"),0<l.length&&(i=new Ai("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=Ia)))}function kr(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Na={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionrun:kr("Transition","TransitionRun"),transitionstart:kr("Transition","TransitionStart"),transitioncancel:kr("Transition","TransitionCancel"),transitionend:kr("Transition","TransitionEnd")},tf={},Zg={};Vn&&(Zg=document.createElement("div").style,"AnimationEvent"in window||(delete Na.animationend.animation,delete Na.animationiteration.animation,delete Na.animationstart.animation),"TransitionEvent"in window||delete Na.transitionend.transition);function Lr(t){if(tf[t])return tf[t];if(!Na[t])return t;var i=Na[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Zg)return tf[t]=i[a];return t}var Wg=Lr("animationend"),ep=Lr("animationiteration"),tp=Lr("animationstart"),iT=Lr("transitionrun"),sT=Lr("transitionstart"),rT=Lr("transitioncancel"),np=Lr("transitionend"),ip=new Map,nf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nf.push("scrollEnd");function ti(t,i){ip.set(t,i),Ei(i,[t])}var Pu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},kn=[],Da=0,sf=0;function zu(){for(var t=Da,i=sf=Da=0;i<t;){var a=kn[i];kn[i++]=null;var l=kn[i];kn[i++]=null;var h=kn[i];kn[i++]=null;var d=kn[i];if(kn[i++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&sp(a,h,d)}}function qu(t,i,a,l){kn[Da++]=t,kn[Da++]=i,kn[Da++]=a,kn[Da++]=l,sf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function rf(t,i,a,l){return qu(t,i,a,l),Bu(t)}function Ur(t,i){return qu(t,null,null,i),Bu(t)}function sp(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-it(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function Bu(t){if(50<wl)throw wl=0,md=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Oa={};function aT(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,i,a,l){return new aT(t,i,a,l)}function af(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $i(t,i){var a=t.alternate;return a===null?(a=An(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function rp(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Hu(t,i,a,l,h,d){var v=0;if(l=t,typeof t=="function")af(t)&&(v=1);else if(typeof t=="string")v=hw(t,a,ae.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=An(31,a,i,h),t.elementType=C,t.lanes=d,t;case M:return Pr(a.children,h,d,i);case k:v=8,h|=24;break;case re:return t=An(12,a,i,h|2),t.elementType=re,t.lanes=d,t;case ye:return t=An(13,a,i,h),t.elementType=ye,t.lanes=d,t;case me:return t=An(19,a,i,h),t.elementType=me,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case le:v=10;break e;case ue:v=9;break e;case ie:v=11;break e;case R:v=14;break e;case A:v=16,l=null;break e}v=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return i=An(v,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function Pr(t,i,a,l){return t=An(7,t,l,i),t.lanes=a,t}function of(t,i,a){return t=An(6,t,null,i),t.lanes=a,t}function ap(t){var i=An(18,null,null,0);return i.stateNode=t,i}function lf(t,i,a){return i=An(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var op=new WeakMap;function Ln(t,i){if(typeof t=="object"&&t!==null){var a=op.get(t);return a!==void 0?a:(i={value:t,source:i,stack:ws(i)},op.set(t,i),i)}return{value:t,source:i,stack:ws(i)}}var Ma=[],Va=0,Fu=null,nl=0,Un=[],Pn=0,Ms=null,Ii=1,Ni="";function Xi(t,i){Ma[Va++]=nl,Ma[Va++]=Fu,Fu=t,nl=i}function lp(t,i,a){Un[Pn++]=Ii,Un[Pn++]=Ni,Un[Pn++]=Ms,Ms=t;var l=Ii;t=Ni;var h=32-it(l)-1;l&=~(1<<h),a+=1;var d=32-it(i)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Ii=1<<32-it(i)+h|a<<h|l,Ni=d+t}else Ii=1<<d|a<<h|l,Ni=t}function uf(t){t.return!==null&&(Xi(t,1),lp(t,1,0))}function cf(t){for(;t===Fu;)Fu=Ma[--Va],Ma[Va]=null,nl=Ma[--Va],Ma[Va]=null;for(;t===Ms;)Ms=Un[--Pn],Un[Pn]=null,Ni=Un[--Pn],Un[Pn]=null,Ii=Un[--Pn],Un[Pn]=null}function up(t,i){Un[Pn++]=Ii,Un[Pn++]=Ni,Un[Pn++]=Ms,Ii=i.id,Ni=i.overflow,Ms=t}var Kt=null,lt=null,qe=!1,Vs=null,zn=!1,hf=Error(r(519));function js(t){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw il(Ln(i,t)),hf}function cp(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[It]=t,i[Bt]=l,a){case"dialog":Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":case"embed":Ve("load",i);break;case"video":case"audio":for(a=0;a<Al.length;a++)Ve(Al[a],i);break;case"source":Ve("error",i);break;case"img":case"image":case"link":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"input":Ve("invalid",i),wu(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ve("invalid",i);break;case"textarea":Ve("invalid",i),xs(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||R0(i.textContent,a)?(l.popover!=null&&(Ve("beforetoggle",i),Ve("toggle",i)),l.onScroll!=null&&Ve("scroll",i),l.onScrollEnd!=null&&Ve("scrollend",i),l.onClick!=null&&(i.onclick=Xn),i=!0):i=!1,i||js(t,!0)}function hp(t){for(Kt=t.return;Kt;)switch(Kt.tag){case 5:case 31:case 13:zn=!1;return;case 27:case 3:zn=!0;return;default:Kt=Kt.return}}function ja(t){if(t!==Kt)return!1;if(!qe)return hp(t),qe=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Id(t.type,t.memoizedProps)),a=!a),a&&lt&&js(t),hp(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));lt=k0(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));lt=k0(t)}else i===27?(i=lt,$s(t.type)?(t=Vd,Vd=null,lt=t):lt=i):lt=Kt?Bn(t.stateNode.nextSibling):null;return!0}function zr(){lt=Kt=null,qe=!1}function ff(){var t=Vs;return t!==null&&(_n===null?_n=t:_n.push.apply(_n,t),Vs=null),t}function il(t){Vs===null?Vs=[t]:Vs.push(t)}var df=N(null),qr=null,Ji=null;function ks(t,i,a){te(df,i._currentValue),i._currentValue=a}function Zi(t){t._currentValue=df.current,Q(df)}function mf(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function gf(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=h;for(var D=0;D<i.length;D++)if(T.context===i[D]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),mf(d.return,a,t),l||(v=null);break e}d=T.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(r(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),mf(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function ka(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var T=h.type;Sn(h.pendingProps.value,v.value)||(t!==null?t.push(T):t=[T])}}else if(h===Oe.current){if(v=h.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Nl):t=[Nl])}h=h.return}t!==null&&gf(i,t,a,l),i.flags|=262144}function Gu(t){for(t=t.firstContext;t!==null;){if(!Sn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Br(t){qr=t,Ji=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function $t(t){return fp(qr,t)}function Qu(t,i){return qr===null&&Br(t),fp(t,i)}function fp(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Ji===null){if(t===null)throw Error(r(308));Ji=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Ji=Ji.next=i;return a}var oT=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},lT=s.unstable_scheduleCallback,uT=s.unstable_NormalPriority,Ot={$$typeof:le,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pf(){return{controller:new oT,data:new Map,refCount:0}}function sl(t){t.refCount--,t.refCount===0&&lT(uT,function(){t.controller.abort()})}var rl=null,yf=0,La=0,Ua=null;function cT(t,i){if(rl===null){var a=rl=[];yf=0,La=Ed(),Ua={status:"pending",value:void 0,then:function(l){a.push(l)}}}return yf++,i.then(dp,dp),i}function dp(){if(--yf===0&&rl!==null){Ua!==null&&(Ua.status="fulfilled");var t=rl;rl=null,La=0,Ua=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function hT(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var mp=H.S;H.S=function(t,i){Jy=Qt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&cT(t,i),mp!==null&&mp(t,i)};var Hr=N(null);function vf(){var t=Hr.current;return t!==null?t:st.pooledCache}function Yu(t,i){i===null?te(Hr,Hr.current):te(Hr,i.pool)}function gp(){var t=vf();return t===null?null:{parent:Ot._currentValue,pool:t}}var Pa=Error(r(460)),_f=Error(r(474)),Ku=Error(r(542)),$u={then:function(){}};function pp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function yp(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Xn,Xn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,_p(t),t;default:if(typeof i.status=="string")i.then(Xn,Xn);else{if(t=st,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,_p(t),t}throw Gr=i,Pa}}function Fr(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Gr=a,Pa):a}}var Gr=null;function vp(){if(Gr===null)throw Error(r(459));var t=Gr;return Gr=null,t}function _p(t){if(t===Pa||t===Ku)throw Error(r(483))}var za=null,al=0;function Xu(t){var i=al;return al+=1,za===null&&(za=[]),yp(za,t,i)}function ol(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Ju(t,i){throw i.$$typeof===x?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Ep(t){function i(U,j){if(t){var z=U.deletions;z===null?(U.deletions=[j],U.flags|=16):z.push(j)}}function a(U,j){if(!t)return null;for(;j!==null;)i(U,j),j=j.sibling;return null}function l(U){for(var j=new Map;U!==null;)U.key!==null?j.set(U.key,U):j.set(U.index,U),U=U.sibling;return j}function h(U,j){return U=$i(U,j),U.index=0,U.sibling=null,U}function d(U,j,z){return U.index=z,t?(z=U.alternate,z!==null?(z=z.index,z<j?(U.flags|=67108866,j):z):(U.flags|=67108866,j)):(U.flags|=1048576,j)}function v(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function T(U,j,z,X){return j===null||j.tag!==6?(j=of(z,U.mode,X),j.return=U,j):(j=h(j,z),j.return=U,j)}function D(U,j,z,X){var _e=z.type;return _e===M?$(U,j,z.props.children,X,z.key):j!==null&&(j.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===A&&Fr(_e)===j.type)?(j=h(j,z.props),ol(j,z),j.return=U,j):(j=Hu(z.type,z.key,z.props,null,U.mode,X),ol(j,z),j.return=U,j)}function B(U,j,z,X){return j===null||j.tag!==4||j.stateNode.containerInfo!==z.containerInfo||j.stateNode.implementation!==z.implementation?(j=lf(z,U.mode,X),j.return=U,j):(j=h(j,z.children||[]),j.return=U,j)}function $(U,j,z,X,_e){return j===null||j.tag!==7?(j=Pr(z,U.mode,X,_e),j.return=U,j):(j=h(j,z),j.return=U,j)}function Z(U,j,z){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=of(""+j,U.mode,z),j.return=U,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case q:return z=Hu(j.type,j.key,j.props,null,U.mode,z),ol(z,j),z.return=U,z;case K:return j=lf(j,U.mode,z),j.return=U,j;case A:return j=Fr(j),Z(U,j,z)}if(fe(j)||L(j))return j=Pr(j,U.mode,z,null),j.return=U,j;if(typeof j.then=="function")return Z(U,Xu(j),z);if(j.$$typeof===le)return Z(U,Qu(U,j),z);Ju(U,j)}return null}function F(U,j,z,X){var _e=j!==null?j.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return _e!==null?null:T(U,j,""+z,X);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case q:return z.key===_e?D(U,j,z,X):null;case K:return z.key===_e?B(U,j,z,X):null;case A:return z=Fr(z),F(U,j,z,X)}if(fe(z)||L(z))return _e!==null?null:$(U,j,z,X,null);if(typeof z.then=="function")return F(U,j,Xu(z),X);if(z.$$typeof===le)return F(U,j,Qu(U,z),X);Ju(U,z)}return null}function Y(U,j,z,X,_e){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return U=U.get(z)||null,T(j,U,""+X,_e);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case q:return U=U.get(X.key===null?z:X.key)||null,D(j,U,X,_e);case K:return U=U.get(X.key===null?z:X.key)||null,B(j,U,X,_e);case A:return X=Fr(X),Y(U,j,z,X,_e)}if(fe(X)||L(X))return U=U.get(z)||null,$(j,U,X,_e,null);if(typeof X.then=="function")return Y(U,j,z,Xu(X),_e);if(X.$$typeof===le)return Y(U,j,z,Qu(j,X),_e);Ju(j,X)}return null}function he(U,j,z,X){for(var _e=null,Ge=null,ge=j,De=j=0,ke=null;ge!==null&&De<z.length;De++){ge.index>De?(ke=ge,ge=null):ke=ge.sibling;var Qe=F(U,ge,z[De],X);if(Qe===null){ge===null&&(ge=ke);break}t&&ge&&Qe.alternate===null&&i(U,ge),j=d(Qe,j,De),Ge===null?_e=Qe:Ge.sibling=Qe,Ge=Qe,ge=ke}if(De===z.length)return a(U,ge),qe&&Xi(U,De),_e;if(ge===null){for(;De<z.length;De++)ge=Z(U,z[De],X),ge!==null&&(j=d(ge,j,De),Ge===null?_e=ge:Ge.sibling=ge,Ge=ge);return qe&&Xi(U,De),_e}for(ge=l(ge);De<z.length;De++)ke=Y(ge,U,De,z[De],X),ke!==null&&(t&&ke.alternate!==null&&ge.delete(ke.key===null?De:ke.key),j=d(ke,j,De),Ge===null?_e=ke:Ge.sibling=ke,Ge=ke);return t&&ge.forEach(function(er){return i(U,er)}),qe&&Xi(U,De),_e}function be(U,j,z,X){if(z==null)throw Error(r(151));for(var _e=null,Ge=null,ge=j,De=j=0,ke=null,Qe=z.next();ge!==null&&!Qe.done;De++,Qe=z.next()){ge.index>De?(ke=ge,ge=null):ke=ge.sibling;var er=F(U,ge,Qe.value,X);if(er===null){ge===null&&(ge=ke);break}t&&ge&&er.alternate===null&&i(U,ge),j=d(er,j,De),Ge===null?_e=er:Ge.sibling=er,Ge=er,ge=ke}if(Qe.done)return a(U,ge),qe&&Xi(U,De),_e;if(ge===null){for(;!Qe.done;De++,Qe=z.next())Qe=Z(U,Qe.value,X),Qe!==null&&(j=d(Qe,j,De),Ge===null?_e=Qe:Ge.sibling=Qe,Ge=Qe);return qe&&Xi(U,De),_e}for(ge=l(ge);!Qe.done;De++,Qe=z.next())Qe=Y(ge,U,De,Qe.value,X),Qe!==null&&(t&&Qe.alternate!==null&&ge.delete(Qe.key===null?De:Qe.key),j=d(Qe,j,De),Ge===null?_e=Qe:Ge.sibling=Qe,Ge=Qe);return t&&ge.forEach(function(Tw){return i(U,Tw)}),qe&&Xi(U,De),_e}function nt(U,j,z,X){if(typeof z=="object"&&z!==null&&z.type===M&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case q:e:{for(var _e=z.key;j!==null;){if(j.key===_e){if(_e=z.type,_e===M){if(j.tag===7){a(U,j.sibling),X=h(j,z.props.children),X.return=U,U=X;break e}}else if(j.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===A&&Fr(_e)===j.type){a(U,j.sibling),X=h(j,z.props),ol(X,z),X.return=U,U=X;break e}a(U,j);break}else i(U,j);j=j.sibling}z.type===M?(X=Pr(z.props.children,U.mode,X,z.key),X.return=U,U=X):(X=Hu(z.type,z.key,z.props,null,U.mode,X),ol(X,z),X.return=U,U=X)}return v(U);case K:e:{for(_e=z.key;j!==null;){if(j.key===_e)if(j.tag===4&&j.stateNode.containerInfo===z.containerInfo&&j.stateNode.implementation===z.implementation){a(U,j.sibling),X=h(j,z.children||[]),X.return=U,U=X;break e}else{a(U,j);break}else i(U,j);j=j.sibling}X=lf(z,U.mode,X),X.return=U,U=X}return v(U);case A:return z=Fr(z),nt(U,j,z,X)}if(fe(z))return he(U,j,z,X);if(L(z)){if(_e=L(z),typeof _e!="function")throw Error(r(150));return z=_e.call(z),be(U,j,z,X)}if(typeof z.then=="function")return nt(U,j,Xu(z),X);if(z.$$typeof===le)return nt(U,j,Qu(U,z),X);Ju(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,j!==null&&j.tag===6?(a(U,j.sibling),X=h(j,z),X.return=U,U=X):(a(U,j),X=of(z,U.mode,X),X.return=U,U=X),v(U)):a(U,j)}return function(U,j,z,X){try{al=0;var _e=nt(U,j,z,X);return za=null,_e}catch(ge){if(ge===Pa||ge===Ku)throw ge;var Ge=An(29,ge,null,U.mode);return Ge.lanes=X,Ge.return=U,Ge}finally{}}}var Qr=Ep(!0),bp=Ep(!1),Ls=!1;function Ef(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Us(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ps(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ke&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Bu(t),sp(t,null,a),i}return qu(t,l,i,a),Bu(t)}function ll(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,jo(t,a)}}function Tf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var wf=!1;function ul(){if(wf){var t=Ua;if(t!==null)throw t}}function cl(t,i,a,l){wf=!1;var h=t.updateQueue;Ls=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var D=T,B=D.next;D.next=null,v===null?d=B:v.next=B,v=D;var $=t.alternate;$!==null&&($=$.updateQueue,T=$.lastBaseUpdate,T!==v&&(T===null?$.firstBaseUpdate=B:T.next=B,$.lastBaseUpdate=D))}if(d!==null){var Z=h.baseState;v=0,$=B=D=null,T=d;do{var F=T.lane&-536870913,Y=F!==T.lane;if(Y?(je&F)===F:(l&F)===F){F!==0&&F===La&&(wf=!0),$!==null&&($=$.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var he=t,be=T;F=i;var nt=a;switch(be.tag){case 1:if(he=be.payload,typeof he=="function"){Z=he.call(nt,Z,F);break e}Z=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=be.payload,F=typeof he=="function"?he.call(nt,Z,F):he,F==null)break e;Z=w({},Z,F);break e;case 2:Ls=!0}}F=T.callback,F!==null&&(t.flags|=64,Y&&(t.flags|=8192),Y=h.callbacks,Y===null?h.callbacks=[F]:Y.push(F))}else Y={lane:F,tag:T.tag,payload:T.payload,callback:T.callback,next:null},$===null?(B=$=Y,D=Z):$=$.next=Y,v|=F;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;Y=T,T=Y.next,Y.next=null,h.lastBaseUpdate=Y,h.shared.pending=null}}while(!0);$===null&&(D=Z),h.baseState=D,h.firstBaseUpdate=B,h.lastBaseUpdate=$,d===null&&(h.shared.lanes=0),Fs|=v,t.lanes=v,t.memoizedState=Z}}function Tp(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function wp(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Tp(a[t],i)}var qa=N(null),Zu=N(0);function Sp(t,i){t=os,te(Zu,t),te(qa,i),os=t|i.baseLanes}function Sf(){te(Zu,os),te(qa,qa.current)}function Af(){os=Zu.current,Q(qa),Q(Zu)}var xn=N(null),qn=null;function zs(t){var i=t.alternate;te(wt,wt.current&1),te(xn,t),qn===null&&(i===null||qa.current!==null||i.memoizedState!==null)&&(qn=t)}function xf(t){te(wt,wt.current),te(xn,t),qn===null&&(qn=t)}function Ap(t){t.tag===22?(te(wt,wt.current),te(xn,t),qn===null&&(qn=t)):qs()}function qs(){te(wt,wt.current),te(xn,xn.current)}function Rn(t){Q(xn),qn===t&&(qn=null),Q(wt)}var wt=N(0);function Wu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Od(a)||Md(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Wi=0,Ne=null,et=null,Mt=null,ec=!1,Ba=!1,Yr=!1,tc=0,hl=0,Ha=null,fT=0;function vt(){throw Error(r(321))}function Rf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Sn(t[a],i[a]))return!1;return!0}function Cf(t,i,a,l,h,d){return Wi=d,Ne=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=t===null||t.memoizedState===null?ly:Hf,Yr=!1,d=a(l,h),Yr=!1,Ba&&(d=Rp(i,a,l,h)),xp(t),d}function xp(t){H.H=ml;var i=et!==null&&et.next!==null;if(Wi=0,Mt=et=Ne=null,ec=!1,hl=0,Ha=null,i)throw Error(r(300));t===null||Vt||(t=t.dependencies,t!==null&&Gu(t)&&(Vt=!0))}function Rp(t,i,a,l){Ne=t;var h=0;do{if(Ba&&(Ha=null),hl=0,Ba=!1,25<=h)throw Error(r(301));if(h+=1,Mt=et=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}H.H=uy,d=i(a,l)}while(Ba);return d}function dT(){var t=H.H,i=t.useState()[0];return i=typeof i.then=="function"?fl(i):i,t=t.useState()[0],(et!==null?et.memoizedState:null)!==t&&(Ne.flags|=1024),i}function If(){var t=tc!==0;return tc=0,t}function Nf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Df(t){if(ec){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}ec=!1}Wi=0,Mt=et=Ne=null,Ba=!1,hl=tc=0,Ha=null}function hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?Ne.memoizedState=Mt=t:Mt=Mt.next=t,Mt}function St(){if(et===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var i=Mt===null?Ne.memoizedState:Mt.next;if(i!==null)Mt=i,et=t;else{if(t===null)throw Ne.alternate===null?Error(r(467)):Error(r(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Mt===null?Ne.memoizedState=Mt=t:Mt=Mt.next=t}return Mt}function nc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fl(t){var i=hl;return hl+=1,Ha===null&&(Ha=[]),t=yp(Ha,t,i),i=Ne,(Mt===null?i.memoizedState:Mt.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?ly:Hf),t}function ic(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return fl(t);if(t.$$typeof===le)return $t(t)}throw Error(r(438,String(t)))}function Of(t){var i=null,a=Ne.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ne.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=nc(),Ne.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=O;return i.index++,a}function es(t,i){return typeof i=="function"?i(t):i}function sc(t){var i=St();return Mf(i,et,t)}function Mf(t,i,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var T=v=null,D=null,B=i,$=!1;do{var Z=B.lane&-536870913;if(Z!==B.lane?(je&Z)===Z:(Wi&Z)===Z){var F=B.revertLane;if(F===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),Z===La&&($=!0);else if((Wi&F)===F){B=B.next,F===La&&($=!0);continue}else Z={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},D===null?(T=D=Z,v=d):D=D.next=Z,Ne.lanes|=F,Fs|=F;Z=B.action,Yr&&a(d,Z),d=B.hasEagerState?B.eagerState:a(d,Z)}else F={lane:Z,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},D===null?(T=D=F,v=d):D=D.next=F,Ne.lanes|=Z,Fs|=Z;B=B.next}while(B!==null&&B!==i);if(D===null?v=d:D.next=T,!Sn(d,t.memoizedState)&&(Vt=!0,$&&(a=Ua,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=D,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Vf(t){var i=St(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);Sn(d,i.memoizedState)||(Vt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Cp(t,i,a){var l=Ne,h=St(),d=qe;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var v=!Sn((et||h).memoizedState,a);if(v&&(h.memoizedState=a,Vt=!0),h=h.queue,Lf(Dp.bind(null,l,h,t),[t]),h.getSnapshot!==i||v||Mt!==null&&Mt.memoizedState.tag&1){if(l.flags|=2048,Fa(9,{destroy:void 0},Np.bind(null,l,h,a,i),null),st===null)throw Error(r(349));d||(Wi&127)!==0||Ip(l,i,a)}return a}function Ip(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ne.updateQueue,i===null?(i=nc(),Ne.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Np(t,i,a,l){i.value=a,i.getSnapshot=l,Op(i)&&Mp(t)}function Dp(t,i,a){return a(function(){Op(i)&&Mp(t)})}function Op(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Sn(t,a)}catch{return!0}}function Mp(t){var i=Ur(t,2);i!==null&&En(i,t,2)}function jf(t){var i=hn();if(typeof t=="function"){var a=t;if(t=a(),Yr){ft(!0);try{a()}finally{ft(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:t},i}function Vp(t,i,a,l){return t.baseState=a,Mf(t,et,typeof l=="function"?l:es)}function mT(t,i,a,l,h){if(oc(t))throw Error(r(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};H.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,jp(i,d)):(d.next=a.next,i.pending=a.next=d)}}function jp(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=H.T,v={};H.T=v;try{var T=a(h,l),D=H.S;D!==null&&D(v,T),kp(t,i,T)}catch(B){kf(t,i,B)}finally{d!==null&&v.types!==null&&(d.types=v.types),H.T=d}}else try{d=a(h,l),kp(t,i,d)}catch(B){kf(t,i,B)}}function kp(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Lp(t,i,l)},function(l){return kf(t,i,l)}):Lp(t,i,a)}function Lp(t,i,a){i.status="fulfilled",i.value=a,Up(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,jp(t,a)))}function kf(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Up(i),i=i.next;while(i!==l)}t.action=null}function Up(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Pp(t,i){return i}function zp(t,i){if(qe){var a=st.formState;if(a!==null){e:{var l=Ne;if(qe){if(lt){t:{for(var h=lt,d=zn;h.nodeType!==8;){if(!d){h=null;break t}if(h=Bn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){lt=Bn(h.nextSibling),l=h.data==="F!";break e}}js(l)}l=!1}l&&(i=a[0])}}return a=hn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pp,lastRenderedState:i},a.queue=l,a=ry.bind(null,Ne,l),l.dispatch=a,l=jf(!1),d=Bf.bind(null,Ne,!1,l.queue),l=hn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=mT.bind(null,Ne,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function qp(t){var i=St();return Bp(i,et,t)}function Bp(t,i,a){if(i=Mf(t,i,Pp)[0],t=sc(es)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=fl(i)}catch(v){throw v===Pa?Ku:v}else l=i;i=St();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Ne.flags|=2048,Fa(9,{destroy:void 0},gT.bind(null,h,a),null)),[l,d,t]}function gT(t,i){t.action=i}function Hp(t){var i=St(),a=et;if(a!==null)return Bp(i,a,t);St(),i=i.memoizedState,a=St();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Fa(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Ne.updateQueue,i===null&&(i=nc(),Ne.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function Fp(){return St().memoizedState}function rc(t,i,a,l){var h=hn();Ne.flags|=t,h.memoizedState=Fa(1|i,{destroy:void 0},a,l===void 0?null:l)}function ac(t,i,a,l){var h=St();l=l===void 0?null:l;var d=h.memoizedState.inst;et!==null&&l!==null&&Rf(l,et.memoizedState.deps)?h.memoizedState=Fa(i,d,a,l):(Ne.flags|=t,h.memoizedState=Fa(1|i,d,a,l))}function Gp(t,i){rc(8390656,8,t,i)}function Lf(t,i){ac(2048,8,t,i)}function pT(t){Ne.flags|=4;var i=Ne.updateQueue;if(i===null)i=nc(),Ne.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function Qp(t){var i=St().memoizedState;return pT({ref:i,nextImpl:t}),function(){if((Ke&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function Yp(t,i){return ac(4,2,t,i)}function Kp(t,i){return ac(4,4,t,i)}function $p(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Xp(t,i,a){a=a!=null?a.concat([t]):null,ac(4,4,$p.bind(null,i,t),a)}function Uf(){}function Jp(t,i){var a=St();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Rf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Zp(t,i){var a=St();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Rf(i,l[1]))return l[0];if(l=t(),Yr){ft(!0);try{t()}finally{ft(!1)}}return a.memoizedState=[l,i],l}function Pf(t,i,a){return a===void 0||(Wi&1073741824)!==0&&(je&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=Wy(),Ne.lanes|=t,Fs|=t,a)}function Wp(t,i,a,l){return Sn(a,i)?a:qa.current!==null?(t=Pf(t,a,l),Sn(t,i)||(Vt=!0),t):(Wi&42)===0||(Wi&1073741824)!==0&&(je&261930)===0?(Vt=!0,t.memoizedState=a):(t=Wy(),Ne.lanes|=t,Fs|=t,i)}function ey(t,i,a,l,h){var d=ne.p;ne.p=d!==0&&8>d?d:8;var v=H.T,T={};H.T=T,Bf(t,!1,i,a);try{var D=h(),B=H.S;if(B!==null&&B(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var $=hT(D,l);dl(t,i,$,Nn(t))}else dl(t,i,l,Nn(t))}catch(Z){dl(t,i,{then:function(){},status:"rejected",reason:Z},Nn())}finally{ne.p=d,v!==null&&T.types!==null&&(v.types=T.types),H.T=v}}function yT(){}function zf(t,i,a,l){if(t.tag!==5)throw Error(r(476));var h=ty(t).queue;ey(t,h,i,de,a===null?yT:function(){return ny(t),a(l)})}function ty(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:de},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function ny(t){var i=ty(t);i.next===null&&(i=t.alternate.memoizedState),dl(t,i.next.queue,{},Nn())}function qf(){return $t(Nl)}function iy(){return St().memoizedState}function sy(){return St().memoizedState}function vT(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Nn();t=Us(a);var l=Ps(i,t,a);l!==null&&(En(l,i,a),ll(l,i,a)),i={cache:pf()},t.payload=i;return}i=i.return}}function _T(t,i,a){var l=Nn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},oc(t)?ay(i,a):(a=rf(t,i,a,l),a!==null&&(En(a,t,l),oy(a,i,l)))}function ry(t,i,a){var l=Nn();dl(t,i,a,l)}function dl(t,i,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(oc(t))ay(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,T=d(v,a);if(h.hasEagerState=!0,h.eagerState=T,Sn(T,v))return qu(t,i,h,0),st===null&&zu(),!1}catch{}finally{}if(a=rf(t,i,h,l),a!==null)return En(a,t,l),oy(a,i,l),!0}return!1}function Bf(t,i,a,l){if(l={lane:2,revertLane:Ed(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},oc(t)){if(i)throw Error(r(479))}else i=rf(t,a,l,2),i!==null&&En(i,t,2)}function oc(t){var i=t.alternate;return t===Ne||i!==null&&i===Ne}function ay(t,i){Ba=ec=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function oy(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,jo(t,a)}}var ml={readContext:$t,use:ic,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};ml.useEffectEvent=vt;var ly={readContext:$t,use:ic,useCallback:function(t,i){return hn().memoizedState=[t,i===void 0?null:i],t},useContext:$t,useEffect:Gp,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,rc(4194308,4,$p.bind(null,i,t),a)},useLayoutEffect:function(t,i){return rc(4194308,4,t,i)},useInsertionEffect:function(t,i){rc(4,2,t,i)},useMemo:function(t,i){var a=hn();i=i===void 0?null:i;var l=t();if(Yr){ft(!0);try{t()}finally{ft(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=hn();if(a!==void 0){var h=a(i);if(Yr){ft(!0);try{a(i)}finally{ft(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=_T.bind(null,Ne,t),[l.memoizedState,t]},useRef:function(t){var i=hn();return t={current:t},i.memoizedState=t},useState:function(t){t=jf(t);var i=t.queue,a=ry.bind(null,Ne,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Uf,useDeferredValue:function(t,i){var a=hn();return Pf(a,t,i)},useTransition:function(){var t=jf(!1);return t=ey.bind(null,Ne,t.queue,!0,!1),hn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Ne,h=hn();if(qe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),st===null)throw Error(r(349));(je&127)!==0||Ip(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,Gp(Dp.bind(null,l,d,t),[t]),l.flags|=2048,Fa(9,{destroy:void 0},Np.bind(null,l,d,a,i),null),a},useId:function(){var t=hn(),i=st.identifierPrefix;if(qe){var a=Ni,l=Ii;a=(l&~(1<<32-it(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=tc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=fT++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:qf,useFormState:zp,useActionState:zp,useOptimistic:function(t){var i=hn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Bf.bind(null,Ne,!0,a),a.dispatch=i,[t,i]},useMemoCache:Of,useCacheRefresh:function(){return hn().memoizedState=vT.bind(null,Ne)},useEffectEvent:function(t){var i=hn(),a={impl:t};return i.memoizedState=a,function(){if((Ke&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Hf={readContext:$t,use:ic,useCallback:Jp,useContext:$t,useEffect:Lf,useImperativeHandle:Xp,useInsertionEffect:Yp,useLayoutEffect:Kp,useMemo:Zp,useReducer:sc,useRef:Fp,useState:function(){return sc(es)},useDebugValue:Uf,useDeferredValue:function(t,i){var a=St();return Wp(a,et.memoizedState,t,i)},useTransition:function(){var t=sc(es)[0],i=St().memoizedState;return[typeof t=="boolean"?t:fl(t),i]},useSyncExternalStore:Cp,useId:iy,useHostTransitionStatus:qf,useFormState:qp,useActionState:qp,useOptimistic:function(t,i){var a=St();return Vp(a,et,t,i)},useMemoCache:Of,useCacheRefresh:sy};Hf.useEffectEvent=Qp;var uy={readContext:$t,use:ic,useCallback:Jp,useContext:$t,useEffect:Lf,useImperativeHandle:Xp,useInsertionEffect:Yp,useLayoutEffect:Kp,useMemo:Zp,useReducer:Vf,useRef:Fp,useState:function(){return Vf(es)},useDebugValue:Uf,useDeferredValue:function(t,i){var a=St();return et===null?Pf(a,t,i):Wp(a,et.memoizedState,t,i)},useTransition:function(){var t=Vf(es)[0],i=St().memoizedState;return[typeof t=="boolean"?t:fl(t),i]},useSyncExternalStore:Cp,useId:iy,useHostTransitionStatus:qf,useFormState:Hp,useActionState:Hp,useOptimistic:function(t,i){var a=St();return et!==null?Vp(a,et,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Of,useCacheRefresh:sy};uy.useEffectEvent=Qp;function Ff(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:w({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Gf={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Nn(),h=Us(l);h.payload=i,a!=null&&(h.callback=a),i=Ps(t,h,l),i!==null&&(En(i,t,l),ll(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Nn(),h=Us(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Ps(t,h,l),i!==null&&(En(i,t,l),ll(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Nn(),l=Us(a);l.tag=2,i!=null&&(l.callback=i),i=Ps(t,l,a),i!==null&&(En(i,t,a),ll(i,t,a))}};function cy(t,i,a,l,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!el(a,l)||!el(h,d):!0}function hy(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Gf.enqueueReplaceState(i,i.state,null)}function Kr(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=w({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function fy(t){Pu(t)}function dy(t){console.error(t)}function my(t){Pu(t)}function lc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function gy(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Qf(t,i,a){return a=Us(a),a.tag=3,a.payload={element:null},a.callback=function(){lc(t,i)},a}function py(t){return t=Us(t),t.tag=3,t}function yy(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){gy(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){gy(i,a,l),typeof h!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function ET(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&ka(i,a,h,!0),a=xn.current,a!==null){switch(a.tag){case 31:case 13:return qn===null?Ec():a.alternate===null&&_t===0&&(_t=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===$u?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),yd(t,l,h)),!1;case 22:return a.flags|=65536,l===$u?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),yd(t,l,h)),!1}throw Error(r(435,a.tag))}return yd(t,l,h),Ec(),!1}if(qe)return i=xn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==hf&&(t=Error(r(422),{cause:l}),il(Ln(t,a)))):(l!==hf&&(i=Error(r(423),{cause:l}),il(Ln(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Ln(l,a),h=Qf(t.stateNode,l,h),Tf(t,h),_t!==4&&(_t=2)),!1;var d=Error(r(520),{cause:l});if(d=Ln(d,a),Tl===null?Tl=[d]:Tl.push(d),_t!==4&&(_t=2),i===null)return!0;l=Ln(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Qf(a.stateNode,l,t),Tf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Gs===null||!Gs.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=py(h),yy(h,t,a,l),Tf(a,h),!1}a=a.return}while(a!==null);return!1}var Yf=Error(r(461)),Vt=!1;function Xt(t,i,a,l){i.child=t===null?bp(i,null,a,l):Qr(i,t.child,a,l)}function vy(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var T in l)T!=="ref"&&(v[T]=l[T])}else v=l;return Br(i),l=Cf(t,i,a,v,d,h),T=If(),t!==null&&!Vt?(Nf(t,i,h),ts(t,i,h)):(qe&&T&&uf(i),i.flags|=1,Xt(t,i,l,h),i.child)}function _y(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!af(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Ey(t,i,d,l,h)):(t=Hu(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!td(t,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:el,a(v,l)&&t.ref===i.ref)return ts(t,i,h)}return i.flags|=1,t=$i(d,l),t.ref=i.ref,t.return=i,i.child=t}function Ey(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(el(d,l)&&t.ref===i.ref)if(Vt=!1,i.pendingProps=l=d,td(t,h))(t.flags&131072)!==0&&(Vt=!0);else return i.lanes=t.lanes,ts(t,i,h)}return Kf(t,i,a,l,h)}function by(t,i,a,l){var h=l.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=i.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~d}else l=0,i.child=null;return Ty(t,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Yu(i,d!==null?d.cachePool:null),d!==null?Sp(i,d):Sf(),Ap(i);else return l=i.lanes=536870912,Ty(t,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Yu(i,d.cachePool),Sp(i,d),qs(),i.memoizedState=null):(t!==null&&Yu(i,null),Sf(),qs());return Xt(t,i,h,a),i.child}function gl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Ty(t,i,a,l,h){var d=vf();return d=d===null?null:{parent:Ot._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&Yu(i,null),Sf(),Ap(i),t!==null&&ka(t,i,l,!0),i.childLanes=h,null}function uc(t,i){return i=hc({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function wy(t,i,a){return Qr(i,t.child,null,a),t=uc(i,i.pendingProps),t.flags|=2,Rn(i),i.memoizedState=null,t}function bT(t,i,a){var l=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(qe){if(l.mode==="hidden")return t=uc(i,l),i.lanes=536870912,gl(null,t);if(xf(i),(t=lt)?(t=j0(t,zn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ms!==null?{id:Ii,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},a=ap(t),a.return=i,i.child=a,Kt=i,lt=null)):t=null,t===null)throw js(i);return i.lanes=536870912,null}return uc(i,l)}var d=t.memoizedState;if(d!==null){var v=d.dehydrated;if(xf(i),h)if(i.flags&256)i.flags&=-257,i=wy(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(r(558));else if(Vt||ka(t,i,a,!1),h=(a&t.childLanes)!==0,Vt||h){if(l=st,l!==null&&(v=ko(l,a),v!==0&&v!==d.retryLane))throw d.retryLane=v,Ur(t,v),En(l,t,v),Yf;Ec(),i=wy(t,i,a)}else t=d.treeContext,lt=Bn(v.nextSibling),Kt=i,qe=!0,Vs=null,zn=!1,t!==null&&up(i,t),i=uc(i,l),i.flags|=4096;return i}return t=$i(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function cc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Kf(t,i,a,l,h){return Br(i),a=Cf(t,i,a,l,void 0,h),l=If(),t!==null&&!Vt?(Nf(t,i,h),ts(t,i,h)):(qe&&l&&uf(i),i.flags|=1,Xt(t,i,a,h),i.child)}function Sy(t,i,a,l,h,d){return Br(i),i.updateQueue=null,a=Rp(i,l,a,h),xp(t),l=If(),t!==null&&!Vt?(Nf(t,i,d),ts(t,i,d)):(qe&&l&&uf(i),i.flags|=1,Xt(t,i,a,d),i.child)}function Ay(t,i,a,l,h){if(Br(i),i.stateNode===null){var d=Oa,v=a.contextType;typeof v=="object"&&v!==null&&(d=$t(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Gf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Ef(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?$t(v):Oa,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Ff(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Gf.enqueueReplaceState(d,d.state,null),cl(i,l,d,h),ul(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var T=i.memoizedProps,D=Kr(a,T);d.props=D;var B=d.context,$=a.contextType;v=Oa,typeof $=="object"&&$!==null&&(v=$t($));var Z=a.getDerivedStateFromProps;$=typeof Z=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,$||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||B!==v)&&hy(i,d,l,v),Ls=!1;var F=i.memoizedState;d.state=F,cl(i,l,d,h),ul(),B=i.memoizedState,T||F!==B||Ls?(typeof Z=="function"&&(Ff(i,a,Z,l),B=i.memoizedState),(D=Ls||cy(i,a,D,l,F,B,v))?($||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=B),d.props=l,d.state=B,d.context=v,l=D):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,bf(t,i),v=i.memoizedProps,$=Kr(a,v),d.props=$,Z=i.pendingProps,F=d.context,B=a.contextType,D=Oa,typeof B=="object"&&B!==null&&(D=$t(B)),T=a.getDerivedStateFromProps,(B=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==Z||F!==D)&&hy(i,d,l,D),Ls=!1,F=i.memoizedState,d.state=F,cl(i,l,d,h),ul();var Y=i.memoizedState;v!==Z||F!==Y||Ls||t!==null&&t.dependencies!==null&&Gu(t.dependencies)?(typeof T=="function"&&(Ff(i,a,T,l),Y=i.memoizedState),($=Ls||cy(i,a,$,l,F,Y,D)||t!==null&&t.dependencies!==null&&Gu(t.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,Y,D),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,Y,D)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=Y),d.props=l,d.state=Y,d.context=D,l=$):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,cc(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=Qr(i,t.child,null,h),i.child=Qr(i,null,a,h)):Xt(t,i,a,h),i.memoizedState=d.state,t=i.child):t=ts(t,i,h),t}function xy(t,i,a,l){return zr(),i.flags|=256,Xt(t,i,a,l),i.child}var $f={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xf(t){return{baseLanes:t,cachePool:gp()}}function Jf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=In),t}function Ry(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(wt.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(qe){if(h?zs(i):qs(),(t=lt)?(t=j0(t,zn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ms!==null?{id:Ii,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},a=ap(t),a.return=i,i.child=a,Kt=i,lt=null)):t=null,t===null)throw js(i);return Md(t)?i.lanes=32:i.lanes=536870912,null}var T=l.children;return l=l.fallback,h?(qs(),h=i.mode,T=hc({mode:"hidden",children:T},h),l=Pr(l,h,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,l=i.child,l.memoizedState=Xf(a),l.childLanes=Jf(t,v,a),i.memoizedState=$f,gl(null,l)):(zs(i),Zf(i,T))}var D=t.memoizedState;if(D!==null&&(T=D.dehydrated,T!==null)){if(d)i.flags&256?(zs(i),i.flags&=-257,i=Wf(t,i,a)):i.memoizedState!==null?(qs(),i.child=t.child,i.flags|=128,i=null):(qs(),T=l.fallback,h=i.mode,l=hc({mode:"visible",children:l.children},h),T=Pr(T,h,a,null),T.flags|=2,l.return=i,T.return=i,l.sibling=T,i.child=l,Qr(i,t.child,null,a),l=i.child,l.memoizedState=Xf(a),l.childLanes=Jf(t,v,a),i.memoizedState=$f,i=gl(null,l));else if(zs(i),Md(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var B=v.dgst;v=B,l=Error(r(419)),l.stack="",l.digest=v,il({value:l,source:null,stack:null}),i=Wf(t,i,a)}else if(Vt||ka(t,i,a,!1),v=(a&t.childLanes)!==0,Vt||v){if(v=st,v!==null&&(l=ko(v,a),l!==0&&l!==D.retryLane))throw D.retryLane=l,Ur(t,l),En(v,t,l),Yf;Od(T)||Ec(),i=Wf(t,i,a)}else Od(T)?(i.flags|=192,i.child=t.child,i=null):(t=D.treeContext,lt=Bn(T.nextSibling),Kt=i,qe=!0,Vs=null,zn=!1,t!==null&&up(i,t),i=Zf(i,l.children),i.flags|=4096);return i}return h?(qs(),T=l.fallback,h=i.mode,D=t.child,B=D.sibling,l=$i(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,B!==null?T=$i(B,T):(T=Pr(T,h,a,null),T.flags|=2),T.return=i,l.return=i,l.sibling=T,i.child=l,gl(null,l),l=i.child,T=t.child.memoizedState,T===null?T=Xf(a):(h=T.cachePool,h!==null?(D=Ot._currentValue,h=h.parent!==D?{parent:D,pool:D}:h):h=gp(),T={baseLanes:T.baseLanes|a,cachePool:h}),l.memoizedState=T,l.childLanes=Jf(t,v,a),i.memoizedState=$f,gl(t.child,l)):(zs(i),a=t.child,t=a.sibling,a=$i(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function Zf(t,i){return i=hc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function hc(t,i){return t=An(22,t,null,i),t.lanes=0,t}function Wf(t,i,a){return Qr(i,t.child,null,a),t=Zf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Cy(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),mf(t.return,i,a)}function ed(t,i,a,l,h,d){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:d}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=h,v.treeForkCount=d)}function Iy(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;l=l.children;var v=wt.current,T=(v&2)!==0;if(T?(v=v&1|2,i.flags|=128):v&=1,te(wt,v),Xt(t,i,l,a),l=qe?nl:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Cy(t,a,i);else if(t.tag===19)Cy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Wu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),ed(i,!1,h,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Wu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}ed(i,!0,a,null,d,l);break;case"together":ed(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function ts(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Fs|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(ka(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=$i(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=$i(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function td(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Gu(t)))}function TT(t,i,a){switch(i.tag){case 3:Et(i,i.stateNode.containerInfo),ks(i,Ot,t.memoizedState.cache),zr();break;case 27:case 5:qi(i);break;case 4:Et(i,i.stateNode.containerInfo);break;case 10:ks(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,xf(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(zs(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Ry(t,i,a):(zs(i),t=ts(t,i,a),t!==null?t.sibling:null);zs(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(ka(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return Iy(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),te(wt,wt.current),l)break;return null;case 22:return i.lanes=0,by(t,i,a,i.pendingProps);case 24:ks(i,Ot,t.memoizedState.cache)}return ts(t,i,a)}function Ny(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Vt=!0;else{if(!td(t,a)&&(i.flags&128)===0)return Vt=!1,TT(t,i,a);Vt=(t.flags&131072)!==0}else Vt=!1,qe&&(i.flags&1048576)!==0&&lp(i,nl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=Fr(i.elementType),i.type=t,typeof t=="function")af(t)?(l=Kr(t,l),i.tag=1,i=Ay(null,i,t,l,a)):(i.tag=0,i=Kf(null,i,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===ie){i.tag=11,i=vy(null,i,t,l,a);break e}else if(h===R){i.tag=14,i=_y(null,i,t,l,a);break e}}throw i=Fe(t)||t,Error(r(306,i,""))}}return i;case 0:return Kf(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Kr(l,i.pendingProps),Ay(t,i,l,h,a);case 3:e:{if(Et(i,i.stateNode.containerInfo),t===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,bf(t,i),cl(i,l,null,a);var v=i.memoizedState;if(l=v.cache,ks(i,Ot,l),l!==d.cache&&gf(i,[Ot],a,!0),ul(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=xy(t,i,l,a);break e}else if(l!==h){h=Ln(Error(r(424)),i),il(h),i=xy(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(lt=Bn(t.firstChild),Kt=i,qe=!0,Vs=null,zn=!0,a=bp(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(zr(),l===h){i=ts(t,i,a);break e}Xt(t,i,l,a)}i=i.child}return i;case 26:return cc(t,i),t===null?(a=q0(i.type,null,i.pendingProps,null))?i.memoizedState=a:qe||(a=i.type,t=i.pendingProps,l=Rc(Re.current).createElement(a),l[It]=i,l[Bt]=t,Jt(l,a,t),Nt(l),i.stateNode=l):i.memoizedState=q0(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return qi(i),t===null&&qe&&(l=i.stateNode=U0(i.type,i.pendingProps,Re.current),Kt=i,zn=!0,h=lt,$s(i.type)?(Vd=h,lt=Bn(l.firstChild)):lt=h),Xt(t,i,i.pendingProps.children,a),cc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&qe&&((h=l=lt)&&(l=ZT(l,i.type,i.pendingProps,zn),l!==null?(i.stateNode=l,Kt=i,lt=Bn(l.firstChild),zn=!1,h=!0):h=!1),h||js(i)),qi(i),h=i.type,d=i.pendingProps,v=t!==null?t.memoizedProps:null,l=d.children,Id(h,d)?l=null:v!==null&&Id(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=Cf(t,i,dT,null,null,a),Nl._currentValue=h),cc(t,i),Xt(t,i,l,a),i.child;case 6:return t===null&&qe&&((t=a=lt)&&(a=WT(a,i.pendingProps,zn),a!==null?(i.stateNode=a,Kt=i,lt=null,t=!0):t=!1),t||js(i)),null;case 13:return Ry(t,i,a);case 4:return Et(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Qr(i,null,l,a):Xt(t,i,l,a),i.child;case 11:return vy(t,i,i.type,i.pendingProps,a);case 7:return Xt(t,i,i.pendingProps,a),i.child;case 8:return Xt(t,i,i.pendingProps.children,a),i.child;case 12:return Xt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,ks(i,i.type,l.value),Xt(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Br(i),h=$t(h),l=l(h),i.flags|=1,Xt(t,i,l,a),i.child;case 14:return _y(t,i,i.type,i.pendingProps,a);case 15:return Ey(t,i,i.type,i.pendingProps,a);case 19:return Iy(t,i,a);case 31:return bT(t,i,a);case 22:return by(t,i,a,i.pendingProps);case 24:return Br(i),l=$t(Ot),t===null?(h=vf(),h===null&&(h=st,d=pf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},Ef(i),ks(i,Ot,h)):((t.lanes&a)!==0&&(bf(t,i),cl(i,null,null,a),ul()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),ks(i,Ot,l)):(l=d.cache,ks(i,Ot,l),l!==h.cache&&gf(i,[Ot],a,!0))),Xt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ns(t){t.flags|=4}function nd(t,i,a,l,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(i0())t.flags|=8192;else throw Gr=$u,_f}else t.flags&=-16777217}function Dy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Q0(i))if(i0())t.flags|=8192;else throw Gr=$u,_f}function fc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?vu():536870912,t.lanes|=i,Ka|=i)}function pl(t,i){if(!qe)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ut(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function wT(t,i,a){var l=i.pendingProps;switch(cf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(i),null;case 1:return ut(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Zi(Ot),rt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(ja(i)?ns(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ff())),ut(i),null;case 26:var h=i.type,d=i.memoizedState;return t===null?(ns(i),d!==null?(ut(i),Dy(i,d)):(ut(i),nd(i,h,null,l,a))):d?d!==t.memoizedState?(ns(i),ut(i),Dy(i,d)):(ut(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&ns(i),ut(i),nd(i,h,t,l,a)),null;case 27:if(bs(i),a=Re.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ns(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ut(i),null}t=ae.current,ja(i)?cp(i):(t=U0(h,l,a),i.stateNode=t,ns(i))}return ut(i),null;case 5:if(bs(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ns(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ut(i),null}if(d=ae.current,ja(i))cp(i);else{var v=Rc(Re.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?v.createElement(h,{is:l.is}):v.createElement(h)}}d[It]=i,d[Bt]=l;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=d;e:switch(Jt(d,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ns(i)}}return ut(i),nd(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&ns(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(t=Re.current,ja(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=Kt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[It]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||R0(t.nodeValue,a)),t||js(i,!0)}else t=Rc(t).createTextNode(l),t[It]=i,i.stateNode=t}return ut(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=ja(i),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[It]=i}else zr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ut(i),t=!1}else a=ff(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(Rn(i),i):(Rn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return ut(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=ja(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[It]=i}else zr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ut(i),h=!1}else h=ff(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Rn(i),i):(Rn(i),null)}return Rn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),fc(i,i.updateQueue),ut(i),null);case 4:return rt(),t===null&&Sd(i.stateNode.containerInfo),ut(i),null;case 10:return Zi(i.type),ut(i),null;case 19:if(Q(wt),l=i.memoizedState,l===null)return ut(i),null;if(h=(i.flags&128)!==0,d=l.rendering,d===null)if(h)pl(l,!1);else{if(_t!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=Wu(t),d!==null){for(i.flags|=128,pl(l,!1),t=d.updateQueue,i.updateQueue=t,fc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)rp(a,t),a=a.sibling;return te(wt,wt.current&1|2),qe&&Xi(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&Qt()>yc&&(i.flags|=128,h=!0,pl(l,!1),i.lanes=4194304)}else{if(!h)if(t=Wu(d),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,fc(i,t),pl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!qe)return ut(i),null}else 2*Qt()-l.renderingStartTime>yc&&a!==536870912&&(i.flags|=128,h=!0,pl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(t=l.last,t!==null?t.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Qt(),t.sibling=null,a=wt.current,te(wt,h?a&1|2:a&1),qe&&Xi(i,l.treeForkCount),t):(ut(i),null);case 22:case 23:return Rn(i),Af(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ut(i),i.subtreeFlags&6&&(i.flags|=8192)):ut(i),a=i.updateQueue,a!==null&&fc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&Q(Hr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Zi(Ot),ut(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function ST(t,i){switch(cf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Zi(Ot),rt(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return bs(i),null;case 31:if(i.memoizedState!==null){if(Rn(i),i.alternate===null)throw Error(r(340));zr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(Rn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));zr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Q(wt),null;case 4:return rt(),null;case 10:return Zi(i.type),null;case 22:case 23:return Rn(i),Af(),t!==null&&Q(Hr),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Zi(Ot),null;case 25:return null;default:return null}}function Oy(t,i){switch(cf(i),i.tag){case 3:Zi(Ot),rt();break;case 26:case 27:case 5:bs(i);break;case 4:rt();break;case 31:i.memoizedState!==null&&Rn(i);break;case 13:Rn(i);break;case 19:Q(wt);break;case 10:Zi(i.type);break;case 22:case 23:Rn(i),Af(),t!==null&&Q(Hr);break;case 24:Zi(Ot)}}function yl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==h)}}catch(T){Ze(i,i.return,T)}}function Bs(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var v=l.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,h=i;var D=a,B=T;try{B()}catch($){Ze(h,D,$)}}}l=l.next}while(l!==d)}}catch($){Ze(i,i.return,$)}}function My(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{wp(i,a)}catch(l){Ze(t,t.return,l)}}}function Vy(t,i,a){a.props=Kr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Ze(t,i,l)}}function vl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){Ze(t,i,h)}}function Di(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Ze(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Ze(t,i,h)}else a.current=null}function jy(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Ze(t,t.return,h)}}function id(t,i,a){try{var l=t.stateNode;QT(l,t.type,a,i),l[Bt]=i}catch(h){Ze(t,t.return,h)}}function ky(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&$s(t.type)||t.tag===4}function sd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ky(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&$s(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rd(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Xn));else if(l!==4&&(l===27&&$s(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(rd(t,i,a),t=t.sibling;t!==null;)rd(t,i,a),t=t.sibling}function dc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&$s(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(dc(t,i,a),t=t.sibling;t!==null;)dc(t,i,a),t=t.sibling}function Ly(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Jt(i,l,a),i[It]=t,i[Bt]=a}catch(d){Ze(t,t.return,d)}}var is=!1,jt=!1,ad=!1,Uy=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function AT(t,i){if(t=t.containerInfo,Rd=Vc,t=Xg(t),Zh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,T=-1,D=-1,B=0,$=0,Z=t,F=null;t:for(;;){for(var Y;Z!==a||h!==0&&Z.nodeType!==3||(T=v+h),Z!==d||l!==0&&Z.nodeType!==3||(D=v+l),Z.nodeType===3&&(v+=Z.nodeValue.length),(Y=Z.firstChild)!==null;)F=Z,Z=Y;for(;;){if(Z===t)break t;if(F===a&&++B===h&&(T=v),F===d&&++$===l&&(D=v),(Y=Z.nextSibling)!==null)break;Z=F,F=Z.parentNode}Z=Y}a=T===-1||D===-1?null:{start:T,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Cd={focusedElem:t,selectionRange:a},Vc=!1,Ft=i;Ft!==null;)if(i=Ft,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Ft=t;else for(;Ft!==null;){switch(i=Ft,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var he=Kr(a.type,h);t=l.getSnapshotBeforeUpdate(he,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(be){Ze(a,a.return,be)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Dd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Dd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,Ft=t;break}Ft=i.return}}function Py(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:rs(t,a),l&4&&yl(5,a);break;case 1:if(rs(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){Ze(a,a.return,v)}else{var h=Kr(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){Ze(a,a.return,v)}}l&64&&My(a),l&512&&vl(a,a.return);break;case 3:if(rs(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{wp(t,i)}catch(v){Ze(a,a.return,v)}}break;case 27:i===null&&l&4&&Ly(a);case 26:case 5:rs(t,a),i===null&&l&4&&jy(a),l&512&&vl(a,a.return);break;case 12:rs(t,a);break;case 31:rs(t,a),l&4&&By(t,a);break;case 13:rs(t,a),l&4&&Hy(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=VT.bind(null,a),ew(t,a))));break;case 22:if(l=a.memoizedState!==null||is,!l){i=i!==null&&i.memoizedState!==null||jt,h=is;var d=jt;is=l,(jt=i)&&!d?as(t,a,(a.subtreeFlags&8772)!==0):rs(t,a),is=h,jt=d}break;case 30:break;default:rs(t,a)}}function zy(t){var i=t.alternate;i!==null&&(t.alternate=null,zy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&va(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var mt=null,pn=!1;function ss(t,i,a){for(a=a.child;a!==null;)qy(t,i,a),a=a.sibling}function qy(t,i,a){if(ze&&typeof ze.onCommitFiberUnmount=="function")try{ze.onCommitFiberUnmount(pe,a)}catch{}switch(a.tag){case 26:jt||Di(a,i),ss(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:jt||Di(a,i);var l=mt,h=pn;$s(a.type)&&(mt=a.stateNode,pn=!1),ss(t,i,a),Rl(a.stateNode),mt=l,pn=h;break;case 5:jt||Di(a,i);case 6:if(l=mt,h=pn,mt=null,ss(t,i,a),mt=l,pn=h,mt!==null)if(pn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(a.stateNode)}catch(d){Ze(a,i,d)}else try{mt.removeChild(a.stateNode)}catch(d){Ze(a,i,d)}break;case 18:mt!==null&&(pn?(t=mt,M0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),no(t)):M0(mt,a.stateNode));break;case 4:l=mt,h=pn,mt=a.stateNode.containerInfo,pn=!0,ss(t,i,a),mt=l,pn=h;break;case 0:case 11:case 14:case 15:Bs(2,a,i),jt||Bs(4,a,i),ss(t,i,a);break;case 1:jt||(Di(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Vy(a,i,l)),ss(t,i,a);break;case 21:ss(t,i,a);break;case 22:jt=(l=jt)||a.memoizedState!==null,ss(t,i,a),jt=l;break;default:ss(t,i,a)}}function By(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{no(t)}catch(a){Ze(i,i.return,a)}}}function Hy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{no(t)}catch(a){Ze(i,i.return,a)}}function xT(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Uy),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Uy),i;default:throw Error(r(435,t.tag))}}function mc(t,i){var a=xT(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var h=jT.bind(null,t,l);l.then(h,h)}})}function yn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,v=i,T=v;e:for(;T!==null;){switch(T.tag){case 27:if($s(T.type)){mt=T.stateNode,pn=!1;break e}break;case 5:mt=T.stateNode,pn=!1;break e;case 3:case 4:mt=T.stateNode.containerInfo,pn=!0;break e}T=T.return}if(mt===null)throw Error(r(160));qy(d,v,h),mt=null,pn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Fy(i,t),i=i.sibling}var ni=null;function Fy(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:yn(i,t),vn(t),l&4&&(Bs(3,t,t.return),yl(3,t),Bs(5,t,t.return));break;case 1:yn(i,t),vn(t),l&512&&(jt||a===null||Di(a,a.return)),l&64&&is&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=ni;if(yn(i,t),vn(t),l&512&&(jt||a===null||Di(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[yi]||d[It]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),Jt(d,l,a),d[It]=t,Nt(d),l=d;break e;case"link":var v=F0("link","href",h).get(l+(a.href||""));if(v){for(var T=0;T<v.length;T++)if(d=v[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(T,1);break t}}d=h.createElement(l),Jt(d,l,a),h.head.appendChild(d);break;case"meta":if(v=F0("meta","content",h).get(l+(a.content||""))){for(T=0;T<v.length;T++)if(d=v[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(T,1);break t}}d=h.createElement(l),Jt(d,l,a),h.head.appendChild(d);break;default:throw Error(r(468,l))}d[It]=t,Nt(d),l=d}t.stateNode=l}else G0(h,t.type,t.stateNode);else t.stateNode=H0(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?G0(h,t.type,t.stateNode):H0(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&id(t,t.memoizedProps,a.memoizedProps)}break;case 27:yn(i,t),vn(t),l&512&&(jt||a===null||Di(a,a.return)),a!==null&&l&4&&id(t,t.memoizedProps,a.memoizedProps);break;case 5:if(yn(i,t),vn(t),l&512&&(jt||a===null||Di(a,a.return)),t.flags&32){h=t.stateNode;try{gn(h,"")}catch(he){Ze(t,t.return,he)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,id(t,h,a!==null?a.memoizedProps:h)),l&1024&&(ad=!0);break;case 6:if(yn(i,t),vn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(he){Ze(t,t.return,he)}}break;case 3:if(Nc=null,h=ni,ni=Cc(i.containerInfo),yn(i,t),ni=h,vn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{no(i.containerInfo)}catch(he){Ze(t,t.return,he)}ad&&(ad=!1,Gy(t));break;case 4:l=ni,ni=Cc(t.stateNode.containerInfo),yn(i,t),vn(t),ni=l;break;case 12:yn(i,t),vn(t);break;case 31:yn(i,t),vn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,mc(t,l)));break;case 13:yn(i,t),vn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(pc=Qt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,mc(t,l)));break;case 22:h=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,B=is,$=jt;if(is=B||h,jt=$||D,yn(i,t),jt=$,is=B,vn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||D||is||jt||$r(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){D=a=i;try{if(d=D.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=D.stateNode;var Z=D.memoizedProps.style,F=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;T.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(he){Ze(D,D.return,he)}}}else if(i.tag===6){if(a===null){D=i;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(he){Ze(D,D.return,he)}}}else if(i.tag===18){if(a===null){D=i;try{var Y=D.stateNode;h?V0(Y,!0):V0(D.stateNode,!1)}catch(he){Ze(D,D.return,he)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,mc(t,a))));break;case 19:yn(i,t),vn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,mc(t,l)));break;case 30:break;case 21:break;default:yn(i,t),vn(t)}}function vn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(ky(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=sd(t);dc(t,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(gn(v,""),a.flags&=-33);var T=sd(t);dc(t,T,v);break;case 3:case 4:var D=a.stateNode.containerInfo,B=sd(t);rd(t,B,D);break;default:throw Error(r(161))}}catch($){Ze(t,t.return,$)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Gy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Gy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function rs(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Py(t,i.alternate,i),i=i.sibling}function $r(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Bs(4,i,i.return),$r(i);break;case 1:Di(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Vy(i,i.return,a),$r(i);break;case 27:Rl(i.stateNode);case 26:case 5:Di(i,i.return),$r(i);break;case 22:i.memoizedState===null&&$r(i);break;case 30:$r(i);break;default:$r(i)}t=t.sibling}}function as(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:as(h,d,a),yl(4,d);break;case 1:if(as(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){Ze(l,l.return,B)}if(l=d,h=l.updateQueue,h!==null){var T=l.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)Tp(D[h],T)}catch(B){Ze(l,l.return,B)}}a&&v&64&&My(d),vl(d,d.return);break;case 27:Ly(d);case 26:case 5:as(h,d,a),a&&l===null&&v&4&&jy(d),vl(d,d.return);break;case 12:as(h,d,a);break;case 31:as(h,d,a),a&&v&4&&By(h,d);break;case 13:as(h,d,a),a&&v&4&&Hy(h,d);break;case 22:d.memoizedState===null&&as(h,d,a),vl(d,d.return);break;case 30:break;default:as(h,d,a)}i=i.sibling}}function od(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&sl(a))}function ld(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&sl(t))}function ii(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Qy(t,i,a,l),i=i.sibling}function Qy(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:ii(t,i,a,l),h&2048&&yl(9,i);break;case 1:ii(t,i,a,l);break;case 3:ii(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&sl(t)));break;case 12:if(h&2048){ii(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,v=d.id,T=d.onPostCommit;typeof T=="function"&&T(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){Ze(i,i.return,D)}}else ii(t,i,a,l);break;case 31:ii(t,i,a,l);break;case 13:ii(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?ii(t,i,a,l):_l(t,i):d._visibility&2?ii(t,i,a,l):(d._visibility|=2,Ga(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),h&2048&&od(v,i);break;case 24:ii(t,i,a,l),h&2048&&ld(i.alternate,i);break;default:ii(t,i,a,l)}}function Ga(t,i,a,l,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,v=i,T=a,D=l,B=v.flags;switch(v.tag){case 0:case 11:case 15:Ga(d,v,T,D,h),yl(8,v);break;case 23:break;case 22:var $=v.stateNode;v.memoizedState!==null?$._visibility&2?Ga(d,v,T,D,h):_l(d,v):($._visibility|=2,Ga(d,v,T,D,h)),h&&B&2048&&od(v.alternate,v);break;case 24:Ga(d,v,T,D,h),h&&B&2048&&ld(v.alternate,v);break;default:Ga(d,v,T,D,h)}i=i.sibling}}function _l(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:_l(a,l),h&2048&&od(l.alternate,l);break;case 24:_l(a,l),h&2048&&ld(l.alternate,l);break;default:_l(a,l)}i=i.sibling}}var El=8192;function Qa(t,i,a){if(t.subtreeFlags&El)for(t=t.child;t!==null;)Yy(t,i,a),t=t.sibling}function Yy(t,i,a){switch(t.tag){case 26:Qa(t,i,a),t.flags&El&&t.memoizedState!==null&&fw(a,ni,t.memoizedState,t.memoizedProps);break;case 5:Qa(t,i,a);break;case 3:case 4:var l=ni;ni=Cc(t.stateNode.containerInfo),Qa(t,i,a),ni=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=El,El=16777216,Qa(t,i,a),El=l):Qa(t,i,a));break;default:Qa(t,i,a)}}function Ky(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function bl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ft=l,Xy(l,t)}Ky(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)$y(t),t=t.sibling}function $y(t){switch(t.tag){case 0:case 11:case 15:bl(t),t.flags&2048&&Bs(9,t,t.return);break;case 3:bl(t);break;case 12:bl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,gc(t)):bl(t);break;default:bl(t)}}function gc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ft=l,Xy(l,t)}Ky(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Bs(8,i,i.return),gc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,gc(i));break;default:gc(i)}t=t.sibling}}function Xy(t,i){for(;Ft!==null;){var a=Ft;switch(a.tag){case 0:case 11:case 15:Bs(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:sl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ft=l;else e:for(a=t;Ft!==null;){l=Ft;var h=l.sibling,d=l.return;if(zy(l),l===a){Ft=null;break e}if(h!==null){h.return=d,Ft=h;break e}Ft=d}}}var RT={getCacheForType:function(t){var i=$t(Ot),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return $t(Ot).controller.signal}},CT=typeof WeakMap=="function"?WeakMap:Map,Ke=0,st=null,Me=null,je=0,Je=0,Cn=null,Hs=!1,Ya=!1,ud=!1,os=0,_t=0,Fs=0,Xr=0,cd=0,In=0,Ka=0,Tl=null,_n=null,hd=!1,pc=0,Jy=0,yc=1/0,vc=null,Gs=null,zt=0,Qs=null,$a=null,ls=0,fd=0,dd=null,Zy=null,wl=0,md=null;function Nn(){return(Ke&2)!==0&&je!==0?je&-je:H.T!==null?Ed():_u()}function Wy(){if(In===0)if((je&536870912)===0||qe){var t=dn;dn<<=1,(dn&3932160)===0&&(dn=262144),In=t}else In=536870912;return t=xn.current,t!==null&&(t.flags|=32),In}function En(t,i,a){(t===st&&(Je===2||Je===9)||t.cancelPendingCommit!==null)&&(Xa(t,0),Ys(t,je,In,!1)),Sr(t,a),((Ke&2)===0||t!==st)&&(t===st&&((Ke&2)===0&&(Xr|=a),_t===4&&Ys(t,je,In,!1)),Oi(t))}function e0(t,i,a){if((Ke&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||Yn(t,i),h=l?DT(t,i):pd(t,i,!0),d=l;do{if(h===0){Ya&&!l&&Ys(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!IT(a)){h=pd(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var T=t;h=Tl;var D=T.current.memoizedState.isDehydrated;if(D&&(Xa(T,v).flags|=256),v=pd(T,v,!1),v!==2){if(ud&&!D){T.errorRecoveryDisabledLanes|=d,Xr|=d,h=4;break e}d=_n,_n=h,d!==null&&(_n===null?_n=d:_n.push.apply(_n,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Xa(t,0),Ys(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Ys(l,i,In,!Hs);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=pc+300-Qt(),10<h)){if(Ys(l,i,In,!Hs),mi(l,0,!0)!==0)break e;ls=i,l.timeoutHandle=D0(t0.bind(null,l,a,_n,vc,hd,i,In,Xr,Ka,Hs,d,"Throttled",-0,0),h);break e}t0(l,a,_n,vc,hd,i,In,Xr,Ka,Hs,d,null,-0,0)}}break}while(!0);Oi(t)}function t0(t,i,a,l,h,d,v,T,D,B,$,Z,F,Y){if(t.timeoutHandle=-1,Z=i.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xn},Yy(i,d,Z);var he=(d&62914560)===d?pc-Qt():(d&4194048)===d?Jy-Qt():0;if(he=dw(Z,he),he!==null){ls=d,t.cancelPendingCommit=he(u0.bind(null,t,i,d,a,l,h,v,T,D,$,Z,null,F,Y)),Ys(t,d,v,!B);return}}u0(t,i,d,a,l,h,v,T,D)}function IT(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!Sn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ys(t,i,a,l){i&=~cd,i&=~Xr,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-it(h),v=1<<d;l[d]=-1,h&=~v}a!==0&&Ar(t,a,i)}function _c(){return(Ke&6)===0?(Sl(0),!1):!0}function gd(){if(Me!==null){if(Je===0)var t=Me.return;else t=Me,Ji=qr=null,Df(t),za=null,al=0,t=Me;for(;t!==null;)Oy(t.alternate,t),t=t.return;Me=null}}function Xa(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,$T(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),ls=0,gd(),st=t,Me=a=$i(t.current,null),je=i,Je=0,Cn=null,Hs=!1,Ya=Yn(t,i),ud=!1,Ka=In=cd=Xr=Fs=_t=0,_n=Tl=null,hd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-it(l),d=1<<h;i|=t[h],l&=~d}return os=i,zu(),a}function n0(t,i){Ne=null,H.H=ml,i===Pa||i===Ku?(i=vp(),Je=3):i===_f?(i=vp(),Je=4):Je=i===Yf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Cn=i,Me===null&&(_t=1,lc(t,Ln(i,t.current)))}function i0(){var t=xn.current;return t===null?!0:(je&4194048)===je?qn===null:(je&62914560)===je||(je&536870912)!==0?t===qn:!1}function s0(){var t=H.H;return H.H=ml,t===null?ml:t}function r0(){var t=H.A;return H.A=RT,t}function Ec(){_t=4,Hs||(je&4194048)!==je&&xn.current!==null||(Ya=!0),(Fs&134217727)===0&&(Xr&134217727)===0||st===null||Ys(st,je,In,!1)}function pd(t,i,a){var l=Ke;Ke|=2;var h=s0(),d=r0();(st!==t||je!==i)&&(vc=null,Xa(t,i)),i=!1;var v=_t;e:do try{if(Je!==0&&Me!==null){var T=Me,D=Cn;switch(Je){case 8:gd(),v=6;break e;case 3:case 2:case 9:case 6:xn.current===null&&(i=!0);var B=Je;if(Je=0,Cn=null,Ja(t,T,D,B),a&&Ya){v=0;break e}break;default:B=Je,Je=0,Cn=null,Ja(t,T,D,B)}}NT(),v=_t;break}catch($){n0(t,$)}while(!0);return i&&t.shellSuspendCounter++,Ji=qr=null,Ke=l,H.H=h,H.A=d,Me===null&&(st=null,je=0,zu()),v}function NT(){for(;Me!==null;)a0(Me)}function DT(t,i){var a=Ke;Ke|=2;var l=s0(),h=r0();st!==t||je!==i?(vc=null,yc=Qt()+500,Xa(t,i)):Ya=Yn(t,i);e:do try{if(Je!==0&&Me!==null){i=Me;var d=Cn;t:switch(Je){case 1:Je=0,Cn=null,Ja(t,i,d,1);break;case 2:case 9:if(pp(d)){Je=0,Cn=null,o0(i);break}i=function(){Je!==2&&Je!==9||st!==t||(Je=7),Oi(t)},d.then(i,i);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:pp(d)?(Je=0,Cn=null,o0(i)):(Je=0,Cn=null,Ja(t,i,d,7));break;case 5:var v=null;switch(Me.tag){case 26:v=Me.memoizedState;case 5:case 27:var T=Me;if(v?Q0(v):T.stateNode.complete){Je=0,Cn=null;var D=T.sibling;if(D!==null)Me=D;else{var B=T.return;B!==null?(Me=B,bc(B)):Me=null}break t}}Je=0,Cn=null,Ja(t,i,d,5);break;case 6:Je=0,Cn=null,Ja(t,i,d,6);break;case 8:gd(),_t=6;break e;default:throw Error(r(462))}}OT();break}catch($){n0(t,$)}while(!0);return Ji=qr=null,H.H=l,H.A=h,Ke=a,Me!==null?0:(st=null,je=0,zu(),_t)}function OT(){for(;Me!==null&&!Mo();)a0(Me)}function a0(t){var i=Ny(t.alternate,t,os);t.memoizedProps=t.pendingProps,i===null?bc(t):Me=i}function o0(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Sy(a,i,i.pendingProps,i.type,void 0,je);break;case 11:i=Sy(a,i,i.pendingProps,i.type.render,i.ref,je);break;case 5:Df(i);default:Oy(a,i),i=Me=rp(i,os),i=Ny(a,i,os)}t.memoizedProps=t.pendingProps,i===null?bc(t):Me=i}function Ja(t,i,a,l){Ji=qr=null,Df(i),za=null,al=0;var h=i.return;try{if(ET(t,h,i,a,je)){_t=1,lc(t,Ln(a,t.current)),Me=null;return}}catch(d){if(h!==null)throw Me=h,d;_t=1,lc(t,Ln(a,t.current)),Me=null;return}i.flags&32768?(qe||l===1?t=!0:Ya||(je&536870912)!==0?t=!1:(Hs=t=!0,(l===2||l===9||l===3||l===6)&&(l=xn.current,l!==null&&l.tag===13&&(l.flags|=16384))),l0(i,t)):bc(i)}function bc(t){var i=t;do{if((i.flags&32768)!==0){l0(i,Hs);return}t=i.return;var a=wT(i.alternate,i,os);if(a!==null){Me=a;return}if(i=i.sibling,i!==null){Me=i;return}Me=i=t}while(i!==null);_t===0&&(_t=5)}function l0(t,i){do{var a=ST(t.alternate,t);if(a!==null){a.flags&=32767,Me=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Me=t;return}Me=t=a}while(t!==null);_t=6,Me=null}function u0(t,i,a,l,h,d,v,T,D){t.cancelPendingCommit=null;do Tc();while(zt!==0);if((Ke&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=sf,Kh(t,a,d,v,T,D),t===st&&(Me=st=null,je=0),$a=i,Qs=t,ls=a,fd=d,dd=h,Zy=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,kT(fi,function(){return m0(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=H.T,H.T=null,h=ne.p,ne.p=2,v=Ke,Ke|=4;try{AT(t,i,a)}finally{Ke=v,ne.p=h,H.T=l}}zt=1,c0(),h0(),f0()}}function c0(){if(zt===1){zt=0;var t=Qs,i=$a,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var l=ne.p;ne.p=2;var h=Ke;Ke|=4;try{Fy(i,t);var d=Cd,v=Xg(t.containerInfo),T=d.focusedElem,D=d.selectionRange;if(v!==T&&T&&T.ownerDocument&&$g(T.ownerDocument.documentElement,T)){if(D!==null&&Zh(T)){var B=D.start,$=D.end;if($===void 0&&($=B),"selectionStart"in T)T.selectionStart=B,T.selectionEnd=Math.min($,T.value.length);else{var Z=T.ownerDocument||document,F=Z&&Z.defaultView||window;if(F.getSelection){var Y=F.getSelection(),he=T.textContent.length,be=Math.min(D.start,he),nt=D.end===void 0?be:Math.min(D.end,he);!Y.extend&&be>nt&&(v=nt,nt=be,be=v);var U=Kg(T,be),j=Kg(T,nt);if(U&&j&&(Y.rangeCount!==1||Y.anchorNode!==U.node||Y.anchorOffset!==U.offset||Y.focusNode!==j.node||Y.focusOffset!==j.offset)){var z=Z.createRange();z.setStart(U.node,U.offset),Y.removeAllRanges(),be>nt?(Y.addRange(z),Y.extend(j.node,j.offset)):(z.setEnd(j.node,j.offset),Y.addRange(z))}}}}for(Z=[],Y=T;Y=Y.parentNode;)Y.nodeType===1&&Z.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<Z.length;T++){var X=Z[T];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}Vc=!!Rd,Cd=Rd=null}finally{Ke=h,ne.p=l,H.T=a}}t.current=i,zt=2}}function h0(){if(zt===2){zt=0;var t=Qs,i=$a,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var l=ne.p;ne.p=2;var h=Ke;Ke|=4;try{Py(t,i.alternate,i)}finally{Ke=h,ne.p=l,H.T=a}}zt=3}}function f0(){if(zt===4||zt===3){zt=0,da();var t=Qs,i=$a,a=ls,l=Zy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?zt=5:(zt=0,$a=Qs=null,d0(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Gs=null),Gi(a),i=i.stateNode,ze&&typeof ze.onCommitFiberRoot=="function")try{ze.onCommitFiberRoot(pe,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=H.T,h=ne.p,ne.p=2,H.T=null;try{for(var d=t.onRecoverableError,v=0;v<l.length;v++){var T=l[v];d(T.value,{componentStack:T.stack})}}finally{H.T=i,ne.p=h}}(ls&3)!==0&&Tc(),Oi(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===md?wl++:(wl=0,md=t):wl=0,Sl(0)}}function d0(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,sl(i)))}function Tc(){return c0(),h0(),f0(),m0()}function m0(){if(zt!==5)return!1;var t=Qs,i=fd;fd=0;var a=Gi(ls),l=H.T,h=ne.p;try{ne.p=32>a?32:a,H.T=null,a=dd,dd=null;var d=Qs,v=ls;if(zt=0,$a=Qs=null,ls=0,(Ke&6)!==0)throw Error(r(331));var T=Ke;if(Ke|=4,$y(d.current),Qy(d,d.current,v,a),Ke=T,Sl(0,!1),ze&&typeof ze.onPostCommitFiberRoot=="function")try{ze.onPostCommitFiberRoot(pe,d)}catch{}return!0}finally{ne.p=h,H.T=l,d0(t,i)}}function g0(t,i,a){i=Ln(a,i),i=Qf(t.stateNode,i,2),t=Ps(t,i,2),t!==null&&(Sr(t,2),Oi(t))}function Ze(t,i,a){if(t.tag===3)g0(t,t,a);else for(;i!==null;){if(i.tag===3){g0(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Gs===null||!Gs.has(l))){t=Ln(a,t),a=py(2),l=Ps(i,a,2),l!==null&&(yy(a,l,i,t),Sr(l,2),Oi(l));break}}i=i.return}}function yd(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new CT;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(ud=!0,h.add(a),t=MT.bind(null,t,i,a),i.then(t,t))}function MT(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,st===t&&(je&a)===a&&(_t===4||_t===3&&(je&62914560)===je&&300>Qt()-pc?(Ke&2)===0&&Xa(t,0):cd|=a,Ka===je&&(Ka=0)),Oi(t)}function p0(t,i){i===0&&(i=vu()),t=Ur(t,i),t!==null&&(Sr(t,i),Oi(t))}function VT(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),p0(t,a)}function jT(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),p0(t,a)}function kT(t,i){return bt(t,i)}var wc=null,Za=null,vd=!1,Sc=!1,_d=!1,Ks=0;function Oi(t){t!==Za&&t.next===null&&(Za===null?wc=Za=t:Za=Za.next=t),Sc=!0,vd||(vd=!0,UT())}function Sl(t,i){if(!_d&&Sc){_d=!0;do for(var a=!1,l=wc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-it(42|t)+1)-1,d&=h&~(v&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,E0(l,d))}else d=je,d=mi(l,l===st?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Yn(l,d)||(a=!0,E0(l,d));l=l.next}while(a);_d=!1}}function LT(){y0()}function y0(){Sc=vd=!1;var t=0;Ks!==0&&KT()&&(t=Ks);for(var i=Qt(),a=null,l=wc;l!==null;){var h=l.next,d=v0(l,i);d===0?(l.next=null,a===null?wc=h:a.next=h,h===null&&(Za=a)):(a=l,(t!==0||(d&3)!==0)&&(Sc=!0)),l=h}zt!==0&&zt!==5||Sl(t),Ks!==0&&(Ks=0)}function v0(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-it(d),T=1<<v,D=h[v];D===-1?((T&a)===0||(T&l)!==0)&&(h[v]=Yh(T,i)):D<=i&&(t.expiredLanes|=T),d&=~T}if(i=st,a=je,a=mi(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Je===2||Je===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ci(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Yn(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&ci(l),Gi(a)){case 2:case 8:a=br;break;case 32:a=fi;break;case 268435456:a=ma;break;default:a=fi}return l=_0.bind(null,t),a=bt(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&ci(l),t.callbackPriority=2,t.callbackNode=null,2}function _0(t,i){if(zt!==0&&zt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Tc()&&t.callbackNode!==a)return null;var l=je;return l=mi(t,t===st?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(e0(t,l,i),v0(t,Qt()),t.callbackNode!=null&&t.callbackNode===a?_0.bind(null,t):null)}function E0(t,i){if(Tc())return null;e0(t,i,!0)}function UT(){XT(function(){(Ke&6)!==0?bt(Hi,LT):y0()})}function Ed(){if(Ks===0){var t=La;t===0&&(t=gt,gt<<=1,(gt&261888)===0&&(gt=256)),Ks=t}return Ks}function b0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ta(""+t)}function T0(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function PT(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=b0((h[Bt]||null).action),v=l.submitter;v&&(i=(i=v[Bt]||null)?b0(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var T=new Ai("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ks!==0){var D=v?T0(h,v):new FormData(h);zf(a,{pending:!0,data:D,method:h.method,action:d},null,D)}}else typeof d=="function"&&(T.preventDefault(),D=v?T0(h,v):new FormData(h),zf(a,{pending:!0,data:D,method:h.method,action:d},d,D))},currentTarget:h}]})}}for(var bd=0;bd<nf.length;bd++){var Td=nf[bd],zT=Td.toLowerCase(),qT=Td[0].toUpperCase()+Td.slice(1);ti(zT,"on"+qT)}ti(Wg,"onAnimationEnd"),ti(ep,"onAnimationIteration"),ti(tp,"onAnimationStart"),ti("dblclick","onDoubleClick"),ti("focusin","onFocus"),ti("focusout","onBlur"),ti(iT,"onTransitionRun"),ti(sT,"onTransitionStart"),ti(rT,"onTransitionCancel"),ti(np,"onTransitionEnd"),bi("onMouseEnter",["mouseout","mouseover"]),bi("onMouseLeave",["mouseout","mouseover"]),bi("onPointerEnter",["pointerout","pointerover"]),bi("onPointerLeave",["pointerout","pointerover"]),Ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ei("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Al));function w0(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var T=l[v],D=T.instance,B=T.currentTarget;if(T=T.listener,D!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=B;try{d(h)}catch($){Pu($)}h.currentTarget=null,d=D}else for(v=0;v<l.length;v++){if(T=l[v],D=T.instance,B=T.currentTarget,T=T.listener,D!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=B;try{d(h)}catch($){Pu($)}h.currentTarget=null,d=D}}}}function Ve(t,i){var a=i[ya];a===void 0&&(a=i[ya]=new Set);var l=t+"__bubble";a.has(l)||(S0(i,t,2,!1),a.add(l))}function wd(t,i,a){var l=0;i&&(l|=4),S0(a,t,l,i)}var Ac="_reactListening"+Math.random().toString(36).slice(2);function Sd(t){if(!t[Ac]){t[Ac]=!0,Lo.forEach(function(a){a!=="selectionchange"&&(BT.has(a)||wd(a,!1,t),wd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Ac]||(i[Ac]=!0,wd("selectionchange",!1,i))}}function S0(t,i,a,l){switch(W0(i)){case 2:var h=pw;break;case 8:h=yw;break;default:h=Pd}a=h.bind(null,i,a,t),h=void 0,!Nr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Ad(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var T=l.stateNode.containerInfo;if(T===h)break;if(v===4)for(v=l.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;T!==null;){if(v=vi(T),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){l=d=v;continue e}T=T.parentNode}}l=l.return}Is(function(){var B=d,$=Mn(a),Z=[];e:{var F=ip.get(t);if(F!==void 0){var Y=Ai,he=t;switch(t){case"keypress":if(Or(a)===0)break e;case"keydown":case"keyup":Y=ku;break;case"focusin":he="focus",Y=Vr;break;case"focusout":he="blur",Y=Vr;break;case"beforeblur":case"afterblur":Y=Vr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Xo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Ru;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=m;break;case Wg:case ep:case tp:Y=Iu;break;case np:Y=S;break;case"scroll":case"scrollend":Y=$o;break;case"wheel":Y=G;break;case"copy":case"cut":case"paste":Y=Nu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Ki;break;case"toggle":case"beforetoggle":Y=Ie}var be=(i&4)!==0,nt=!be&&(t==="scroll"||t==="scrollend"),U=be?F!==null?F+"Capture":null:F;be=[];for(var j=B,z;j!==null;){var X=j;if(z=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||z===null||U===null||(X=Jn(j,U),X!=null&&be.push(xl(j,X,z))),nt)break;j=j.return}0<be.length&&(F=new Y(F,he,null,a,$),Z.push({event:F,listeners:be}))}}if((i&7)===0){e:{if(F=t==="mouseover"||t==="pointerover",Y=t==="mouseout"||t==="pointerout",F&&a!==Qo&&(he=a.relatedTarget||a.fromElement)&&(vi(he)||he[pi]))break e;if((Y||F)&&(F=$.window===$?$:(F=$.ownerDocument)?F.defaultView||F.parentWindow:window,Y?(he=a.relatedTarget||a.toElement,Y=B,he=he?vi(he):null,he!==null&&(nt=u(he),be=he.tag,he!==nt||be!==5&&be!==27&&be!==6)&&(he=null)):(Y=null,he=B),Y!==he)){if(be=Xo,X="onMouseLeave",U="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&(be=Ki,X="onPointerLeave",U="onPointerEnter",j="pointer"),nt=Y==null?F:Tn(Y),z=he==null?F:Tn(he),F=new be(X,j+"leave",Y,a,$),F.target=nt,F.relatedTarget=z,X=null,vi($)===B&&(be=new be(U,j+"enter",he,a,$),be.target=z,be.relatedTarget=nt,X=be),nt=X,Y&&he)t:{for(be=HT,U=Y,j=he,z=0,X=U;X;X=be(X))z++;X=0;for(var _e=j;_e;_e=be(_e))X++;for(;0<z-X;)U=be(U),z--;for(;0<X-z;)j=be(j),X--;for(;z--;){if(U===j||j!==null&&U===j.alternate){be=U;break t}U=be(U),j=be(j)}be=null}else be=null;Y!==null&&A0(Z,F,Y,be,!1),he!==null&&nt!==null&&A0(Z,nt,he,be,!0)}}e:{if(F=B?Tn(B):window,Y=F.nodeName&&F.nodeName.toLowerCase(),Y==="select"||Y==="input"&&F.type==="file")var Ge=Bg;else if(zg(F))if(Hg)Ge=eT;else{Ge=Zb;var ge=Jb}else Y=F.nodeName,!Y||Y.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?B&&ba(B.elementType)&&(Ge=Bg):Ge=Wb;if(Ge&&(Ge=Ge(t,B))){qg(Z,Ge,a,$);break e}ge&&ge(t,F,B),t==="focusout"&&B&&F.type==="number"&&B.memoizedProps.value!=null&&Ho(F,"number",F.value)}switch(ge=B?Tn(B):window,t){case"focusin":(zg(ge)||ge.contentEditable==="true")&&(Ia=ge,Wh=B,tl=null);break;case"focusout":tl=Wh=Ia=null;break;case"mousedown":ef=!0;break;case"contextmenu":case"mouseup":case"dragend":ef=!1,Jg(Z,a,$);break;case"selectionchange":if(nT)break;case"keydown":case"keyup":Jg(Z,a,$)}var De;if(Ye)e:{switch(t){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Ca?jr(t,a)&&(ke="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(ke="onCompositionStart");ke&&(Ci&&a.locale!=="ko"&&(Ca||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Ca&&(De=Ko()):(Si=$,Yo="value"in Si?Si.value:Si.textContent,Ca=!0)),ge=xc(B,ke),0<ge.length&&(ke=new Ri(ke,t,null,a,$),Z.push({event:ke,listeners:ge}),De?ke.data=De:(De=Ra(a),De!==null&&(ke.data=De)))),(De=jn?Yb(t,a):Kb(t,a))&&(ke=xc(B,"onBeforeInput"),0<ke.length&&(ge=new Ri("onBeforeInput","beforeinput",null,a,$),Z.push({event:ge,listeners:ke}),ge.data=De)),PT(Z,t,B,a,$)}w0(Z,i)})}function xl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function xc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Jn(t,a),h!=null&&l.unshift(xl(t,h,d)),h=Jn(t,i),h!=null&&l.push(xl(t,h,d))),t.tag===3)return l;t=t.return}return[]}function HT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function A0(t,i,a,l,h){for(var d=i._reactName,v=[];a!==null&&a!==l;){var T=a,D=T.alternate,B=T.stateNode;if(T=T.tag,D!==null&&D===l)break;T!==5&&T!==26&&T!==27||B===null||(D=B,h?(B=Jn(a,d),B!=null&&v.unshift(xl(a,B,D))):h||(B=Jn(a,d),B!=null&&v.push(xl(a,B,D)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var FT=/\r\n?/g,GT=/\u0000|\uFFFD/g;function x0(t){return(typeof t=="string"?t:""+t).replace(FT,`
`).replace(GT,"")}function R0(t,i){return i=x0(i),x0(t)===i}function tt(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||gn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&gn(t,""+l);break;case"className":wn(t,"class",l);break;case"tabIndex":wn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":wn(t,a,l);break;case"style":Go(t,l,d);break;case"data":if(i!=="object"){wn(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ta(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&tt(t,i,"name",h.name,h,null),tt(t,i,"formEncType",h.formEncType,h,null),tt(t,i,"formMethod",h.formMethod,h,null),tt(t,i,"formTarget",h.formTarget,h,null)):(tt(t,i,"encType",h.encType,h,null),tt(t,i,"method",h.method,h,null),tt(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ta(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Xn);break;case"onScroll":l!=null&&Ve("scroll",t);break;case"onScrollEnd":l!=null&&Ve("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ta(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ve("beforetoggle",t),Ve("toggle",t),_a(t,"popover",l);break;case"xlinkActuate":Dt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Dt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Dt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Dt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Dt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Dt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":_a(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=xu.get(a)||a,_a(t,a,l))}}function xd(t,i,a,l,h,d){switch(a){case"style":Go(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?gn(t,l):(typeof l=="number"||typeof l=="bigint")&&gn(t,""+l);break;case"onScroll":l!=null&&Ve("scroll",t);break;case"onScrollEnd":l!=null&&Ve("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Xn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Uo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[Bt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):_a(t,a,l)}}}function Jt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",t),Ve("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:tt(t,i,d,v,a,null)}}h&&tt(t,i,"srcSet",a.srcSet,a,null),l&&tt(t,i,"src",a.src,a,null);return;case"input":Ve("invalid",t);var T=d=v=h=null,D=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var $=a[l];if($!=null)switch(l){case"name":h=$;break;case"type":v=$;break;case"checked":D=$;break;case"defaultChecked":B=$;break;case"value":d=$;break;case"defaultValue":T=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,i));break;default:tt(t,i,l,$,a,null)}}wu(t,d,T,D,B,v,h,!1);return;case"select":Ve("invalid",t),l=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":v=T;break;case"multiple":l=T;default:tt(t,i,h,T,a,null)}i=d,a=v,t.multiple=!!l,i!=null?As(t,!!l,i,!1):a!=null&&As(t,!!l,a,!0);return;case"textarea":Ve("invalid",t),d=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(T=a[v],T!=null))switch(v){case"value":l=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:tt(t,i,v,T,a,null)}xs(t,l,h,d);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:tt(t,i,D,l,a,null)}return;case"dialog":Ve("beforetoggle",t),Ve("toggle",t),Ve("cancel",t),Ve("close",t);break;case"iframe":case"object":Ve("load",t);break;case"video":case"audio":for(l=0;l<Al.length;l++)Ve(Al[l],t);break;case"image":Ve("error",t),Ve("load",t);break;case"details":Ve("toggle",t);break;case"embed":case"source":case"link":Ve("error",t),Ve("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:tt(t,i,B,l,a,null)}return;default:if(ba(i)){for($ in a)a.hasOwnProperty($)&&(l=a[$],l!==void 0&&xd(t,i,$,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&tt(t,i,T,l,a,null))}function QT(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,T=null,D=null,B=null,$=null;for(Y in a){var Z=a[Y];if(a.hasOwnProperty(Y)&&Z!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":D=Z;default:l.hasOwnProperty(Y)||tt(t,i,Y,null,l,Z)}}for(var F in l){var Y=l[F];if(Z=a[F],l.hasOwnProperty(F)&&(Y!=null||Z!=null))switch(F){case"type":d=Y;break;case"name":h=Y;break;case"checked":B=Y;break;case"defaultChecked":$=Y;break;case"value":v=Y;break;case"defaultValue":T=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,i));break;default:Y!==Z&&tt(t,i,F,Y,l,Z)}}Ea(t,v,T,D,B,$,d,h);return;case"select":Y=v=T=F=null;for(d in a)if(D=a[d],a.hasOwnProperty(d)&&D!=null)switch(d){case"value":break;case"multiple":Y=D;default:l.hasOwnProperty(d)||tt(t,i,d,null,l,D)}for(h in l)if(d=l[h],D=a[h],l.hasOwnProperty(h)&&(d!=null||D!=null))switch(h){case"value":F=d;break;case"defaultValue":T=d;break;case"multiple":v=d;default:d!==D&&tt(t,i,h,d,l,D)}i=T,a=v,l=Y,F!=null?As(t,!!a,F,!1):!!l!=!!a&&(i!=null?As(t,!!a,i,!0):As(t,!!a,a?[]:"",!1));return;case"textarea":Y=F=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:tt(t,i,T,null,l,h)}for(v in l)if(h=l[v],d=a[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":F=h;break;case"defaultValue":Y=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&tt(t,i,v,h,l,d)}Su(t,F,Y);return;case"option":for(var he in a)if(F=a[he],a.hasOwnProperty(he)&&F!=null&&!l.hasOwnProperty(he))switch(he){case"selected":t.selected=!1;break;default:tt(t,i,he,null,l,F)}for(D in l)if(F=l[D],Y=a[D],l.hasOwnProperty(D)&&F!==Y&&(F!=null||Y!=null))switch(D){case"selected":t.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:tt(t,i,D,F,l,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in a)F=a[be],a.hasOwnProperty(be)&&F!=null&&!l.hasOwnProperty(be)&&tt(t,i,be,null,l,F);for(B in l)if(F=l[B],Y=a[B],l.hasOwnProperty(B)&&F!==Y&&(F!=null||Y!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,i));break;default:tt(t,i,B,F,l,Y)}return;default:if(ba(i)){for(var nt in a)F=a[nt],a.hasOwnProperty(nt)&&F!==void 0&&!l.hasOwnProperty(nt)&&xd(t,i,nt,void 0,l,F);for($ in l)F=l[$],Y=a[$],!l.hasOwnProperty($)||F===Y||F===void 0&&Y===void 0||xd(t,i,$,F,l,Y);return}}for(var U in a)F=a[U],a.hasOwnProperty(U)&&F!=null&&!l.hasOwnProperty(U)&&tt(t,i,U,null,l,F);for(Z in l)F=l[Z],Y=a[Z],!l.hasOwnProperty(Z)||F===Y||F==null&&Y==null||tt(t,i,Z,F,l,Y)}function C0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function YT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],d=h.transferSize,v=h.initiatorType,T=h.duration;if(d&&T&&C0(v)){for(v=0,T=h.responseEnd,l+=1;l<a.length;l++){var D=a[l],B=D.startTime;if(B>T)break;var $=D.transferSize,Z=D.initiatorType;$&&C0(Z)&&(D=D.responseEnd,v+=$*(D<T?1:(T-B)/(D-B)))}if(--l,i+=8*(d+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Rd=null,Cd=null;function Rc(t){return t.nodeType===9?t:t.ownerDocument}function I0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function N0(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Id(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Nd=null;function KT(){var t=window.event;return t&&t.type==="popstate"?t===Nd?!1:(Nd=t,!0):(Nd=null,!1)}var D0=typeof setTimeout=="function"?setTimeout:void 0,$T=typeof clearTimeout=="function"?clearTimeout:void 0,O0=typeof Promise=="function"?Promise:void 0,XT=typeof queueMicrotask=="function"?queueMicrotask:typeof O0<"u"?function(t){return O0.resolve(null).then(t).catch(JT)}:D0;function JT(t){setTimeout(function(){throw t})}function $s(t){return t==="head"}function M0(t,i){var a=i,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),no(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Rl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Rl(a);for(var d=a.firstChild;d;){var v=d.nextSibling,T=d.nodeName;d[yi]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=v}}else a==="body"&&Rl(t.ownerDocument.body);a=h}while(a);no(i)}function V0(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Dd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Dd(a),va(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function ZT(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[yi])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Bn(t.nextSibling),t===null)break}return null}function WT(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Bn(t.nextSibling),t===null))return null;return t}function j0(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Bn(t.nextSibling),t===null))return null;return t}function Od(t){return t.data==="$?"||t.data==="$~"}function Md(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function ew(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Bn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Vd=null;function k0(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return Bn(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function L0(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function U0(t,i,a){switch(i=Rc(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Rl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);va(t)}var Hn=new Map,P0=new Set;function Cc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var us=ne.d;ne.d={f:tw,r:nw,D:iw,C:sw,L:rw,m:aw,X:lw,S:ow,M:uw};function tw(){var t=us.f(),i=_c();return t||i}function nw(t){var i=On(t);i!==null&&i.tag===5&&i.type==="form"?ny(i):us.r(t)}var Wa=typeof document>"u"?null:document;function z0(t,i,a){var l=Wa;if(l&&typeof i=="string"&&i){var h=mn(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),P0.has(h)||(P0.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),Jt(i,"link",t),Nt(i),l.head.appendChild(i)))}}function iw(t){us.D(t),z0("dns-prefetch",t,null)}function sw(t,i){us.C(t,i),z0("preconnect",t,i)}function rw(t,i,a){us.L(t,i,a);var l=Wa;if(l&&t&&i){var h='link[rel="preload"][as="'+mn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+mn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+mn(a.imageSizes)+'"]')):h+='[href="'+mn(t)+'"]';var d=h;switch(i){case"style":d=eo(t);break;case"script":d=to(t)}Hn.has(d)||(t=w({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Hn.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(Cl(d))||i==="script"&&l.querySelector(Il(d))||(i=l.createElement("link"),Jt(i,"link",t),Nt(i),l.head.appendChild(i)))}}function aw(t,i){us.m(t,i);var a=Wa;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+mn(l)+'"][href="'+mn(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=to(t)}if(!Hn.has(d)&&(t=w({rel:"modulepreload",href:t},i),Hn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Il(d)))return}l=a.createElement("link"),Jt(l,"link",t),Nt(l),a.head.appendChild(l)}}}function ow(t,i,a){us.S(t,i,a);var l=Wa;if(l&&t){var h=_i(l).hoistableStyles,d=eo(t);i=i||"default";var v=h.get(d);if(!v){var T={loading:0,preload:null};if(v=l.querySelector(Cl(d)))T.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Hn.get(d))&&jd(t,a);var D=v=l.createElement("link");Nt(D),Jt(D,"link",t),D._p=new Promise(function(B,$){D.onload=B,D.onerror=$}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Ic(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:T},h.set(d,v)}}}function lw(t,i){us.X(t,i);var a=Wa;if(a&&t){var l=_i(a).hoistableScripts,h=to(t),d=l.get(h);d||(d=a.querySelector(Il(h)),d||(t=w({src:t,async:!0},i),(i=Hn.get(h))&&kd(t,i),d=a.createElement("script"),Nt(d),Jt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function uw(t,i){us.M(t,i);var a=Wa;if(a&&t){var l=_i(a).hoistableScripts,h=to(t),d=l.get(h);d||(d=a.querySelector(Il(h)),d||(t=w({src:t,async:!0,type:"module"},i),(i=Hn.get(h))&&kd(t,i),d=a.createElement("script"),Nt(d),Jt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function q0(t,i,a,l){var h=(h=Re.current)?Cc(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=eo(a.href),a=_i(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=eo(a.href);var d=_i(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(Cl(t)))&&!d._p&&(v.instance=d,v.state.loading=5),Hn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Hn.set(t,a),d||cw(h,t,a,v.state))),i&&l===null)throw Error(r(528,""));return v}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=to(a),a=_i(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function eo(t){return'href="'+mn(t)+'"'}function Cl(t){return'link[rel="stylesheet"]['+t+"]"}function B0(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function cw(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Jt(i,"link",a),Nt(i),t.head.appendChild(i))}function to(t){return'[src="'+mn(t)+'"]'}function Il(t){return"script[async]"+t}function H0(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+mn(a.href)+'"]');if(l)return i.instance=l,Nt(l),l;var h=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Nt(l),Jt(l,"style",h),Ic(l,a.precedence,t),i.instance=l;case"stylesheet":h=eo(a.href);var d=t.querySelector(Cl(h));if(d)return i.state.loading|=4,i.instance=d,Nt(d),d;l=B0(a),(h=Hn.get(h))&&jd(l,h),d=(t.ownerDocument||t).createElement("link"),Nt(d);var v=d;return v._p=new Promise(function(T,D){v.onload=T,v.onerror=D}),Jt(d,"link",l),i.state.loading|=4,Ic(d,a.precedence,t),i.instance=d;case"script":return d=to(a.src),(h=t.querySelector(Il(d)))?(i.instance=h,Nt(h),h):(l=a,(h=Hn.get(d))&&(l=w({},a),kd(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Nt(h),Jt(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Ic(l,a.precedence,t));return i.instance}function Ic(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var T=l[v];if(T.dataset.precedence===i)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function jd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function kd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Nc=null;function F0(t,i,a){if(Nc===null){var l=new Map,h=Nc=new Map;h.set(a,l)}else h=Nc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[yi]||d[It]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=t+v;var T=l.get(v);T?T.push(d):l.set(v,[d])}}return l}function G0(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function hw(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Q0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function fw(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=eo(l.href),d=i.querySelector(Cl(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Dc.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,Nt(d);return}d=i.ownerDocument||i,l=B0(l),(h=Hn.get(h))&&jd(l,h),d=d.createElement("link"),Nt(d);var v=d;v._p=new Promise(function(T,D){v.onload=T,v.onerror=D}),Jt(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Dc.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var Ld=0;function dw(t,i){return t.stylesheets&&t.count===0&&Mc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Mc(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&Ld===0&&(Ld=62500*YT());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Mc(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>Ld?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Dc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Mc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Oc=null;function Mc(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Oc=new Map,i.forEach(mw,t),Oc=null,Dc.call(t))}function mw(t,i){if(!(i.state.loading&4)){var a=Oc.get(t);if(a)var l=a.get(null);else{a=new Map,Oc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,h),a.set(v,h),this.count++,l=Dc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Nl={$$typeof:le,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function gw(t,i,a,l,h,d,v,T,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gi(0),this.hiddenUpdates=gi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Y0(t,i,a,l,h,d,v,T,D,B,$,Z){return t=new gw(t,i,a,v,D,B,$,Z,T),i=1,d===!0&&(i|=24),d=An(3,null,null,i),t.current=d,d.stateNode=t,i=pf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Ef(d),t}function K0(t){return t?(t=Oa,t):Oa}function $0(t,i,a,l,h,d){h=K0(h),l.context===null?l.context=h:l.pendingContext=h,l=Us(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Ps(t,l,i),a!==null&&(En(a,t,i),ll(a,t,i))}function X0(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Ud(t,i){X0(t,i),(t=t.alternate)&&X0(t,i)}function J0(t){if(t.tag===13||t.tag===31){var i=Ur(t,67108864);i!==null&&En(i,t,67108864),Ud(t,67108864)}}function Z0(t){if(t.tag===13||t.tag===31){var i=Nn();i=xr(i);var a=Ur(t,i);a!==null&&En(a,t,i),Ud(t,i)}}var Vc=!0;function pw(t,i,a,l){var h=H.T;H.T=null;var d=ne.p;try{ne.p=2,Pd(t,i,a,l)}finally{ne.p=d,H.T=h}}function yw(t,i,a,l){var h=H.T;H.T=null;var d=ne.p;try{ne.p=8,Pd(t,i,a,l)}finally{ne.p=d,H.T=h}}function Pd(t,i,a,l){if(Vc){var h=zd(l);if(h===null)Ad(t,i,l,jc,a),ev(t,l);else if(_w(h,t,i,a,l))l.stopPropagation();else if(ev(t,l),i&4&&-1<vw.indexOf(t)){for(;h!==null;){var d=On(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=di(d.pendingLanes);if(v!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var D=1<<31-it(v);T.entanglements[1]|=D,v&=~D}Oi(d),(Ke&6)===0&&(yc=Qt()+500,Sl(0))}}break;case 31:case 13:T=Ur(d,2),T!==null&&En(T,d,2),_c(),Ud(d,2)}if(d=zd(l),d===null&&Ad(t,i,l,jc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Ad(t,i,l,null,a)}}function zd(t){return t=Mn(t),qd(t)}var jc=null;function qd(t){if(jc=null,t=vi(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===31){if(t=g(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return jc=t,null}function W0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hi()){case Hi:return 2;case br:return 8;case fi:case Vo:return 32;case ma:return 268435456;default:return 32}default:return 32}}var Bd=!1,Xs=null,Js=null,Zs=null,Dl=new Map,Ol=new Map,Ws=[],vw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ev(t,i){switch(t){case"focusin":case"focusout":Xs=null;break;case"dragenter":case"dragleave":Js=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":Dl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(i.pointerId)}}function Ml(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=On(i),i!==null&&J0(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function _w(t,i,a,l,h){switch(i){case"focusin":return Xs=Ml(Xs,t,i,a,l,h),!0;case"dragenter":return Js=Ml(Js,t,i,a,l,h),!0;case"mouseover":return Zs=Ml(Zs,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return Dl.set(d,Ml(Dl.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Ol.set(d,Ml(Ol.get(d)||null,t,i,a,l,h)),!0}return!1}function tv(t){var i=vi(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,Kn(t.priority,function(){Z0(a)});return}}else if(i===31){if(i=g(a),i!==null){t.blockedOn=i,Kn(t.priority,function(){Z0(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function kc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=zd(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Qo=l,a.target.dispatchEvent(l),Qo=null}else return i=On(a),i!==null&&J0(i),t.blockedOn=a,!1;i.shift()}return!0}function nv(t,i,a){kc(t)&&a.delete(i)}function Ew(){Bd=!1,Xs!==null&&kc(Xs)&&(Xs=null),Js!==null&&kc(Js)&&(Js=null),Zs!==null&&kc(Zs)&&(Zs=null),Dl.forEach(nv),Ol.forEach(nv)}function Lc(t,i){t.blockedOn===i&&(t.blockedOn=null,Bd||(Bd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ew)))}var Uc=null;function iv(t){Uc!==t&&(Uc=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Uc===t&&(Uc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(qd(l||a)===null)continue;break}var d=On(a);d!==null&&(t.splice(i,3),i-=3,zf(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function no(t){function i(D){return Lc(D,t)}Xs!==null&&Lc(Xs,t),Js!==null&&Lc(Js,t),Zs!==null&&Lc(Zs,t),Dl.forEach(i),Ol.forEach(i);for(var a=0;a<Ws.length;a++){var l=Ws[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ws.length&&(a=Ws[0],a.blockedOn===null);)tv(a),a.blockedOn===null&&Ws.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],v=h[Bt]||null;if(typeof d=="function")v||iv(a);else if(v){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Bt]||null)T=v.formAction;else if(qd(h)!==null)continue}else T=v.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),iv(a)}}}function sv(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function Hd(t){this._internalRoot=t}Pc.prototype.render=Hd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Nn();$0(a,l,t,i,null,null)},Pc.prototype.unmount=Hd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;$0(t.current,2,null,t,null,null),_c(),i[pi]=null}};function Pc(t){this._internalRoot=t}Pc.prototype.unstable_scheduleHydration=function(t){if(t){var i=_u();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Ws.length&&i!==0&&i<Ws[a].priority;a++);Ws.splice(a,0,t),a===0&&tv(t)}};var rv=e.version;if(rv!=="19.2.0")throw Error(r(527,rv,"19.2.0"));ne.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=p(i),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var bw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zc.isDisabled&&zc.supportsFiber)try{pe=zc.inject(bw),ze=zc}catch{}}return jl.createRoot=function(t,i){if(!o(t))throw Error(r(299));var a=!1,l="",h=fy,d=dy,v=my;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=Y0(t,1,!1,null,null,a,l,null,h,d,v,sv),t[pi]=i.current,Sd(t),new Hd(i)},jl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(r(299));var l=!1,h="",d=fy,v=dy,T=my,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),i=Y0(t,1,!0,i,a??null,l,h,D,d,v,T,sv),i.context=K0(null),a=i.current,l=Nn(),l=xr(l),h=Us(l),h.callback=null,Ps(a,h,l),a=l,i.current.lanes=a,Sr(i,a),Oi(i),t[pi]=i.current,Sd(t),new Pc(i)},jl.version="19.2.0",jl}var gv;function Dw(){if(gv)return Qd.exports;gv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Qd.exports=Nw(),Qd.exports}var Ow=Dw();const Mw=e1(Ow),Vw=()=>{};var pv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},jw=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const o=s[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],f=s[n++],g=s[n++],y=((o&7)<<18|(u&63)<<12|(f&63)<<6|g&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const u=s[n++],f=s[n++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},n1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],f=o+1<s.length,g=f?s[o+1]:0,y=o+2<s.length,p=y?s[o+2]:0,b=u>>2,w=(u&3)<<4|g>>4;let x=(g&15)<<2|p>>6,q=p&63;y||(q=64,f||(x=64)),r.push(n[b],n[w],n[x],n[q])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(t1(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):jw(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],g=o<s.length?n[s.charAt(o)]:0;++o;const p=o<s.length?n[s.charAt(o)]:64;++o;const w=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||g==null||p==null||w==null)throw new kw;const x=u<<2|g>>4;if(r.push(x),p!==64){const q=g<<4&240|p>>2;if(r.push(q),w!==64){const K=p<<6&192|w;r.push(K)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class kw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Lw=function(s){const e=t1(s);return n1.encodeByteArray(e,!0)},ah=function(s){return Lw(s).replace(/\./g,"")},i1=function(s){try{return n1.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw=()=>Uw().__FIREBASE_DEFAULTS__,zw=()=>{if(typeof process>"u"||typeof pv>"u")return;const s=pv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},qw=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&i1(s[1]);return e&&JSON.parse(e)},xh=()=>{try{return Vw()||Pw()||zw()||qw()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},s1=s=>{var e,n;return(n=(e=xh())==null?void 0:e.emulatorHosts)==null?void 0:n[s]},Bw=s=>{const e=s1(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},r1=()=>{var s;return(s=xh())==null?void 0:s.config},a1=s=>{var e;return(e=xh())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function o1(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[ah(JSON.stringify(n)),ah(JSON.stringify(f)),""].join(".")}const Hl={};function Gw(){const s={prod:[],emulator:[]};for(const e of Object.keys(Hl))Hl[e]?s.emulator.push(e):s.prod.push(e);return s}function Qw(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let yv=!1;function l1(s,e){if(typeof window>"u"||typeof document>"u"||!So(window.location.host)||Hl[s]===e||Hl[s]||yv)return;Hl[s]=e;function n(x){return`__firebase__banner__${x}`}const r="__firebase__banner",u=Gw().prod.length>0;function f(){const x=document.getElementById(r);x&&x.remove()}function g(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function y(x,q){x.setAttribute("width","24"),x.setAttribute("id",q),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function p(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{yv=!0,f()},x}function b(x,q){x.setAttribute("id",q),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function w(){const x=Qw(r),q=n("text"),K=document.getElementById(q)||document.createElement("span"),M=n("learnmore"),k=document.getElementById(M)||document.createElement("a"),re=n("preprendIcon"),ue=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const le=x.element;g(le),b(k,M);const ie=p();y(ue,re),le.append(ue,K,k,ie),document.body.appendChild(le)}u?(K.innerText="Preview backend disconnected.",ue.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ue.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Yw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function Kw(){var e;const s=(e=xh())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $w(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Xw(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Jw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Zw(){const s=an();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function Ww(){return!Kw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eS(){try{return typeof indexedDB=="object"}catch{return!1}}function tS(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="FirebaseError";class Es extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=nS,Object.setPrototypeOf(this,Es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ou.prototype.create)}}class ou{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?iS(u,r):"Error",g=`${this.serviceName}: ${f} (${o}).`;return new Es(o,g,r)}}function iS(s,e){return s.replace(sS,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const sS=/\{\$([^}]+)}/g;function rS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ia(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const u=s[o],f=e[o];if(vv(u)&&vv(f)){if(!ia(u,f))return!1}else if(u!==f)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function vv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function aS(s,e){const n=new oS(s,e);return n.subscribe.bind(n)}class oS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");lS(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=Xd),o.error===void 0&&(o.error=Xd),o.complete===void 0&&(o.complete=Xd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lS(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Xd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(s){return s&&s._delegate?s._delegate:s}class sa{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Hw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hS(e))try{this.getOrInitializeService({instanceIdentifier:Jr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=Jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jr){return this.instances.has(e)}getOptions(e=Jr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);r===g&&f.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:cS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Jr){return this.component?this.component.multipleInstances?e:Jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cS(s){return s===Jr?void 0:s}function hS(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new uS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Le||(Le={}));const dS={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},mS=Le.INFO,gS={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},pS=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=gS[e];if(o)console[o](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pm{constructor(e){this.name=e,this._logLevel=mS,this._logHandler=pS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const yS=(s,e)=>e.some(n=>s instanceof n);let _v,Ev;function vS(){return _v||(_v=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _S(){return Ev||(Ev=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const u1=new WeakMap,dm=new WeakMap,c1=new WeakMap,Jd=new WeakMap,zm=new WeakMap;function ES(s){const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",f)},u=()=>{n(ar(s.result)),o()},f=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&u1.set(n,s)}).catch(()=>{}),zm.set(e,s),e}function bS(s){if(dm.has(s))return;const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",f),s.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",f),s.addEventListener("abort",f)});dm.set(s,e)}let mm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return dm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||c1.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ar(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function TS(s){mm=s(mm)}function wS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(Zd(this),e,...n);return c1.set(r,e.sort?e.sort():[e]),ar(r)}:_S().includes(s)?function(...e){return s.apply(Zd(this),e),ar(u1.get(this))}:function(...e){return ar(s.apply(Zd(this),e))}}function SS(s){return typeof s=="function"?wS(s):(s instanceof IDBTransaction&&bS(s),yS(s,vS())?new Proxy(s,mm):s)}function ar(s){if(s instanceof IDBRequest)return ES(s);if(Jd.has(s))return Jd.get(s);const e=SS(s);return e!==s&&(Jd.set(s,e),zm.set(e,s)),e}const Zd=s=>zm.get(s);function AS(s,e,{blocked:n,upgrade:r,blocking:o,terminated:u}={}){const f=indexedDB.open(s,e),g=ar(f);return r&&f.addEventListener("upgradeneeded",y=>{r(ar(f.result),y.oldVersion,y.newVersion,ar(f.transaction),y)}),n&&f.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),g.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),g}const xS=["get","getKey","getAll","getAllKeys","count"],RS=["put","add","delete","clear"],Wd=new Map;function bv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Wd.get(e))return Wd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=RS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||xS.includes(n)))return;const u=async function(f,...g){const y=this.transaction(f,o?"readwrite":"readonly");let p=y.store;return r&&(p=p.index(g.shift())),(await Promise.all([p[n](...g),o&&y.done]))[0]};return Wd.set(e,u),u}TS(s=>({...s,get:(e,n,r)=>bv(e,n)||s.get(e,n,r),has:(e,n)=>!!bv(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(IS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function IS(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gm="@firebase/app",Tv="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new Pm("@firebase/app"),NS="@firebase/app-compat",DS="@firebase/analytics-compat",OS="@firebase/analytics",MS="@firebase/app-check-compat",VS="@firebase/app-check",jS="@firebase/auth",kS="@firebase/auth-compat",LS="@firebase/database",US="@firebase/data-connect",PS="@firebase/database-compat",zS="@firebase/functions",qS="@firebase/functions-compat",BS="@firebase/installations",HS="@firebase/installations-compat",FS="@firebase/messaging",GS="@firebase/messaging-compat",QS="@firebase/performance",YS="@firebase/performance-compat",KS="@firebase/remote-config",$S="@firebase/remote-config-compat",XS="@firebase/storage",JS="@firebase/storage-compat",ZS="@firebase/firestore",WS="@firebase/ai",eA="@firebase/firestore-compat",tA="firebase",nA="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="[DEFAULT]",iA={[gm]:"fire-core",[NS]:"fire-core-compat",[OS]:"fire-analytics",[DS]:"fire-analytics-compat",[VS]:"fire-app-check",[MS]:"fire-app-check-compat",[jS]:"fire-auth",[kS]:"fire-auth-compat",[LS]:"fire-rtdb",[US]:"fire-data-connect",[PS]:"fire-rtdb-compat",[zS]:"fire-fn",[qS]:"fire-fn-compat",[BS]:"fire-iid",[HS]:"fire-iid-compat",[FS]:"fire-fcm",[GS]:"fire-fcm-compat",[QS]:"fire-perf",[YS]:"fire-perf-compat",[KS]:"fire-rc",[$S]:"fire-rc-compat",[XS]:"fire-gcs",[JS]:"fire-gcs-compat",[ZS]:"fire-fst",[eA]:"fire-fst-compat",[WS]:"fire-vertex","fire-js":"fire-js",[tA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=new Map,sA=new Map,ym=new Map;function wv(s,e){try{s.container.addComponent(e)}catch(n){ms.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function mo(s){const e=s.name;if(ym.has(e))return ms.debug(`There were multiple attempts to register component ${e}.`),!1;ym.set(e,s);for(const n of oh.values())wv(n,s);for(const n of sA.values())wv(n,s);return!0}function qm(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function si(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},or=new ou("app","Firebase",rA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw or.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=nA;function h1(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r={name:pm,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw or.create("bad-app-name",{appName:String(o)});if(n||(n=r1()),!n)throw or.create("no-options");const u=oh.get(o);if(u){if(ia(n,u.options)&&ia(r,u.config))return u;throw or.create("duplicate-app",{appName:o})}const f=new fS(o);for(const y of ym.values())f.addComponent(y);const g=new aA(n,r,f);return oh.set(o,g),g}function f1(s=pm){const e=oh.get(s);if(!e&&s===pm&&r1())return h1();if(!e)throw or.create("no-app",{appName:s});return e}function lr(s,e,n){let r=iA[s]??s;n&&(r+=`-${n}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${r}" with version "${e}":`];o&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ms.warn(f.join(" "));return}mo(new sa(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="firebase-heartbeat-database",lA=1,Xl="firebase-heartbeat-store";let em=null;function d1(){return em||(em=AS(oA,lA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Xl)}catch(n){console.warn(n)}}}}).catch(s=>{throw or.create("idb-open",{originalErrorMessage:s.message})})),em}async function uA(s){try{const n=(await d1()).transaction(Xl),r=await n.objectStore(Xl).get(m1(s));return await n.done,r}catch(e){if(e instanceof Es)ms.warn(e.message);else{const n=or.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ms.warn(n.message)}}}async function Sv(s,e){try{const r=(await d1()).transaction(Xl,"readwrite");await r.objectStore(Xl).put(e,m1(s)),await r.done}catch(n){if(n instanceof Es)ms.warn(n.message);else{const r=or.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ms.warn(r.message)}}}function m1(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=1024,hA=30;class fA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Av();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>hA){const f=gA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ms.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Av(),{heartbeatsToSend:r,unsentEntries:o}=dA(this._heartbeatsCache.heartbeats),u=ah(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return ms.warn(n),""}}}function Av(){return new Date().toISOString().substring(0,10)}function dA(s,e=cA){const n=[];let r=s.slice();for(const o of s){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),xv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),xv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class mA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eS()?tS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await uA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Sv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Sv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function xv(s){return ah(JSON.stringify({version:2,heartbeats:s})).length}function gA(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(s){mo(new sa("platform-logger",e=>new CS(e),"PRIVATE")),mo(new sa("heartbeat",e=>new fA(e),"PRIVATE")),lr(gm,Tv,s),lr(gm,Tv,"esm2020"),lr("fire-js","")}pA("");var yA="firebase",vA="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr(yA,vA,"app");function g1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _A=g1,p1=new ou("auth","Firebase",g1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=new Pm("@firebase/auth");function EA(s,...e){lh.logLevel<=Le.WARN&&lh.warn(`Auth (${Ao}): ${s}`,...e)}function $c(s,...e){lh.logLevel<=Le.ERROR&&lh.error(`Auth (${Ao}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(s,...e){throw Hm(s,...e)}function oi(s,...e){return Hm(s,...e)}function Bm(s,e,n){const r={..._A(),[e]:n};return new ou("auth","Firebase",r).create(e,{appName:s.name})}function ta(s){return Bm(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bA(s,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Pi(s,"argument-error"),Bm(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Hm(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return p1.create(s,...e)}function we(s,e,...n){if(!s)throw Hm(e,...n)}function hs(s){const e="INTERNAL ASSERTION FAILED: "+s;throw $c(e),new Error(e)}function gs(s,e){s||hs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function TA(){return Rv()==="http:"||Rv()==="https:"}function Rv(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TA()||Xw()||"connection"in navigator)?navigator.onLine:!0}function SA(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n){this.shortDelay=e,this.longDelay=n,gs(n>e,"Short delay should be less than long delay!"),this.isMobile=Yw()||Jw()}get(){return wA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(s,e){gs(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],RA=new uu(3e4,6e4);function Gm(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function xo(s,e,n,r,o={}){return v1(s,o,async()=>{let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});const g=lu({key:s.config.apiKey,...f}).slice(1),y=await s._getAdditionalHeaders();y["Content-Type"]="application/json",s.languageCode&&(y["X-Firebase-Locale"]=s.languageCode);const p={method:e,headers:y,...u};return $w()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&So(s.emulatorConfig.host)&&(p.credentials="include"),y1.fetch()(await _1(s,s.config.apiHost,n,g),p)})}async function v1(s,e,n){s._canInitEmulator=!1;const r={...AA,...e};try{const o=new IA(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw qc(s,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const g=u.ok?f.errorMessage:f.error.message,[y,p]=g.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw qc(s,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw qc(s,"email-already-in-use",f);if(y==="USER_DISABLED")throw qc(s,"user-disabled",f);const b=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Bm(s,b,p);Pi(s,b)}}catch(o){if(o instanceof Es)throw o;Pi(s,"network-request-failed",{message:String(o)})}}async function CA(s,e,n,r,o={}){const u=await xo(s,e,n,r,o);return"mfaPendingCredential"in u&&Pi(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function _1(s,e,n,r){const o=`${e}${n}?${r}`,u=s,f=u.config.emulator?Fm(s.config,o):`${s.config.apiScheme}://${o}`;return xA.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}class IA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(oi(this.auth,"network-request-failed")),RA.get())})}}function qc(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=oi(s,e,r);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NA(s,e){return xo(s,"POST","/v1/accounts:delete",e)}async function uh(s,e){return xo(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DA(s,e=!1){const n=fn(s),r=await n.getIdToken(e),o=Qm(r);we(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:r,authTime:Fl(tm(o.auth_time)),issuedAtTime:Fl(tm(o.iat)),expirationTime:Fl(tm(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function tm(s){return Number(s)*1e3}function Qm(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return $c("JWT malformed, contained fewer than 3 sections"),null;try{const o=i1(n);return o?JSON.parse(o):($c("Failed to decode base64 JWT payload"),null)}catch(o){return $c("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Cv(s){const e=Qm(s);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jl(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Es&&OA(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function OA({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fl(this.lastLoginAt),this.creationTime=Fl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ch(s){var w;const e=s.auth,n=await s.getIdToken(),r=await Jl(s,uh(e,{idToken:n}));we(r==null?void 0:r.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=(w=o.providerUserInfo)!=null&&w.length?E1(o.providerUserInfo):[],f=jA(s.providerData,u),g=s.isAnonymous,y=!(s.email&&o.passwordHash)&&!(f!=null&&f.length),p=g?y:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new _m(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(s,b)}async function VA(s){const e=fn(s);await ch(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jA(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function E1(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kA(s,e){const n=await v1(s,{},async()=>{const r=lu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,f=await _1(s,o,"/v1/token",`key=${u}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:g,body:r};return s.emulatorConfig&&So(s.emulatorConfig.host)&&(y.credentials="include"),y1.fetch()(f,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function LA(s,e){return xo(s,"POST","/v2/accounts:revokeToken",Gm(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Cv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=Cv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:u}=await kA(e,n);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:u}=n,f=new lo;return r&&(we(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),o&&(we(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(we(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lo,this.toJSON())}_performRefresh(){return hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(s,e){we(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ri{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new MA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new _m(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Jl(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return DA(this,e)}reload(){return VA(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ri({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ch(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(si(this.auth.app))return Promise.reject(ta(this.auth));const e=await this.getIdToken();return await Jl(this,NA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,g=n.tenantId??void 0,y=n._redirectEventId??void 0,p=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:w,emailVerified:x,isAnonymous:q,providerData:K,stsTokenManager:M}=n;we(w&&M,e,"internal-error");const k=lo.fromJSON(this.name,M);we(typeof w=="string",e,"internal-error"),tr(r,e.name),tr(o,e.name),we(typeof x=="boolean",e,"internal-error"),we(typeof q=="boolean",e,"internal-error"),tr(u,e.name),tr(f,e.name),tr(g,e.name),tr(y,e.name),tr(p,e.name),tr(b,e.name);const re=new ri({uid:w,auth:e,email:o,emailVerified:x,displayName:r,isAnonymous:q,photoURL:f,phoneNumber:u,tenantId:g,stsTokenManager:k,createdAt:p,lastLoginAt:b});return K&&Array.isArray(K)&&(re.providerData=K.map(ue=>({...ue}))),y&&(re._redirectEventId=y),re}static async _fromIdTokenResponse(e,n,r=!1){const o=new lo;o.updateFromServerResponse(n);const u=new ri({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await ch(u),u}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];we(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?E1(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),g=new lo;g.updateFromIdToken(r);const y=new ri({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:f}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new _m(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(y,p),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv=new Map;function fs(s){gs(s instanceof Function,"Expected a class definition");let e=Iv.get(s);return e?(gs(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Iv.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}b1.type="NONE";const Nv=b1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(s,e,n){return`firebase:${s}:${e}:${n}`}class uo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=Xc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Xc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await uh(this.auth,{idToken:e}).catch(()=>{});return n?ri._fromGetAccountInfoResponse(this.auth,n,e):null}return ri._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new uo(fs(Nv),e,r);const o=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||fs(Nv);const f=Xc(r,e.config.apiKey,e.name);let g=null;for(const p of n)try{const b=await p._get(f);if(b){let w;if(typeof b=="string"){const x=await uh(e,{idToken:b}).catch(()=>{});if(!x)break;w=await ri._fromGetAccountInfoResponse(e,x,b)}else w=ri._fromJSON(e,b);p!==u&&(g=w),u=p;break}}catch{}const y=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new uo(u,e,r):(u=y[0],g&&await u._set(f,g.toJSON()),await Promise.all(n.map(async p=>{if(p!==u)try{await p._remove(f)}catch{}})),new uo(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(A1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(T1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(R1(e))return"Blackberry";if(C1(e))return"Webos";if(w1(e))return"Safari";if((e.includes("chrome/")||S1(e))&&!e.includes("edge/"))return"Chrome";if(x1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function T1(s=an()){return/firefox\//i.test(s)}function w1(s=an()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function S1(s=an()){return/crios\//i.test(s)}function A1(s=an()){return/iemobile/i.test(s)}function x1(s=an()){return/android/i.test(s)}function R1(s=an()){return/blackberry/i.test(s)}function C1(s=an()){return/webos/i.test(s)}function Ym(s=an()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function UA(s=an()){var e;return Ym(s)&&!!((e=window.navigator)!=null&&e.standalone)}function PA(){return Zw()&&document.documentMode===10}function I1(s=an()){return Ym(s)||x1(s)||C1(s)||R1(s)||/windows phone/i.test(s)||A1(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(s,e=[]){let n;switch(s){case"Browser":n=Dv(an());break;case"Worker":n=`${Dv(an())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ao}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=u=>new Promise((f,g)=>{try{const y=e(u);f(y)}catch(y){g(y)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qA(s,e={}){return xo(s,"GET","/v2/passwordPolicy",Gm(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=6;class HA{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??BA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ov(this),this.idTokenSubscription=new Ov(this),this.beforeStateQueue=new zA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=p1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fs(n)),this._initializationPromise=this.queue(async()=>{var r,o,u;if(!this._deleted&&(this.persistenceManager=await uo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await uh(this,{idToken:e}),r=await ri._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(si(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(g,g))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(u=this.redirectUser)==null?void 0:u._redirectEventId,g=r==null?void 0:r._redirectEventId,y=await this.tryRedirectSignIn(e);(!f||f===g)&&(y!=null&&y.user)&&(r=y.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(f){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ch(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(si(this.app))return Promise.reject(ta(this));const n=e?fn(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return si(this.app)?Promise.reject(ta(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return si(this.app)?Promise.reject(ta(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qA(this),n=new HA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ou("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await LA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fs(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await uo.create(this,[fs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(g,this,"internal-error"),g.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,r,o);return()=>{f=!0,y()}}else{const y=e.addObserver(n);return()=>{f=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=N1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&EA(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Rh(s){return fn(s)}class Ov{constructor(e){this.auth=e,this.observer=null,this.addObserver=aS(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Km={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GA(s){Km=s}function QA(s){return Km.loadJS(s)}function YA(){return Km.gapiScript}function KA(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(s,e){const n=qm(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ia(u,e??{}))return o;Pi(o,"already-initialized")}return n.initialize({options:e})}function XA(s,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fs);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function JA(s,e,n){const r=Rh(s);we(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=D1(e),{host:f,port:g}=ZA(e),y=g===null?"":`:${g}`,p={url:`${u}//${f}${y}/`},b=Object.freeze({host:f,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){we(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),we(ia(p,r.config.emulator)&&ia(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,So(f)?(o1(`${u}//${f}${y}`),l1("Auth",!0)):WA()}function D1(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function ZA(s){const e=D1(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:Mv(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:Mv(f)}}}function Mv(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function WA(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hs("not implemented")}_getIdTokenResponse(e){return hs("not implemented")}_linkToIdToken(e,n){return hs("not implemented")}_getReauthenticationResolver(e){return hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function co(s,e){return CA(s,"POST","/v1/accounts:signInWithIdp",Gm(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="http://localhost";class ra extends O1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ra(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Pi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=n;if(!r||!o)return null;const f=new ra(r,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return co(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,co(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,co(e,n)}buildRequest(){const e={requestUri:e2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=lu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends $m{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends cu{constructor(){super("facebook.com")}static credential(e){return ra._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.FACEBOOK_SIGN_IN_METHOD="facebook.com";nr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends cu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ra._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return cs.credential(n,r)}catch{return null}}}cs.GOOGLE_SIGN_IN_METHOD="google.com";cs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends cu{constructor(){super("github.com")}static credential(e){return ra._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.GITHUB_SIGN_IN_METHOD="github.com";ir.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends cu{constructor(){super("twitter.com")}static credential(e,n){return ra._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return sr.credential(n,r)}catch{return null}}}sr.TWITTER_SIGN_IN_METHOD="twitter.com";sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const u=await ri._fromIdTokenResponse(e,r,o),f=Vv(r);return new go({user:u,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=Vv(r);return new go({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function Vv(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh extends Es{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,hh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new hh(e,n,r,o)}}function M1(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?hh._fromErrorAndOperation(s,u,e,r):u})}async function t2(s,e,n=!1){const r=await Jl(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return go._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n2(s,e,n=!1){const{auth:r}=s;if(si(r.app))return Promise.reject(ta(r));const o="reauthenticate";try{const u=await Jl(s,M1(r,o,e,s),n);we(u.idToken,r,"internal-error");const f=Qm(u.idToken);we(f,r,"internal-error");const{sub:g}=f;return we(s.uid===g,r,"user-mismatch"),go._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Pi(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i2(s,e,n=!1){if(si(s.app))return Promise.reject(ta(s));const r="signIn",o=await M1(s,r,e),u=await go._fromIdTokenResponse(s,r,o);return n||await s._updateCurrentUser(u.user),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(s,e){return fn(s).setPersistence(e)}function r2(s,e,n,r){return fn(s).onIdTokenChanged(e,n,r)}function a2(s,e,n){return fn(s).beforeAuthStateChanged(e,n)}function o2(s,e,n,r){return fn(s).onAuthStateChanged(e,n,r)}function l2(s){return fn(s).signOut()}const fh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fh,"1"),this.storage.removeItem(fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=1e3,c2=10;class j1 extends V1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=I1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,g,y)=>{this.notifyListeners(f,y)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);PA()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,c2):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},u2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}j1.type="LOCAL";const k1=j1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1 extends V1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}L1.type="SESSION";const U1=L1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new Ch(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const g=Array.from(f).map(async p=>p(n.origin,u)),y=await h2(g);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ch.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((g,y)=>{const p=Xm("",20);o.port1.start();const b=setTimeout(()=>{y(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(w){const x=w;if(x.data.eventId===p)switch(x.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(x.data.response);break;default:clearTimeout(b),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(){return window}function d2(s){Vi().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(){return typeof Vi().WorkerGlobalScope<"u"&&typeof Vi().importScripts=="function"}async function m2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function g2(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function p2(){return P1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="firebaseLocalStorageDb",y2=1,dh="firebaseLocalStorage",q1="fbase_key";class hu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ih(s,e){return s.transaction([dh],e?"readwrite":"readonly").objectStore(dh)}function v2(){const s=indexedDB.deleteDatabase(z1);return new hu(s).toPromise()}function Em(){const s=indexedDB.open(z1,y2);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(dh,{keyPath:q1})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(dh)?e(r):(r.close(),await v2(),e(await Em()))})})}async function jv(s,e,n){const r=Ih(s,!0).put({[q1]:e,value:n});return new hu(r).toPromise()}async function _2(s,e){const n=Ih(s,!1).get(e),r=await new hu(n).toPromise();return r===void 0?null:r.value}function kv(s,e){const n=Ih(s,!0).delete(e);return new hu(n).toPromise()}const E2=800,b2=3;class B1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Em(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>b2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return P1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ch._getInstance(p2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await m2(),!this.activeServiceWorker)return;this.sender=new f2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||g2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Em();return await jv(e,fh,"1"),await kv(e,fh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>jv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>_2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>kv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Ih(o,!1).getAll();return new hu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),E2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}B1.type="LOCAL";const T2=B1;new uu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(s,e){return e?fs(e):(we(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm extends O1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return co(e,this._buildIdpRequest())}_linkToIdToken(e,n){return co(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return co(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function w2(s){return i2(s.auth,new Jm(s),s.bypassAuthState)}function S2(s){const{auth:e,user:n}=s;return we(n,e,"internal-error"),n2(n,new Jm(s),s.bypassAuthState)}async function A2(s){const{auth:e,user:n}=s;return we(n,e,"internal-error"),t2(n,new Jm(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,n,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:u,error:f,type:g}=e;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(y))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return w2;case"linkViaPopup":case"linkViaRedirect":return A2;case"reauthViaPopup":case"reauthViaRedirect":return S2;default:Pi(this.auth,"internal-error")}}resolve(e){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=new uu(2e3,1e4);async function R2(s,e,n){if(si(s.app))return Promise.reject(oi(s,"operation-not-supported-in-this-environment"));const r=Rh(s);bA(s,e,$m);const o=H1(r,n);return new Zr(r,"signInViaPopup",e,o).executeNotNull()}class Zr extends F1{constructor(e,n,r,o,u){super(e,n,o,u),this.provider=r,this.authWindow=null,this.pollId=null,Zr.currentPopupAction&&Zr.currentPopupAction.cancel(),Zr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){gs(this.filter.length===1,"Popup operations only handle one event");const e=Xm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,x2.get())};e()}}Zr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2="pendingRedirect",Jc=new Map;class I2 extends F1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Jc.get(this.auth._key());if(!e){try{const r=await N2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Jc.set(this.auth._key(),e)}return this.bypassAuthState||Jc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function N2(s,e){const n=M2(e),r=O2(s);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function D2(s,e){Jc.set(s._key(),e)}function O2(s){return fs(s._redirectPersistence)}function M2(s){return Xc(C2,s.config.apiKey,s.name)}async function V2(s,e,n=!1){if(si(s.app))return Promise.reject(ta(s));const r=Rh(s),o=H1(r,e),f=await new I2(r,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=600*1e3;class k2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!L2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!G1(e)){const o=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(oi(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=j2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lv(e))}saveEventToCache(e){this.cachedEventUids.add(Lv(e)),this.lastProcessedEventTime=Date.now()}}function Lv(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function G1({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function L2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return G1(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U2(s,e={}){return xo(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,z2=/^https?/;async function q2(s){if(s.config.emulator)return;const{authorizedDomains:e}=await U2(s);for(const n of e)try{if(B2(n))return}catch{}Pi(s,"unauthorized-domain")}function B2(s){const e=vm(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!z2.test(n))return!1;if(P2.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=new uu(3e4,6e4);function Uv(){const s=Vi().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function F2(s){return new Promise((e,n)=>{var o,u,f;function r(){Uv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Uv(),n(oi(s,"network-request-failed"))},timeout:H2.get()})}if((u=(o=Vi().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((f=Vi().gapi)!=null&&f.load)r();else{const g=KA("iframefcb");return Vi()[g]=()=>{gapi.load?r():n(oi(s,"network-request-failed"))},QA(`${YA()}?onload=${g}`).catch(y=>n(y))}}).catch(e=>{throw Zc=null,e})}let Zc=null;function G2(s){return Zc=Zc||F2(s),Zc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2=new uu(5e3,15e3),Y2="__/auth/iframe",K2="emulator/auth/iframe",$2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},X2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function J2(s){const e=s.config;we(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Fm(e,K2):`https://${s.config.authDomain}/${Y2}`,r={apiKey:e.apiKey,appName:s.name,v:Ao},o=X2.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${lu(r).slice(1)}`}async function Z2(s){const e=await G2(s),n=Vi().gapi;return we(n,s,"internal-error"),e.open({where:document.body,url:J2(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$2,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const f=oi(s,"network-request-failed"),g=Vi().setTimeout(()=>{u(f)},Q2.get());function y(){Vi().clearTimeout(g),o(r)}r.ping(y).then(y,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ex=500,tx=600,nx="_blank",ix="http://localhost";class Pv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sx(s,e,n,r=ex,o=tx){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let g="";const y={...W2,width:r.toString(),height:o.toString(),top:u,left:f},p=an().toLowerCase();n&&(g=S1(p)?nx:n),T1(p)&&(e=e||ix,y.scrollbars="yes");const b=Object.entries(y).reduce((x,[q,K])=>`${x}${q}=${K},`,"");if(UA(p)&&g!=="_self")return rx(e||"",g),new Pv(null);const w=window.open(e||"",g,b);we(w,s,"popup-blocked");try{w.focus()}catch{}return new Pv(w)}function rx(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="__/auth/handler",ox="emulator/auth/handler",lx=encodeURIComponent("fac");async function zv(s,e,n,r,o,u){we(s.config.authDomain,s,"auth-domain-config-required"),we(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:Ao,eventId:o};if(e instanceof $m){e.setDefaultLanguage(s.languageCode),f.providerId=e.providerId||"",rS(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,w]of Object.entries({}))f[b]=w}if(e instanceof cu){const b=e.getScopes().filter(w=>w!=="");b.length>0&&(f.scopes=b.join(","))}s.tenantId&&(f.tid=s.tenantId);const g=f;for(const b of Object.keys(g))g[b]===void 0&&delete g[b];const y=await s._getAppCheckToken(),p=y?`#${lx}=${encodeURIComponent(y)}`:"";return`${ux(s)}?${lu(g).slice(1)}${p}`}function ux({config:s}){return s.emulator?Fm(s,ox):`https://${s.authDomain}/${ax}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="webStorageSupport";class cx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=U1,this._completeRedirectFn=V2,this._overrideRedirectResult=D2}async _openPopup(e,n,r,o){var f;gs((f=this.eventManagers[e._key()])==null?void 0:f.manager,"_initialize() not called before _openPopup()");const u=await zv(e,n,r,vm(),o);return sx(e,u,Xm())}async _openRedirect(e,n,r,o){await this._originValidation(e);const u=await zv(e,n,r,vm(),o);return d2(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(gs(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Z2(e),r=new k2(e);return n.register("authEvent",o=>(we(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(nm,{type:nm},o=>{var f;const u=(f=o==null?void 0:o[0])==null?void 0:f[nm];u!==void 0&&n(!!u),Pi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=q2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return I1()||w1()||Ym()}}const hx=cx;var qv="@firebase/auth",Bv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mx(s){mo(new sa("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:g}=r.options;we(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:f,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:N1(s)},p=new FA(r,o,u,y);return XA(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),mo(new sa("auth-internal",e=>{const n=Rh(e.getProvider("auth").getImmediate());return(r=>new fx(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),lr(qv,Bv,dx(s)),lr(qv,Bv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=300,px=a1("authIdTokenMaxAge")||gx;let Hv=null;const yx=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>px)return;const o=n==null?void 0:n.token;Hv!==o&&(Hv=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function vx(s=f1()){const e=qm(s,"auth");if(e.isInitialized())return e.getImmediate();const n=$A(s,{popupRedirectResolver:hx,persistence:[T2,k1,U1]}),r=a1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=yx(u.toString());a2(n,f,()=>f(n.currentUser)),r2(n,g=>f(g))}}const o=s1("auth");return o&&JA(n,`http://${o}`),n}function _x(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}GA({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const u=oi("internal-error");u.customData=o,n(u)},r.type="text/javascript",r.charset="UTF-8",_x().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mx("Browser");var Fv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ur,Q1;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,A){function C(){}C.prototype=A.prototype,R.F=A.prototype,R.prototype=new C,R.prototype.constructor=R,R.D=function(O,V,L){for(var I=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)I[Fe-2]=arguments[Fe];return A.prototype[V].apply(O,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,A,C){C||(C=0);const O=Array(16);if(typeof A=="string")for(var V=0;V<16;++V)O[V]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(V=0;V<16;++V)O[V]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=R.g[0],C=R.g[1],V=R.g[2];let L=R.g[3],I;I=A+(L^C&(V^L))+O[0]+3614090360&4294967295,A=C+(I<<7&4294967295|I>>>25),I=L+(V^A&(C^V))+O[1]+3905402710&4294967295,L=A+(I<<12&4294967295|I>>>20),I=V+(C^L&(A^C))+O[2]+606105819&4294967295,V=L+(I<<17&4294967295|I>>>15),I=C+(A^V&(L^A))+O[3]+3250441966&4294967295,C=V+(I<<22&4294967295|I>>>10),I=A+(L^C&(V^L))+O[4]+4118548399&4294967295,A=C+(I<<7&4294967295|I>>>25),I=L+(V^A&(C^V))+O[5]+1200080426&4294967295,L=A+(I<<12&4294967295|I>>>20),I=V+(C^L&(A^C))+O[6]+2821735955&4294967295,V=L+(I<<17&4294967295|I>>>15),I=C+(A^V&(L^A))+O[7]+4249261313&4294967295,C=V+(I<<22&4294967295|I>>>10),I=A+(L^C&(V^L))+O[8]+1770035416&4294967295,A=C+(I<<7&4294967295|I>>>25),I=L+(V^A&(C^V))+O[9]+2336552879&4294967295,L=A+(I<<12&4294967295|I>>>20),I=V+(C^L&(A^C))+O[10]+4294925233&4294967295,V=L+(I<<17&4294967295|I>>>15),I=C+(A^V&(L^A))+O[11]+2304563134&4294967295,C=V+(I<<22&4294967295|I>>>10),I=A+(L^C&(V^L))+O[12]+1804603682&4294967295,A=C+(I<<7&4294967295|I>>>25),I=L+(V^A&(C^V))+O[13]+4254626195&4294967295,L=A+(I<<12&4294967295|I>>>20),I=V+(C^L&(A^C))+O[14]+2792965006&4294967295,V=L+(I<<17&4294967295|I>>>15),I=C+(A^V&(L^A))+O[15]+1236535329&4294967295,C=V+(I<<22&4294967295|I>>>10),I=A+(V^L&(C^V))+O[1]+4129170786&4294967295,A=C+(I<<5&4294967295|I>>>27),I=L+(C^V&(A^C))+O[6]+3225465664&4294967295,L=A+(I<<9&4294967295|I>>>23),I=V+(A^C&(L^A))+O[11]+643717713&4294967295,V=L+(I<<14&4294967295|I>>>18),I=C+(L^A&(V^L))+O[0]+3921069994&4294967295,C=V+(I<<20&4294967295|I>>>12),I=A+(V^L&(C^V))+O[5]+3593408605&4294967295,A=C+(I<<5&4294967295|I>>>27),I=L+(C^V&(A^C))+O[10]+38016083&4294967295,L=A+(I<<9&4294967295|I>>>23),I=V+(A^C&(L^A))+O[15]+3634488961&4294967295,V=L+(I<<14&4294967295|I>>>18),I=C+(L^A&(V^L))+O[4]+3889429448&4294967295,C=V+(I<<20&4294967295|I>>>12),I=A+(V^L&(C^V))+O[9]+568446438&4294967295,A=C+(I<<5&4294967295|I>>>27),I=L+(C^V&(A^C))+O[14]+3275163606&4294967295,L=A+(I<<9&4294967295|I>>>23),I=V+(A^C&(L^A))+O[3]+4107603335&4294967295,V=L+(I<<14&4294967295|I>>>18),I=C+(L^A&(V^L))+O[8]+1163531501&4294967295,C=V+(I<<20&4294967295|I>>>12),I=A+(V^L&(C^V))+O[13]+2850285829&4294967295,A=C+(I<<5&4294967295|I>>>27),I=L+(C^V&(A^C))+O[2]+4243563512&4294967295,L=A+(I<<9&4294967295|I>>>23),I=V+(A^C&(L^A))+O[7]+1735328473&4294967295,V=L+(I<<14&4294967295|I>>>18),I=C+(L^A&(V^L))+O[12]+2368359562&4294967295,C=V+(I<<20&4294967295|I>>>12),I=A+(C^V^L)+O[5]+4294588738&4294967295,A=C+(I<<4&4294967295|I>>>28),I=L+(A^C^V)+O[8]+2272392833&4294967295,L=A+(I<<11&4294967295|I>>>21),I=V+(L^A^C)+O[11]+1839030562&4294967295,V=L+(I<<16&4294967295|I>>>16),I=C+(V^L^A)+O[14]+4259657740&4294967295,C=V+(I<<23&4294967295|I>>>9),I=A+(C^V^L)+O[1]+2763975236&4294967295,A=C+(I<<4&4294967295|I>>>28),I=L+(A^C^V)+O[4]+1272893353&4294967295,L=A+(I<<11&4294967295|I>>>21),I=V+(L^A^C)+O[7]+4139469664&4294967295,V=L+(I<<16&4294967295|I>>>16),I=C+(V^L^A)+O[10]+3200236656&4294967295,C=V+(I<<23&4294967295|I>>>9),I=A+(C^V^L)+O[13]+681279174&4294967295,A=C+(I<<4&4294967295|I>>>28),I=L+(A^C^V)+O[0]+3936430074&4294967295,L=A+(I<<11&4294967295|I>>>21),I=V+(L^A^C)+O[3]+3572445317&4294967295,V=L+(I<<16&4294967295|I>>>16),I=C+(V^L^A)+O[6]+76029189&4294967295,C=V+(I<<23&4294967295|I>>>9),I=A+(C^V^L)+O[9]+3654602809&4294967295,A=C+(I<<4&4294967295|I>>>28),I=L+(A^C^V)+O[12]+3873151461&4294967295,L=A+(I<<11&4294967295|I>>>21),I=V+(L^A^C)+O[15]+530742520&4294967295,V=L+(I<<16&4294967295|I>>>16),I=C+(V^L^A)+O[2]+3299628645&4294967295,C=V+(I<<23&4294967295|I>>>9),I=A+(V^(C|~L))+O[0]+4096336452&4294967295,A=C+(I<<6&4294967295|I>>>26),I=L+(C^(A|~V))+O[7]+1126891415&4294967295,L=A+(I<<10&4294967295|I>>>22),I=V+(A^(L|~C))+O[14]+2878612391&4294967295,V=L+(I<<15&4294967295|I>>>17),I=C+(L^(V|~A))+O[5]+4237533241&4294967295,C=V+(I<<21&4294967295|I>>>11),I=A+(V^(C|~L))+O[12]+1700485571&4294967295,A=C+(I<<6&4294967295|I>>>26),I=L+(C^(A|~V))+O[3]+2399980690&4294967295,L=A+(I<<10&4294967295|I>>>22),I=V+(A^(L|~C))+O[10]+4293915773&4294967295,V=L+(I<<15&4294967295|I>>>17),I=C+(L^(V|~A))+O[1]+2240044497&4294967295,C=V+(I<<21&4294967295|I>>>11),I=A+(V^(C|~L))+O[8]+1873313359&4294967295,A=C+(I<<6&4294967295|I>>>26),I=L+(C^(A|~V))+O[15]+4264355552&4294967295,L=A+(I<<10&4294967295|I>>>22),I=V+(A^(L|~C))+O[6]+2734768916&4294967295,V=L+(I<<15&4294967295|I>>>17),I=C+(L^(V|~A))+O[13]+1309151649&4294967295,C=V+(I<<21&4294967295|I>>>11),I=A+(V^(C|~L))+O[4]+4149444226&4294967295,A=C+(I<<6&4294967295|I>>>26),I=L+(C^(A|~V))+O[11]+3174756917&4294967295,L=A+(I<<10&4294967295|I>>>22),I=V+(A^(L|~C))+O[2]+718787259&4294967295,V=L+(I<<15&4294967295|I>>>17),I=C+(L^(V|~A))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+A&4294967295,R.g[1]=R.g[1]+(V+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+V&4294967295,R.g[3]=R.g[3]+L&4294967295}r.prototype.v=function(R,A){A===void 0&&(A=R.length);const C=A-this.blockSize,O=this.C;let V=this.h,L=0;for(;L<A;){if(V==0)for(;L<=C;)o(this,R,L),L+=this.blockSize;if(typeof R=="string"){for(;L<A;)if(O[V++]=R.charCodeAt(L++),V==this.blockSize){o(this,O),V=0;break}}else for(;L<A;)if(O[V++]=R[L++],V==this.blockSize){o(this,O),V=0;break}}this.h=V,this.o+=A},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var A=1;A<R.length-8;++A)R[A]=0;A=this.o*8;for(var C=R.length-8;C<R.length;++C)R[C]=A&255,A/=256;for(this.v(R),R=Array(16),A=0,C=0;C<4;++C)for(let O=0;O<32;O+=8)R[A++]=this.g[C]>>>O&255;return R};function u(R,A){var C=g;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=A(R)}function f(R,A){this.h=A;const C=[];let O=!0;for(let V=R.length-1;V>=0;V--){const L=R[V]|0;O&&L==A||(C[V]=L,O=!1)}this.g=C}var g={};function y(R){return-128<=R&&R<128?u(R,function(A){return new f([A|0],A<0?-1:0)}):new f([R|0],R<0?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return w;if(R<0)return k(p(-R));const A=[];let C=1;for(let O=0;R>=C;O++)A[O]=R/C|0,C*=4294967296;return new f(A,0)}function b(R,A){if(R.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(R.charAt(0)=="-")return k(b(R.substring(1),A));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=p(Math.pow(A,8));let O=w;for(let L=0;L<R.length;L+=8){var V=Math.min(8,R.length-L);const I=parseInt(R.substring(L,L+V),A);V<8?(V=p(Math.pow(A,V)),O=O.j(V).add(p(I))):(O=O.j(C),O=O.add(p(I)))}return O}var w=y(0),x=y(1),q=y(16777216);s=f.prototype,s.m=function(){if(M(this))return-k(this).m();let R=0,A=1;for(let C=0;C<this.g.length;C++){const O=this.i(C);R+=(O>=0?O:4294967296+O)*A,A*=4294967296}return R},s.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(K(this))return"0";if(M(this))return"-"+k(this).toString(R);const A=p(Math.pow(R,6));var C=this;let O="";for(;;){const V=ie(C,A).g;C=re(C,V.j(A));let L=((C.g.length>0?C.g[0]:C.h)>>>0).toString(R);if(C=V,K(C))return L+O;for(;L.length<6;)L="0"+L;O=L+O}},s.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function K(R){if(R.h!=0)return!1;for(let A=0;A<R.g.length;A++)if(R.g[A]!=0)return!1;return!0}function M(R){return R.h==-1}s.l=function(R){return R=re(this,R),M(R)?-1:K(R)?0:1};function k(R){const A=R.g.length,C=[];for(let O=0;O<A;O++)C[O]=~R.g[O];return new f(C,~R.h).add(x)}s.abs=function(){return M(this)?k(this):this},s.add=function(R){const A=Math.max(this.g.length,R.g.length),C=[];let O=0;for(let V=0;V<=A;V++){let L=O+(this.i(V)&65535)+(R.i(V)&65535),I=(L>>>16)+(this.i(V)>>>16)+(R.i(V)>>>16);O=I>>>16,L&=65535,I&=65535,C[V]=I<<16|L}return new f(C,C[C.length-1]&-2147483648?-1:0)};function re(R,A){return R.add(k(A))}s.j=function(R){if(K(this)||K(R))return w;if(M(this))return M(R)?k(this).j(k(R)):k(k(this).j(R));if(M(R))return k(this.j(k(R)));if(this.l(q)<0&&R.l(q)<0)return p(this.m()*R.m());const A=this.g.length+R.g.length,C=[];for(var O=0;O<2*A;O++)C[O]=0;for(O=0;O<this.g.length;O++)for(let V=0;V<R.g.length;V++){const L=this.i(O)>>>16,I=this.i(O)&65535,Fe=R.i(V)>>>16,fe=R.i(V)&65535;C[2*O+2*V]+=I*fe,ue(C,2*O+2*V),C[2*O+2*V+1]+=L*fe,ue(C,2*O+2*V+1),C[2*O+2*V+1]+=I*Fe,ue(C,2*O+2*V+1),C[2*O+2*V+2]+=L*Fe,ue(C,2*O+2*V+2)}for(R=0;R<A;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=A;R<2*A;R++)C[R]=0;return new f(C,0)};function ue(R,A){for(;(R[A]&65535)!=R[A];)R[A+1]+=R[A]>>>16,R[A]&=65535,A++}function le(R,A){this.g=R,this.h=A}function ie(R,A){if(K(A))throw Error("division by zero");if(K(R))return new le(w,w);if(M(R))return A=ie(k(R),A),new le(k(A.g),k(A.h));if(M(A))return A=ie(R,k(A)),new le(k(A.g),A.h);if(R.g.length>30){if(M(R)||M(A))throw Error("slowDivide_ only works with positive integers.");for(var C=x,O=A;O.l(R)<=0;)C=ye(C),O=ye(O);var V=me(C,1),L=me(O,1);for(O=me(O,2),C=me(C,2);!K(O);){var I=L.add(O);I.l(R)<=0&&(V=V.add(C),L=I),O=me(O,1),C=me(C,1)}return A=re(R,V.j(A)),new le(V,A)}for(V=w;R.l(A)>=0;){for(C=Math.max(1,Math.floor(R.m()/A.m())),O=Math.ceil(Math.log(C)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),L=p(C),I=L.j(A);M(I)||I.l(R)>0;)C-=O,L=p(C),I=L.j(A);K(L)&&(L=x),V=V.add(L),R=re(R,I)}return new le(V,R)}s.B=function(R){return ie(this,R).h},s.and=function(R){const A=Math.max(this.g.length,R.g.length),C=[];for(let O=0;O<A;O++)C[O]=this.i(O)&R.i(O);return new f(C,this.h&R.h)},s.or=function(R){const A=Math.max(this.g.length,R.g.length),C=[];for(let O=0;O<A;O++)C[O]=this.i(O)|R.i(O);return new f(C,this.h|R.h)},s.xor=function(R){const A=Math.max(this.g.length,R.g.length),C=[];for(let O=0;O<A;O++)C[O]=this.i(O)^R.i(O);return new f(C,this.h^R.h)};function ye(R){const A=R.g.length+1,C=[];for(let O=0;O<A;O++)C[O]=R.i(O)<<1|R.i(O-1)>>>31;return new f(C,R.h)}function me(R,A){const C=A>>5;A%=32;const O=R.g.length-C,V=[];for(let L=0;L<O;L++)V[L]=A>0?R.i(L+C)>>>A|R.i(L+C+1)<<32-A:R.i(L+C);return new f(V,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Q1=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=p,f.fromString=b,ur=f}).apply(typeof Fv<"u"?Fv:typeof self<"u"?self:typeof window<"u"?window:{});var Bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Y1,Ll,K1,Wc,bm,$1,X1,J1;(function(){var s,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bc=="object"&&Bc];for(var m=0;m<c.length;++m){var E=c[m];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function o(c,m){if(m)e:{var E=r;c=c.split(".");for(var S=0;S<c.length-1;S++){var P=c[S];if(!(P in E))break e;E=E[P]}c=c[c.length-1],S=E[c],m=m(S),m!=S&&m!=null&&e(E,c,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(m){var E=[],S;for(S in m)Object.prototype.hasOwnProperty.call(m,S)&&E.push([S,m[S]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function g(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function y(c,m,E){return c.call.apply(c.bind,arguments)}function p(c,m,E){return p=y,p.apply(null,arguments)}function b(c,m){var E=Array.prototype.slice.call(arguments,1);return function(){var S=E.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function w(c,m){function E(){}E.prototype=m.prototype,c.Z=m.prototype,c.prototype=new E,c.prototype.constructor=c,c.Ob=function(S,P,G){for(var se=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)se[Ie-2]=arguments[Ie];return m.prototype[P].apply(S,se)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function q(c){const m=c.length;if(m>0){const E=Array(m);for(let S=0;S<m;S++)E[S]=c[S];return E}return[]}function K(c,m){for(let S=1;S<arguments.length;S++){const P=arguments[S];var E=typeof P;if(E=E!="object"?E:P?Array.isArray(P)?"array":E:"null",E=="array"||E=="object"&&typeof P.length=="number"){E=c.length||0;const G=P.length||0;c.length=E+G;for(let se=0;se<G;se++)c[E+se]=P[se]}else c.push(P)}}class M{constructor(m,E){this.i=m,this.j=E,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function k(c){f.setTimeout(()=>{throw c},0)}function re(){var c=R;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class ue{constructor(){this.h=this.g=null}add(m,E){const S=le.get();S.set(m,E),this.h?this.h.next=S:this.g=S,this.h=S}}var le=new M(()=>new ie,c=>c.reset());class ie{constructor(){this.next=this.g=this.h=null}set(m,E){this.h=m,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,me=!1,R=new ue,A=()=>{const c=Promise.resolve(void 0);ye=()=>{c.then(C)}};function C(){for(var c;c=re();){try{c.h.call(c.g)}catch(E){k(E)}var m=le;m.j(c),m.h<100&&(m.h++,c.next=m.g,m.g=c)}me=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const E=()=>{};f.addEventListener("test",E,m),f.removeEventListener("test",E,m)}catch{}return c})();function I(c){return/^[\s\xa0]*$/.test(c)}function Fe(c,m){V.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,m)}w(Fe,V),Fe.prototype.init=function(c,m){const E=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget,m||(E=="mouseover"?m=c.fromElement:E=="mouseout"&&(m=c.toElement)),this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Fe.Z.h.call(this)},Fe.prototype.h=function(){Fe.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),H=0;function ne(c,m,E,S,P){this.listener=c,this.proxy=null,this.src=m,this.type=E,this.capture=!!S,this.ha=P,this.key=++H,this.da=this.fa=!1}function de(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ce(c,m,E){for(const S in c)m.call(E,c[S],S,c)}function He(c,m){for(const E in c)m.call(void 0,c[E],E,c)}function N(c){const m={};for(const E in c)m[E]=c[E];return m}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(c,m){let E,S;for(let P=1;P<arguments.length;P++){S=arguments[P];for(E in S)c[E]=S[E];for(let G=0;G<Q.length;G++)E=Q[G],Object.prototype.hasOwnProperty.call(S,E)&&(c[E]=S[E])}}function ae(c){this.src=c,this.g={},this.h=0}ae.prototype.add=function(c,m,E,S,P){const G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);const se=Re(c,m,S,P);return se>-1?(m=c[se],E||(m.fa=!1)):(m=new ne(m,this.src,G,!!S,P),m.fa=E,c.push(m)),m};function ve(c,m){const E=m.type;if(E in c.g){var S=c.g[E],P=Array.prototype.indexOf.call(S,m,void 0),G;(G=P>=0)&&Array.prototype.splice.call(S,P,1),G&&(de(m),c.g[E].length==0&&(delete c.g[E],c.h--))}}function Re(c,m,E,S){for(let P=0;P<c.length;++P){const G=c[P];if(!G.da&&G.listener==m&&G.capture==!!E&&G.ha==S)return P}return-1}var Oe="closure_lm_"+(Math.random()*1e6|0),Et={};function rt(c,m,E,S,P){if(Array.isArray(m)){for(let G=0;G<m.length;G++)rt(c,m[G],E,S,P);return null}return E=ws(E),c&&c[fe]?c.J(m,E,g(S)?!!S.capture:!1,P):qi(c,m,E,!1,S,P)}function qi(c,m,E,S,P,G){if(!m)throw Error("Invalid event type");const se=g(P)?!!P.capture:!!P;let Ie=Qn(c);if(Ie||(c[Oe]=Ie=new ae(c)),E=Ie.add(m,E,S,se,G),E.proxy)return E;if(S=bs(),E.proxy=S,S.src=c,S.listener=E,c.addEventListener)L||(P=se),P===void 0&&(P=!1),c.addEventListener(m.toString(),S,P);else if(c.attachEvent)c.attachEvent(Rt(m.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return E}function bs(){function c(E){return m.call(c.src,c.listener,E)}const m=_r;return c}function Ts(c,m,E,S,P){if(Array.isArray(m))for(var G=0;G<m.length;G++)Ts(c,m[G],E,S,P);else S=g(S)?!!S.capture:!!S,E=ws(E),c&&c[fe]?(c=c.i,G=String(m).toString(),G in c.g&&(m=c.g[G],E=Re(m,E,S,P),E>-1&&(de(m[E]),Array.prototype.splice.call(m,E,1),m.length==0&&(delete c.g[G],c.h--)))):c&&(c=Qn(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Re(m,E,S,P)),(E=c>-1?m[c]:null)&&Bi(E))}function Bi(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[fe])ve(m.i,c);else{var E=c.type,S=c.proxy;m.removeEventListener?m.removeEventListener(E,S,c.capture):m.detachEvent?m.detachEvent(Rt(E),S):m.addListener&&m.removeListener&&m.removeListener(S),(E=Qn(m))?(ve(E,c),E.h==0&&(E.src=null,m[Oe]=null)):de(c)}}}function Rt(c){return c in Et?Et[c]:Et[c]="on"+c}function _r(c,m){if(c.da)c=!0;else{m=new Fe(m,this);const E=c.listener,S=c.ha||c.src;c.fa&&Bi(c),c=E.call(S,m)}return c}function Qn(c){return c=c[Oe],c instanceof ae?c:null}var Er="__closure_events_fn_"+(Math.random()*1e9>>>0);function ws(c){return typeof c=="function"?c:(c[Er]||(c[Er]=function(m){return c.handleEvent(m)}),c[Er])}function yt(){O.call(this),this.i=new ae(this),this.M=this,this.G=null}w(yt,O),yt.prototype[fe]=!0,yt.prototype.removeEventListener=function(c,m,E,S){Ts(this,c,m,E,S)};function bt(c,m){var E,S=c.G;if(S)for(E=[];S;S=S.G)E.push(S);if(c=c.M,S=m.type||m,typeof m=="string")m=new V(m,c);else if(m instanceof V)m.target=m.target||c;else{var P=m;m=new V(S,c),te(m,P)}P=!0;let G,se;if(E)for(se=E.length-1;se>=0;se--)G=m.g=E[se],P=ci(G,S,!0,m)&&P;if(G=m.g=c,P=ci(G,S,!0,m)&&P,P=ci(G,S,!1,m)&&P,E)for(se=0;se<E.length;se++)G=m.g=E[se],P=ci(G,S,!1,m)&&P}yt.prototype.N=function(){if(yt.Z.N.call(this),this.i){var c=this.i;for(const m in c.g){const E=c.g[m];for(let S=0;S<E.length;S++)de(E[S]);delete c.g[m],c.h--}}this.G=null},yt.prototype.J=function(c,m,E,S){return this.i.add(String(c),m,!1,E,S)},yt.prototype.K=function(c,m,E,S){return this.i.add(String(c),m,!0,E,S)};function ci(c,m,E,S){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();let P=!0;for(let G=0;G<m.length;++G){const se=m[G];if(se&&!se.da&&se.capture==E){const Ie=se.listener,Tt=se.ha||se.src;se.fa&&ve(c.i,se),P=Ie.call(Tt,S)!==!1&&P}}return P&&!S.defaultPrevented}function Mo(c,m){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:f.setTimeout(c,m||0)}function da(c){c.g=Mo(()=>{c.g=null,c.i&&(c.i=!1,da(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Qt extends O{constructor(m,E){super(),this.m=m,this.l=E,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:da(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hi(c){O.call(this),this.h=c,this.g={}}w(hi,O);var Hi=[];function br(c){Ce(c.g,function(m,E){this.g.hasOwnProperty(E)&&Bi(m)},c),c.g={}}hi.prototype.N=function(){hi.Z.N.call(this),br(this)},hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fi=f.JSON.stringify,Vo=f.JSON.parse,ma=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function ga(){}function pa(){}var pe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ze(){V.call(this,"d")}w(ze,V);function ft(){V.call(this,"c")}w(ft,V);var it={},Tr=null;function Fi(){return Tr=Tr||new yt}it.Ia="serverreachability";function wr(c){V.call(this,it.Ia,c)}w(wr,V);function gt(c){const m=Fi();bt(m,new wr(m))}it.STAT_EVENT="statevent";function dn(c,m){V.call(this,it.STAT_EVENT,c),this.stat=m}w(dn,V);function Ct(c){const m=Fi();bt(m,new dn(m,c))}it.Ja="timingevent";function di(c,m){V.call(this,it.Ja,c),this.size=m}w(di,V);function mi(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},m)}function Yn(){this.g=!0}Yn.prototype.ua=function(){this.g=!1};function Yh(c,m,E,S,P,G){c.info(function(){if(c.g)if(G){var se="",Ie=G.split("&");for(let Ye=0;Ye<Ie.length;Ye++){var Tt=Ie[Ye].split("=");if(Tt.length>1){const dt=Tt[0];Tt=Tt[1];const jn=dt.split("_");se=jn.length>=2&&jn[1]=="type"?se+(dt+"="+Tt+"&"):se+(dt+"=redacted&")}}}else se=null;else se=G;return"XMLHTTP REQ ("+S+") [attempt "+P+"]: "+m+`
`+E+`
`+se})}function vu(c,m,E,S,P,G,se){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+P+"]: "+m+`
`+E+`
`+G+" "+se})}function gi(c,m,E,S){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Kh(c,E)+(S?" "+S:"")})}function Sr(c,m){c.info(function(){return"TIMEOUT: "+m})}Yn.prototype.info=function(){};function Kh(c,m){if(!c.g)return m;if(!m)return null;try{const G=JSON.parse(m);if(G){for(c=0;c<G.length;c++)if(Array.isArray(G[c])){var E=G[c];if(!(E.length<2)){var S=E[1];if(Array.isArray(S)&&!(S.length<1)){var P=S[0];if(P!="noop"&&P!="stop"&&P!="close")for(let se=1;se<S.length;se++)S[se]=""}}}}return fi(G)}catch{return m}}var Ar={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},jo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ko;function xr(){}w(xr,ga),xr.prototype.g=function(){return new XMLHttpRequest},ko=new xr;function Gi(c){return encodeURIComponent(String(c))}function _u(c){var m=1;c=c.split(":");const E=[];for(;m>0&&c.length;)E.push(c.shift()),m--;return c.length&&E.push(c.join(":")),E}function Kn(c,m,E,S){this.j=c,this.i=m,this.l=E,this.S=S||1,this.V=new hi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $n}function $n(){this.i=null,this.g="",this.h=!1}var It={},Bt={};function pi(c,m,E){c.M=1,c.A=Rr(Dt(m)),c.u=E,c.R=!0,ya(c,null)}function ya(c,m){c.F=Date.now(),yi(c),c.B=Dt(c.A);var E=c.B,S=c.S;Array.isArray(S)||(S=[String(S)]),ba(E.i,"t",S),c.C=0,E=c.j.L,c.h=new $n,c.g=Vu(c.j,E?m:null,!c.u),c.P>0&&(c.O=new Qt(p(c.Y,c,c.g),c.P)),m=c.V,E=c.g,S=c.ba;var P="readystatechange";Array.isArray(P)||(P&&(Hi[0]=P.toString()),P=Hi);for(let G=0;G<P.length;G++){const se=rt(E,P[G],S||m.handleEvent,!1,m.h||m);if(!se)break;m.g[se.key]=se}m=c.J?N(c.J):{},c.u?(c.v||(c.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,m)):(c.v="GET",c.g.ea(c.B,c.v,null,m)),gt(),Yh(c.i,c.v,c.B,c.l,c.S,c.u)}Kn.prototype.ba=function(c){c=c.target;const m=this.O;m&&Zn(c)==3?m.j():this.Y(c)},Kn.prototype.Y=function(c){try{if(c==this.g)e:{const Ie=Zn(this.g),Tt=this.g.ya(),Ye=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||Yt(this.g)))){this.K||Ie!=4||Tt==7||(Tt==8||Ye<=0?gt(3):gt(2)),vi(this);var m=this.g.ca();this.X=m;var E=$h(this);if(this.o=m==200,vu(this.i,this.v,this.B,this.l,this.S,Ie,m),this.o){if(this.U&&!this.L){t:{if(this.g){var S,P=this.g;if((S=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(S)){var G=S;break t}}G=null}if(c=G)gi(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,_i(this,c);else{this.o=!1,this.m=3,Ct(12),Tn(this),On(this);break e}}if(this.R){c=!0;let dt;for(;!this.K&&this.C<E.length;)if(dt=bu(this,E),dt==Bt){Ie==4&&(this.m=4,Ct(14),c=!1),gi(this.i,this.l,null,"[Incomplete Response]");break}else if(dt==It){this.m=4,Ct(15),gi(this.i,this.l,E,"[Invalid Chunk]"),c=!1;break}else gi(this.i,this.l,dt,null),_i(this,dt);if(Eu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||E.length!=0||this.h.h||(this.m=1,Ct(16),c=!1),this.o=this.o&&c,!c)gi(this.i,this.l,E,"[Invalid Chunked Response]"),Tn(this),On(this);else if(E.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Jo(se),se.P=!0,Ct(11))}}else gi(this.i,this.l,E,null),_i(this,E);Ie==4&&Tn(this),this.o&&!this.K&&(Ie==4?Nu(this.j,this):(this.o=!1,yi(this)))}else Yi(this.g),m==400&&E.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),Tn(this),On(this)}}}catch{}finally{}};function $h(c){if(!Eu(c))return c.g.la();const m=Yt(c.g);if(m==="")return"";let E="";const S=m.length,P=Zn(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Tn(c),On(c),"";c.h.i=new f.TextDecoder}for(let G=0;G<S;G++)c.h.h=!0,E+=c.h.i.decode(m[G],{stream:!(P&&G==S-1)});return m.length=0,c.h.g+=E,c.C=0,c.h.g}function Eu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function bu(c,m){var E=c.C,S=m.indexOf(`
`,E);return S==-1?Bt:(E=Number(m.substring(E,S)),isNaN(E)?It:(S+=1,S+E>m.length?Bt:(m=m.slice(S,S+E),c.C=S+E,m)))}Kn.prototype.cancel=function(){this.K=!0,Tn(this)};function yi(c){c.T=Date.now()+c.H,va(c,c.H)}function va(c,m){if(c.D!=null)throw Error("WatchDog timer not null");c.D=mi(p(c.aa,c),m)}function vi(c){c.D&&(f.clearTimeout(c.D),c.D=null)}Kn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Sr(this.i,this.B),this.M!=2&&(gt(),Ct(17)),Tn(this),this.m=2,On(this)):va(this,this.T-c)};function On(c){c.j.I==0||c.K||Nu(c.j,c)}function Tn(c){vi(c);var m=c.O;m&&typeof m.dispose=="function"&&m.dispose(),c.O=null,br(c.V),c.g&&(m=c.g,c.g=null,m.abort(),m.dispose())}function _i(c,m){try{var E=c.j;if(E.I!=0&&(E.g==c||bi(E.h,c))){if(!c.L&&bi(E.h,c)&&E.I==3){try{var S=E.Ba.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var P=S;if(P[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<c.F)xa(E),Ds(E);else break e;Vr(E),Ct(18)}}else E.xa=P[1],0<E.xa-E.K&&P[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=mi(p(E.Va,E),6e3));Ei(E.h)<=1&&E.ta&&(E.ta=void 0)}else Ri(E,11)}else if((c.L||E.g==c)&&xa(E),!I(m))for(P=E.Ba.g.parse(m),m=0;m<P.length;m++){let Ye=P[m];const dt=Ye[0];if(!(dt<=E.K))if(E.K=dt,Ye=Ye[1],E.I==2)if(Ye[0]=="c"){E.M=Ye[1],E.ba=Ye[2];const jn=Ye[3];jn!=null&&(E.ka=jn,E.j.info("VER="+E.ka));const Ci=Ye[4];Ci!=null&&(E.za=Ci,E.j.info("SVER="+E.za));const Wn=Ye[5];Wn!=null&&typeof Wn=="number"&&Wn>0&&(S=1.5*Wn,E.O=S,E.j.info("backChannelRequestTimeoutMs_="+S)),S=E;const ei=c.g;if(ei){const jr=ei.g?ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jr){var G=S.h;G.g||jr.indexOf("spdy")==-1&&jr.indexOf("quic")==-1&&jr.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Po(G,G.h),G.h=null))}if(S.G){const Ra=ei.g?ei.g.getResponseHeader("X-HTTP-Session-Id"):null;Ra&&(S.wa=Ra,Xe(S.J,S.G,Ra))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-c.F,E.j.info("Handshake RTT: "+E.T+"ms")),S=E;var se=c;if(S.na=Mu(S,S.L?S.ba:null,S.W),se.L){zo(S.h,se);var Ie=se,Tt=S.O;Tt&&(Ie.H=Tt),Ie.D&&(vi(Ie),yi(Ie)),S.g=se}else Cu(S);E.i.length>0&&xi(E)}else Ye[0]!="stop"&&Ye[0]!="close"||Ri(E,7);else E.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?Ri(E,7):$o(E):Ye[0]!="noop"&&E.l&&E.l.qa(Ye),E.A=0)}}gt(4)}catch{}}var Nt=class{constructor(c,m){this.g=c,this.map=m}};function Lo(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Uo(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ei(c){return c.h?1:c.g?c.g.size:0}function bi(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function Po(c,m){c.g?c.g.add(m):c.h=m}function zo(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}Lo.prototype.cancel=function(){if(this.i=qo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function qo(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const E of c.g.values())m=m.concat(E.G);return m}return q(c.i)}var Tu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _a(c,m){if(c){c=c.split("&");for(let E=0;E<c.length;E++){const S=c[E].indexOf("=");let P,G=null;S>=0?(P=c[E].substring(0,S),G=c[E].substring(S+1)):P=c[E],m(P,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function wn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;c instanceof wn?(this.l=c.l,Ht(this,c.j),this.o=c.o,this.g=c.g,Ss(this,c.u),this.h=c.h,Bo(this,xu(c.i)),this.m=c.m):c&&(m=String(c).match(Tu))?(this.l=!1,Ht(this,m[1]||"",!0),this.o=Ti(m[2]||""),this.g=Ti(m[3]||"",!0),Ss(this,m[4]),this.h=Ti(m[5]||"",!0),Bo(this,m[6]||"",!0),this.m=Ti(m[7]||"")):(this.l=!1,this.i=new xs(null,this.l))}wn.prototype.toString=function(){const c=[];var m=this.j;m&&c.push(Cr(m,Ea,!0),":");var E=this.g;return(E||m=="file")&&(c.push("//"),(m=this.o)&&c.push(Cr(m,Ea,!0),"@"),c.push(Gi(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&c.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&c.push("/"),c.push(Cr(E,E.charAt(0)=="/"?Ho:wu,!0))),(E=this.i.toString())&&c.push("?",E),(E=this.m)&&c.push("#",Cr(E,Su)),c.join("")},wn.prototype.resolve=function(c){const m=Dt(this);let E=!!c.j;E?Ht(m,c.j):E=!!c.o,E?m.o=c.o:E=!!c.g,E?m.g=c.g:E=c.u!=null;var S=c.h;if(E)Ss(m,c.u);else if(E=!!c.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var P=m.h.lastIndexOf("/");P!=-1&&(S=m.h.slice(0,P+1)+S)}if(P=S,P==".."||P==".")S="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){S=P.lastIndexOf("/",0)==0,P=P.split("/");const G=[];for(let se=0;se<P.length;){const Ie=P[se++];Ie=="."?S&&se==P.length&&G.push(""):Ie==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),S&&se==P.length&&G.push("")):(G.push(Ie),S=!0)}S=G.join("/")}else S=P}return E?m.h=S:E=c.i.toString()!=="",E?Bo(m,xu(c.i)):E=!!c.m,E&&(m.m=c.m),m};function Dt(c){return new wn(c)}function Ht(c,m,E){c.j=E?Ti(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function Ss(c,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);c.u=m}else c.u=null}function Bo(c,m,E){m instanceof xs?(c.i=m,Ta(c.i,c.l)):(E||(m=Cr(m,As)),c.i=new xs(m,c.l))}function Xe(c,m,E){c.i.set(m,E)}function Rr(c){return Xe(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Ti(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Cr(c,m,E){return typeof c=="string"?(c=encodeURI(c).replace(m,mn),E&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function mn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ea=/[#\/\?@]/g,wu=/[#\?:]/g,Ho=/[#\?]/g,As=/[#\?@]/g,Su=/#/g;function xs(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function gn(c){c.g||(c.g=new Map,c.h=0,c.i&&_a(c.i,function(m,E){c.add(decodeURIComponent(m.replace(/\+/g," ")),E)}))}s=xs.prototype,s.add=function(c,m){gn(this),this.i=null,c=Rs(this,c);let E=this.g.get(c);return E||this.g.set(c,E=[]),E.push(m),this.h+=1,this};function Au(c,m){gn(c),m=Rs(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Fo(c,m){return gn(c),m=Rs(c,m),c.g.has(m)}s.forEach=function(c,m){gn(this),this.g.forEach(function(E,S){E.forEach(function(P){c.call(m,P,S,this)},this)},this)};function Go(c,m){gn(c);let E=[];if(typeof m=="string")Fo(c,m)&&(E=E.concat(c.g.get(Rs(c,m))));else for(c=Array.from(c.g.values()),m=0;m<c.length;m++)E=E.concat(c[m]);return E}s.set=function(c,m){return gn(this),this.i=null,c=Rs(this,c),Fo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},s.get=function(c,m){return c?(c=Go(this,c),c.length>0?String(c[0]):m):m};function ba(c,m,E){Au(c,m),E.length>0&&(c.i=null,c.g.set(Rs(c,m),q(E)),c.h+=E.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(let S=0;S<m.length;S++){var E=m[S];const P=Gi(E);E=Go(this,E);for(let G=0;G<E.length;G++){let se=P;E[G]!==""&&(se+="="+Gi(E[G])),c.push(se)}}return this.i=c.join("&")};function xu(c){const m=new xs;return m.i=c.i,c.g&&(m.g=new Map(c.g),m.h=c.h),m}function Rs(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function Ta(c,m){m&&!c.j&&(gn(c),c.i=null,c.g.forEach(function(E,S){const P=S.toLowerCase();S!=P&&(Au(this,S),ba(this,P,E))},c)),c.j=m}function Xn(c,m){const E=new Yn;if(f.Image){const S=new Image;S.onload=b(Mn,E,"TestLoadImage: loaded",!0,m,S),S.onerror=b(Mn,E,"TestLoadImage: error",!1,m,S),S.onabort=b(Mn,E,"TestLoadImage: abort",!1,m,S),S.ontimeout=b(Mn,E,"TestLoadImage: timeout",!1,m,S),f.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else m(!1)}function Qo(c,m){const E=new Yn,S=new AbortController,P=setTimeout(()=>{S.abort(),Mn(E,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:S.signal}).then(G=>{clearTimeout(P),G.ok?Mn(E,"TestPingServer: ok",!0,m):Mn(E,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(P),Mn(E,"TestPingServer: error",!1,m)})}function Mn(c,m,E,S,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),S(E)}catch{}}function Cs(){this.g=new ma}function wi(c){this.i=c.Sb||null,this.h=c.ab||!1}w(wi,ga),wi.prototype.g=function(){return new Ir(this.i,this.h)};function Ir(c,m){yt.call(this),this.H=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Ir,yt),s=Ir.prototype,s.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=m,this.readyState=1,Jn(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(m.body=c),(this.H||f).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Is(this)),this.readyState=0},s.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Jn(this)),this.g&&(this.readyState=3,Jn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wa(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function wa(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}s.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?Is(this):Jn(this),this.readyState==3&&wa(this)}},s.Oa=function(c){this.g&&(this.response=this.responseText=c,Is(this))},s.Na=function(c){this.g&&(this.response=c,Is(this))},s.ga=function(){this.g&&Is(this)};function Is(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Jn(c)}s.setRequestHeader=function(c,m){this.A.append(c,m)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var E=m.next();!E.done;)E=E.value,c.push(E[0]+": "+E[1]),E=m.next();return c.join(`\r
`)};function Jn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ir.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Vn(c){let m="";return Ce(c,function(E,S){m+=S,m+=":",m+=E,m+=`\r
`}),m}function Nr(c,m,E){e:{for(S in E){var S=!1;break e}S=!0}S||(E=Vn(E),typeof c=="string"?E!=null&&Gi(E):Xe(c,m,E))}function We(c){yt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(We,yt);var Si=/^https?$/i,Yo=["POST","PUT"];s=We.prototype,s.Fa=function(c){this.H=c},s.ea=function(c,m,E,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ko.g(),this.g.onreadystatechange=x(p(this.Ca,this));try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(G){Dr(this,G);return}if(c=E||"",E=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var P in S)E.set(P,S[P]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const G of S.keys())E.set(G,S.get(G));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(E.keys()).find(G=>G.toLowerCase()=="content-type"),P=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(Yo,m,void 0)>=0)||S||P||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,se]of E)this.g.setRequestHeader(G,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(G){Dr(this,G)}};function Dr(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.o=5,Ko(c),Qi(c)}function Ko(c){c.A||(c.A=!0,bt(c,"complete"),bt(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,bt(this,"complete"),bt(this,"abort"),Qi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qi(this,!0)),We.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Or(this):this.Xa())},s.Xa=function(){Or(this)};function Or(c){if(c.h&&typeof u<"u"){if(c.v&&Zn(c)==4)setTimeout(c.Ca.bind(c),0);else if(bt(c,"readystatechange"),Zn(c)==4){c.h=!1;try{const G=c.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var E;if(!(E=m)){var S;if(S=G===0){let se=String(c.D).match(Tu)[1]||null;!se&&f.self&&f.self.location&&(se=f.self.location.protocol.slice(0,-1)),S=!Si.test(se?se.toLowerCase():"")}E=S}if(E)bt(c,"complete"),bt(c,"success");else{c.o=6;try{var P=Zn(c)>2?c.g.statusText:""}catch{P=""}c.l=P+" ["+c.ca()+"]",Ko(c)}}finally{Qi(c)}}}}function Qi(c,m){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const E=c.g;c.g=null,m||bt(c,"ready");try{E.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Zn(c){return c.g?c.g.readyState:0}s.ca=function(){try{return Zn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),Vo(m)}};function Yt(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Yi(c){const m={};c=(c.g&&Zn(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(I(c[S]))continue;var E=_u(c[S]);const P=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const G=m[P]||[];m[P]=G,G.push(E)}He(m,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ai(c,m,E){return E&&E.internalChannelParams&&E.internalChannelParams[c]||m}function Ns(c){this.za=0,this.i=[],this.j=new Yn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ai("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ai("baseRetryDelayMs",5e3,c),this.Za=Ai("retryDelaySeedMs",1e4,c),this.Ta=Ai("forwardChannelMaxRetries",2,c),this.va=Ai("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Lo(c&&c.concurrentRequestLimit),this.Ba=new Cs,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ns.prototype,s.ka=8,s.I=1,s.connect=function(c,m,E,S){Ct(0),this.W=c,this.H=m||{},E&&S!==void 0&&(this.H.OSID=E,this.H.OAID=S),this.F=this.X,this.J=Mu(this,null,this.W),xi(this)};function $o(c){if(Sa(c),c.I==3){var m=c.V++,E=Dt(c.J);if(Xe(E,"SID",c.M),Xe(E,"RID",m),Xe(E,"TYPE","terminate"),Mr(c,E),m=new Kn(c,c.j,m),m.M=2,m.A=Rr(Dt(E)),E=!1,f.navigator&&f.navigator.sendBeacon)try{E=f.navigator.sendBeacon(m.A.toString(),"")}catch{}!E&&f.Image&&(new Image().src=m.A,E=!0),E||(m.g=Vu(m.j,null),m.g.ea(m.A)),m.F=Date.now(),yi(m)}Ou(c)}function Ds(c){c.g&&(Jo(c),c.g.cancel(),c.g=null)}function Sa(c){Ds(c),c.v&&(f.clearTimeout(c.v),c.v=null),xa(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function xi(c){if(!Uo(c.h)&&!c.m){c.m=!0;var m=c.Ea;ye||A(),me||(ye(),me=!0),R.add(m,c),c.D=0}}function Aa(c,m){return Ei(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=m.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=mi(p(c.Ea,c,m),Du(c,c.D)),c.D++,!0)}s.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const P=new Kn(this,this.j,c);let G=this.o;if(this.U&&(G?(G=N(G),te(G,this.U)):G=this.U),this.u!==null||this.R||(P.J=G,G=null),this.S)e:{for(var m=0,E=0;E<this.i.length;E++){t:{var S=this.i[E];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(m+=S,m>4096){m=E;break e}if(m===4096||E===this.i.length-1){m=E+1;break e}}m=1e3}else m=1e3;m=Ru(this,P,m),E=Dt(this.J),Xe(E,"RID",c),Xe(E,"CVER",22),this.G&&Xe(E,"X-HTTP-Session-Id",this.G),Mr(this,E),G&&(this.R?m="headers="+Gi(Vn(G))+"&"+m:this.u&&Nr(E,this.u,G)),Po(this.h,P),this.Ra&&Xe(E,"TYPE","init"),this.S?(Xe(E,"$req",m),Xe(E,"SID","null"),P.U=!0,pi(P,E,null)):pi(P,E,m),this.I=2}}else this.I==3&&(c?Xo(this,c):this.i.length==0||Uo(this.h)||Xo(this))};function Xo(c,m){var E;m?E=m.l:E=c.V++;const S=Dt(c.J);Xe(S,"SID",c.M),Xe(S,"RID",E),Xe(S,"AID",c.K),Mr(c,S),c.u&&c.o&&Nr(S,c.u,c.o),E=new Kn(c,c.j,E,c.D+1),c.u===null&&(E.J=c.o),m&&(c.i=m.G.concat(c.i)),m=Ru(c,E,1e3),E.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Po(c.h,E),pi(E,S,m)}function Mr(c,m){c.H&&Ce(c.H,function(E,S){Xe(m,S,E)}),c.l&&Ce({},function(E,S){Xe(m,S,E)})}function Ru(c,m,E){E=Math.min(c.i.length,E);const S=c.l?p(c.l.Ka,c.l,c):null;e:{var P=c.i;let Ie=-1;for(;;){const Tt=["count="+E];Ie==-1?E>0?(Ie=P[0].g,Tt.push("ofs="+Ie)):Ie=0:Tt.push("ofs="+Ie);let Ye=!0;for(let dt=0;dt<E;dt++){var G=P[dt].g;const jn=P[dt].map;if(G-=Ie,G<0)Ie=Math.max(0,P[dt].g-100),Ye=!1;else try{G="req"+G+"_"||"";try{var se=jn instanceof Map?jn:Object.entries(jn);for(const[Ci,Wn]of se){let ei=Wn;g(Wn)&&(ei=fi(Wn)),Tt.push(G+Ci+"="+encodeURIComponent(ei))}}catch(Ci){throw Tt.push(G+"type="+encodeURIComponent("_badmap")),Ci}}catch{S&&S(jn)}}if(Ye){se=Tt.join("&");break e}}se=void 0}return c=c.i.splice(0,E),m.G=c,se}function Cu(c){if(!c.g&&!c.v){c.Y=1;var m=c.Da;ye||A(),me||(ye(),me=!0),R.add(m,c),c.A=0}}function Vr(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=mi(p(c.Da,c),Du(c,c.A)),c.A++,!0)}s.Da=function(){if(this.v=null,Iu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=mi(p(this.Wa,this),c)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),Ds(this),Iu(this))};function Jo(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function Iu(c){c.g=new Kn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var m=Dt(c.na);Xe(m,"RID","rpc"),Xe(m,"SID",c.M),Xe(m,"AID",c.K),Xe(m,"CI",c.F?"0":"1"),!c.F&&c.ia&&Xe(m,"TO",c.ia),Xe(m,"TYPE","xmlhttp"),Mr(c,m),c.u&&c.o&&Nr(m,c.u,c.o),c.O&&(c.g.H=c.O);var E=c.g;c=c.ba,E.M=1,E.A=Rr(Dt(m)),E.u=null,E.R=!0,ya(E,c)}s.Va=function(){this.C!=null&&(this.C=null,Ds(this),Vr(this),Ct(19))};function xa(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function Nu(c,m){var E=null;if(c.g==m){xa(c),Jo(c),c.g=null;var S=2}else if(bi(c.h,m))E=m.G,zo(c.h,m),S=1;else return;if(c.I!=0){if(m.o)if(S==1){E=m.u?m.u.length:0,m=Date.now()-m.F;var P=c.D;S=Fi(),bt(S,new di(S,E)),xi(c)}else Cu(c);else if(P=m.m,P==3||P==0&&m.X>0||!(S==1&&Aa(c,m)||S==2&&Vr(c)))switch(E&&E.length>0&&(m=c.h,m.i=m.i.concat(E)),P){case 1:Ri(c,5);break;case 4:Ri(c,10);break;case 3:Ri(c,6);break;default:Ri(c,2)}}}function Du(c,m){let E=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(E*=2),E*m}function Ri(c,m){if(c.j.info("Error code "+m),m==2){var E=p(c.bb,c),S=c.Ua;const P=!S;S=new wn(S||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Ht(S,"https"),Rr(S),P?Xn(S.toString(),E):Qo(S.toString(),E)}else Ct(2);c.I=0,c.l&&c.l.pa(m),Ou(c),Sa(c)}s.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Ou(c){if(c.I=0,c.ja=[],c.l){const m=qo(c.h);(m.length!=0||c.i.length!=0)&&(K(c.ja,m),K(c.ja,c.i),c.h.i.length=0,q(c.i),c.i.length=0),c.l.oa()}}function Mu(c,m,E){var S=E instanceof wn?Dt(E):new wn(E);if(S.g!="")m&&(S.g=m+"."+S.g),Ss(S,S.u);else{var P=f.location;S=P.protocol,m=m?m+"."+P.hostname:P.hostname,P=+P.port;const G=new wn(null);S&&Ht(G,S),m&&(G.g=m),P&&Ss(G,P),E&&(G.h=E),S=G}return E=c.G,m=c.wa,E&&m&&Xe(S,E,m),Xe(S,"VER",c.ka),Mr(c,S),S}function Vu(c,m,E){if(m&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Aa&&!c.ma?new We(new wi({ab:E})):new We(c.ma),m.Fa(c.L),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function ju(){}s=ju.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Os(){}Os.prototype.g=function(c,m){return new cn(c,m)};function cn(c,m){yt.call(this),this.g=new Ns(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(c?c["X-WebChannel-Client-Profile"]=m.sa:c={"X-WebChannel-Client-Profile":m.sa}),this.g.U=c,(c=m&&m.Qb)&&!I(c)&&(this.g.u=c),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!I(m)&&(this.g.G=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Ki(this)}w(cn,yt),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){$o(this.g)},cn.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var E={};E.__data__=c,c=E}else this.v&&(E={},E.__data__=fi(c),c=E);m.i.push(new Nt(m.Ya++,c)),m.I==3&&xi(m)},cn.prototype.N=function(){this.g.l=null,delete this.j,$o(this.g),delete this.g,cn.Z.N.call(this)};function ku(c){ze.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const E in m){c=E;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}w(ku,ze);function Lu(){ft.call(this),this.status=1}w(Lu,ft);function Ki(c){this.g=c}w(Ki,ju),Ki.prototype.ra=function(){bt(this.g,"a")},Ki.prototype.qa=function(c){bt(this.g,new ku(c))},Ki.prototype.pa=function(c){bt(this.g,new Lu)},Ki.prototype.oa=function(){bt(this.g,"b")},Os.prototype.createWebChannel=Os.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,J1=function(){return new Os},X1=function(){return Fi()},$1=it,bm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ar.NO_ERROR=0,Ar.TIMEOUT=8,Ar.HTTP_ERROR=6,Wc=Ar,jo.COMPLETE="complete",K1=jo,pa.EventType=pe,pe.OPEN="a",pe.CLOSE="b",pe.ERROR="c",pe.MESSAGE="d",yt.prototype.listen=yt.prototype.J,Ll=pa,We.prototype.listenOnce=We.prototype.K,We.prototype.getLastError=We.prototype.Ha,We.prototype.getLastErrorCode=We.prototype.ya,We.prototype.getStatus=We.prototype.ca,We.prototype.getResponseJson=We.prototype.La,We.prototype.getResponseText=We.prototype.la,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Fa,Y1=We}).apply(typeof Bc<"u"?Bc:typeof self<"u"?self:typeof window<"u"?window:{});const Gv="@firebase/firestore",Qv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ro="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new Pm("@firebase/firestore");function io(){return aa.logLevel}function ce(s,...e){if(aa.logLevel<=Le.DEBUG){const n=e.map(Zm);aa.debug(`Firestore (${Ro}): ${s}`,...n)}}function ps(s,...e){if(aa.logLevel<=Le.ERROR){const n=e.map(Zm);aa.error(`Firestore (${Ro}): ${s}`,...n)}}function po(s,...e){if(aa.logLevel<=Le.WARN){const n=e.map(Zm);aa.warn(`Firestore (${Ro}): ${s}`,...n)}}function Zm(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Z1(s,r,n)}function Z1(s,e,n){let r=`FIRESTORE (${Ro}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ps(r),new Error(r)}function $e(s,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,s||Z1(e,o,r)}function xe(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Es{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ex{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(sn.UNAUTHENTICATED)))}shutdown(){}}class bx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Tx{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$e(this.o===void 0,42304);let r=this.i;const o=y=>this.i!==r?(r=this.i,n(y)):Promise.resolve();let u=new ds;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ds,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const y=u;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},g=y=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((y=>g(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ds)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string",31837,{l:r}),new W1(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new sn(e)}}class wx{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Sx{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new wx(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Yv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ax{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,si(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){$e(this.o===void 0,3512);const r=u=>{u.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,ce("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const o=u=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Yv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?($e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Yv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=xx(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<n&&(r+=e.charAt(o[u]%62))}return r}}function Ue(s,e){return s<e?-1:s>e?1:0}function Tm(s,e){const n=Math.min(s.length,e.length);for(let r=0;r<n;r++){const o=s.charAt(r),u=e.charAt(r);if(o!==u)return im(o)===im(u)?Ue(o,u):im(o)?1:-1}return Ue(s.length,e.length)}const Rx=55296,Cx=57343;function im(s){const e=s.charCodeAt(0);return e>=Rx&&e<=Cx}function yo(s,e,n){return s.length===e.length&&s.every(((r,o)=>n(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="__name__";class Mi{constructor(e,n,r){n===void 0?n=0:n>e.length&&Te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Mi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mi?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const u=Mi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Ue(e.length,n.length)}static compareSegments(e,n){const r=Mi.isNumericId(e),o=Mi.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?Mi.extractNumericId(e).compare(Mi.extractNumericId(n)):Tm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ur.fromString(e.substring(4,e.length-2))}}class ot extends Mi{construct(e,n,r){return new ot(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new ot(n)}static emptyPath(){return new ot([])}}const Ix=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Mi{construct(e,n,r){return new Wt(e,n,r)}static isValidIdentifier(e){return Ix.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Kv}static keyField(){return new Wt([Kv])}static fromServerFormat(e){const n=[];let r="",o=0;const u=()=>{if(r.length===0)throw new oe(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new oe(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new oe(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,o+=2}else g==="`"?(f=!f,o++):g!=="."||f?(r+=g,o++):(u(),o++)}if(u(),f)throw new oe(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ot.fromString(e))}static fromName(e){return new Ee(ot.fromString(e).popFirst(5))}static empty(){return new Ee(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(s,e,n){if(!n)throw new oe(J.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Nx(s,e,n,r){if(e===!0&&r===!0)throw new oe(J.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function $v(s){if(!Ee.isDocumentKey(s))throw new oe(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Xv(s){if(Ee.isDocumentKey(s))throw new oe(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function tE(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Nh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Te(12329,{type:typeof s})}function ys(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new oe(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nh(s);throw new oe(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function Dx(s,e){if(e<=0)throw new oe(J.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(s,e){const n={typeString:s};return e&&(n.value=e),n}function fu(s,e){if(!tE(s))throw new oe(J.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const f=s[r];if(o&&typeof f!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new oe(J.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=-62135596800,Zv=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Zv);return new ct(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new oe(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new oe(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Jv)throw new oe(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Zv}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fu(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Jv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:Ut("string",ct._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new ct(0,0))}static max(){return new Se(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl=-1;function Ox(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(r===1e9?new ct(n+1,0):new ct(n,r));return new fr(o,Ee.empty(),e)}function Mx(s){return new fr(s.readTime,s.key,Zl)}class fr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new fr(Se.min(),Ee.empty(),Zl)}static max(){return new fr(Se.max(),Ee.empty(),Zl)}}function Vx(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Ee.comparator(s.documentKey,e.documentKey),n!==0?n:Ue(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(s){if(s.code!==J.FAILED_PRECONDITION||s.message!==jx)throw s;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):W.reject(n)}static resolve(e){return new W(((n,r)=>{n(e)}))}static reject(e){return new W(((n,r)=>{r(e)}))}static waitFor(e){return new W(((n,r)=>{let o=0,u=0,f=!1;e.forEach((g=>{++o,g.next((()=>{++u,f&&u===o&&n()}),(y=>r(y)))})),f=!0,u===o&&n()}))}static or(e){let n=W.resolve(!1);for(const r of e)n=n.next((o=>o?W.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,u)=>{r.push(n.call(this,o,u))})),this.waitFor(r)}static mapArray(e,n){return new W(((r,o)=>{const u=e.length,f=new Array(u);let g=0;for(let y=0;y<u;y++){const p=y;n(e[p]).next((b=>{f[p]=b,++g,g===u&&r(f)}),(b=>o(b)))}}))}static doWhile(e,n){return new W(((r,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):r()};u()}))}}function Lx(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Io(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Dh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg=-1;function Oh(s){return s==null}function mh(s){return s===0&&1/s==-1/0}function Ux(s){return typeof s=="number"&&Number.isInteger(s)&&!mh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="";function Px(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=Wv(e)),e=zx(s.get(n),e);return Wv(e)}function zx(s,e){let n=e;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case nE:n+="";break;default:n+=u}}return n}function Wv(s){return s+nE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function la(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function iE(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){this.comparator=e,this.root=n||Zt.EMPTY}insert(e,n){return new pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hc(this.root,e,this.comparator,!0)}}class Hc{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?r(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,n,r,o,u){this.key=e,this.value=n,this.color=r??Zt.RED,this.left=o??Zt.EMPTY,this.right=u??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,u){return new Zt(e??this.key,n??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,r),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Zt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,n,r,o,u){return this}insert(e,n,r){return new Zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new t_(this.data.getIterator())}getIteratorFrom(e){return new t_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new qt(this.comparator);return n.data=e,n}}class t_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new ai([])}unionWith(e){let n=new qt(Wt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ai(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return yo(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new sE("Invalid base64 string: "+u):u}})(e);return new en(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new en(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const qx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dr(s){if($e(!!s,39018),typeof s=="string"){let e=0;const n=qx.exec(s);if($e(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(s.seconds),nanos:At(s.nanos)}}function At(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function mr(s){return typeof s=="string"?en.fromBase64String(s):en.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="server_timestamp",aE="__type__",oE="__previous_value__",lE="__local_write_time__";function tg(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[aE])==null?void 0:r.stringValue)===rE}function Mh(s){const e=s.mapValue.fields[oE];return tg(e)?Mh(e):e}function Wl(s){const e=dr(s.mapValue.fields[lE].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,n,r,o,u,f,g,y,p,b){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=p,this.isUsingEmulator=b}}const gh="(default)";class eu{constructor(e,n){this.projectId=e,this.database=n||gh}static empty(){return new eu("","")}get isDefaultDatabase(){return this.database===gh}isEqual(e){return e instanceof eu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="__type__",Hx="__max__",Fc={mapValue:{}},cE="__vector__",ph="value";function gr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?tg(s)?4:Gx(s)?9007199254740991:Fx(s)?10:11:Te(28295,{value:s})}function zi(s,e){if(s===e)return!0;const n=gr(s);if(n!==gr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Wl(s).isEqual(Wl(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=dr(o.timestampValue),g=dr(u.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return mr(o.bytesValue).isEqual(mr(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return At(o.geoPointValue.latitude)===At(u.geoPointValue.latitude)&&At(o.geoPointValue.longitude)===At(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return At(o.integerValue)===At(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=At(o.doubleValue),g=At(u.doubleValue);return f===g?mh(f)===mh(g):isNaN(f)&&isNaN(g)}return!1})(s,e);case 9:return yo(s.arrayValue.values||[],e.arrayValue.values||[],zi);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},g=u.mapValue.fields||{};if(e_(f)!==e_(g))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(g[y]===void 0||!zi(f[y],g[y])))return!1;return!0})(s,e);default:return Te(52216,{left:s})}}function tu(s,e){return(s.values||[]).find((n=>zi(n,e)))!==void 0}function vo(s,e){if(s===e)return 0;const n=gr(s),r=gr(e);if(n!==r)return Ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ue(s.booleanValue,e.booleanValue);case 2:return(function(u,f){const g=At(u.integerValue||u.doubleValue),y=At(f.integerValue||f.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1})(s,e);case 3:return n_(s.timestampValue,e.timestampValue);case 4:return n_(Wl(s),Wl(e));case 5:return Tm(s.stringValue,e.stringValue);case 6:return(function(u,f){const g=mr(u),y=mr(f);return g.compareTo(y)})(s.bytesValue,e.bytesValue);case 7:return(function(u,f){const g=u.split("/"),y=f.split("/");for(let p=0;p<g.length&&p<y.length;p++){const b=Ue(g[p],y[p]);if(b!==0)return b}return Ue(g.length,y.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,f){const g=Ue(At(u.latitude),At(f.latitude));return g!==0?g:Ue(At(u.longitude),At(f.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return i_(s.arrayValue,e.arrayValue);case 10:return(function(u,f){var x,q,K,M;const g=u.fields||{},y=f.fields||{},p=(x=g[ph])==null?void 0:x.arrayValue,b=(q=y[ph])==null?void 0:q.arrayValue,w=Ue(((K=p==null?void 0:p.values)==null?void 0:K.length)||0,((M=b==null?void 0:b.values)==null?void 0:M.length)||0);return w!==0?w:i_(p,b)})(s.mapValue,e.mapValue);case 11:return(function(u,f){if(u===Fc.mapValue&&f===Fc.mapValue)return 0;if(u===Fc.mapValue)return 1;if(f===Fc.mapValue)return-1;const g=u.fields||{},y=Object.keys(g),p=f.fields||{},b=Object.keys(p);y.sort(),b.sort();for(let w=0;w<y.length&&w<b.length;++w){const x=Tm(y[w],b[w]);if(x!==0)return x;const q=vo(g[y[w]],p[b[w]]);if(q!==0)return q}return Ue(y.length,b.length)})(s.mapValue,e.mapValue);default:throw Te(23264,{he:n})}}function n_(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ue(s,e);const n=dr(s),r=dr(e),o=Ue(n.seconds,r.seconds);return o!==0?o:Ue(n.nanos,r.nanos)}function i_(s,e){const n=s.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const u=vo(n[o],r[o]);if(u)return u}return Ue(n.length,r.length)}function _o(s){return wm(s)}function wm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=dr(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return mr(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Ee.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",o=!0;for(const u of n.values||[])o?o=!1:r+=",",r+=wm(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of r)u?u=!1:o+=",",o+=`${f}:${wm(n.fields[f])}`;return o+"}"})(s.mapValue):Te(61005,{value:s})}function eh(s){switch(gr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mh(s);return e?16+eh(e):16;case 5:return 2*s.stringValue.length;case 6:return mr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+eh(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return la(r.fields,((u,f)=>{o+=u.length+eh(f)})),o})(s.mapValue);default:throw Te(13486,{value:s})}}function s_(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Sm(s){return!!s&&"integerValue"in s}function ng(s){return!!s&&"arrayValue"in s}function r_(s){return!!s&&"nullValue"in s}function a_(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function th(s){return!!s&&"mapValue"in s}function Fx(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[uE])==null?void 0:r.stringValue)===cE}function Gl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return la(s.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Gl(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Gl(s.arrayValue.values[n]);return e}return{...s}}function Gx(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Hx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!th(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gl(n)}setAll(e){let n=Wt.emptyPath(),r={},o=[];e.forEach(((f,g)=>{if(!n.isImmediateParentOf(g)){const y=this.getFieldsMap(n);this.applyChanges(y,r,o),r={},o=[],n=g.popLast()}f?r[g.lastSegment()]=Gl(f):o.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,r,o)}delete(e){const n=this.field(e.popLast());th(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];th(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){la(n,((o,u)=>e[o]=u));for(const o of r)delete e[o]}clone(){return new Fn(Gl(this.value))}}function hE(s){const e=[];return la(s.fields,((n,r)=>{const o=new Wt([n]);if(th(r)){const u=hE(r.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new ai(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,n,r,o,u,f,g){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=u,this.data=f,this.documentState=g}static newInvalidDocument(e){return new rn(e,0,Se.min(),Se.min(),Se.min(),Fn.empty(),0)}static newFoundDocument(e,n,r,o){return new rn(e,1,n,Se.min(),r,o,0)}static newNoDocument(e,n){return new rn(e,2,n,Se.min(),Se.min(),Fn.empty(),0)}static newUnknownDocument(e,n){return new rn(e,3,n,Se.min(),Se.min(),Fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n){this.position=e,this.inclusive=n}}function o_(s,e,n){let r=0;for(let o=0;o<s.position.length;o++){const u=e[o],f=s.position[o];if(u.field.isKeyField()?r=Ee.comparator(Ee.fromName(f.referenceValue),n.key):r=vo(f,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function l_(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!zi(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n="asc"){this.field=e,this.dir=n}}function Qx(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{}class Lt extends fE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Kx(e,n,r):n==="array-contains"?new Jx(e,r):n==="in"?new Zx(e,r):n==="not-in"?new Wx(e,r):n==="array-contains-any"?new eR(e,r):new Lt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new $x(e,r):new Xx(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(vo(n,this.value)):n!==null&&gr(this.value)===gr(n)&&this.matchesComparison(vo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ui extends fE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ui(e,n)}matches(e){return dE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dE(s){return s.op==="and"}function mE(s){return Yx(s)&&dE(s)}function Yx(s){for(const e of s.filters)if(e instanceof ui)return!1;return!0}function Am(s){if(s instanceof Lt)return s.field.canonicalString()+s.op.toString()+_o(s.value);if(mE(s))return s.filters.map((e=>Am(e))).join(",");{const e=s.filters.map((n=>Am(n))).join(",");return`${s.op}(${e})`}}function gE(s,e){return s instanceof Lt?(function(r,o){return o instanceof Lt&&r.op===o.op&&r.field.isEqual(o.field)&&zi(r.value,o.value)})(s,e):s instanceof ui?(function(r,o){return o instanceof ui&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,f,g)=>u&&gE(f,o.filters[g])),!0):!1})(s,e):void Te(19439)}function pE(s){return s instanceof Lt?(function(n){return`${n.field.canonicalString()} ${n.op} ${_o(n.value)}`})(s):s instanceof ui?(function(n){return n.op.toString()+" {"+n.getFilters().map(pE).join(" ,")+"}"})(s):"Filter"}class Kx extends Lt{constructor(e,n,r){super(e,n,r),this.key=Ee.fromName(r.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class $x extends Lt{constructor(e,n){super(e,"in",n),this.keys=yE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Xx extends Lt{constructor(e,n){super(e,"not-in",n),this.keys=yE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function yE(s,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>Ee.fromName(r.referenceValue)))}class Jx extends Lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ng(n)&&tu(n.arrayValue,this.value)}}class Zx extends Lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&tu(this.value.arrayValue,n)}}class Wx extends Lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!tu(this.value.arrayValue,n)}}class eR extends Lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ng(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>tu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,n=null,r=[],o=[],u=null,f=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=f,this.endAt=g,this.Te=null}}function u_(s,e=null,n=[],r=[],o=null,u=null,f=null){return new tR(s,e,n,r,o,u,f)}function ig(s){const e=xe(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Am(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Oh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>_o(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>_o(r))).join(",")),e.Te=n}return e.Te}function sg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!Qx(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!gE(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!l_(s.startAt,e.startAt)&&l_(s.endAt,e.endAt)}function xm(s){return Ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n=null,r=[],o=[],u=null,f="F",g=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=f,this.startAt=g,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function nR(s,e,n,r,o,u,f,g){return new No(s,e,n,r,o,u,f,g)}function rg(s){return new No(s)}function c_(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function vE(s){return s.collectionGroup!==null}function Ql(s){const e=xe(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new qt(Wt.comparator);return f.filters.forEach((y=>{y.getFlattenedFilters().forEach((p=>{p.isInequality()&&(g=g.add(p.field))}))})),g})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new nu(u,r))})),n.has(Wt.keyField().canonicalString())||e.Ie.push(new nu(Wt.keyField(),r))}return e.Ie}function ji(s){const e=xe(s);return e.Ee||(e.Ee=iR(e,Ql(s))),e.Ee}function iR(s,e){if(s.limitType==="F")return u_(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new nu(o.field,u)}));const n=s.endAt?new yh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new yh(s.startAt.position,s.startAt.inclusive):null;return u_(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function Rm(s,e){const n=s.filters.concat([e]);return new No(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function vh(s,e,n){return new No(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Vh(s,e){return sg(ji(s),ji(e))&&s.limitType===e.limitType}function _E(s){return`${ig(ji(s))}|lt:${s.limitType}`}function so(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>pE(o))).join(", ")}]`),Oh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>_o(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>_o(o))).join(",")),`Target(${r})`})(ji(s))}; limitType=${s.limitType})`}function jh(s,e){return e.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Ee.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,e)&&(function(r,o){for(const u of Ql(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(f,g,y){const p=o_(f,g,y);return f.inclusive?p<=0:p<0})(r.startAt,Ql(r),o)||r.endAt&&!(function(f,g,y){const p=o_(f,g,y);return f.inclusive?p>=0:p>0})(r.endAt,Ql(r),o))})(s,e)}function sR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function EE(s){return(e,n)=>{let r=!1;for(const o of Ql(s)){const u=rR(o,e,n);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function rR(s,e,n){const r=s.field.isKeyField()?Ee.comparator(e.key,n.key):(function(u,f,g){const y=f.data.field(u),p=g.data.field(u);return y!==null&&p!==null?vo(y,p):Te(42886)})(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Te(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){la(this.inner,((n,r)=>{for(const[o,u]of r)e(o,u)}))}isEmpty(){return iE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=new pt(Ee.comparator);function vs(){return aR}const bE=new pt(Ee.comparator);function Ul(...s){let e=bE;for(const n of s)e=e.insert(n.key,n);return e}function TE(s){let e=bE;return s.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Wr(){return Yl()}function wE(){return Yl()}function Yl(){return new ua((s=>s.toString()),((s,e)=>s.isEqual(e)))}const oR=new pt(Ee.comparator),lR=new qt(Ee.comparator);function Pe(...s){let e=lR;for(const n of s)e=e.add(n);return e}const uR=new qt(Ue);function cR(){return uR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mh(e)?"-0":e}}function SE(s){return{integerValue:""+s}}function hR(s,e){return Ux(e)?SE(e):ag(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this._=void 0}}function fR(s,e,n){return s instanceof iu?(function(o,u){const f={fields:{[aE]:{stringValue:rE},[lE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&tg(u)&&(u=Mh(u)),u&&(f.fields[oE]=u),{mapValue:f}})(n,e):s instanceof su?xE(s,e):s instanceof ru?RE(s,e):(function(o,u){const f=AE(o,u),g=h_(f)+h_(o.Ae);return Sm(f)&&Sm(o.Ae)?SE(g):ag(o.serializer,g)})(s,e)}function dR(s,e,n){return s instanceof su?xE(s,e):s instanceof ru?RE(s,e):n}function AE(s,e){return s instanceof _h?(function(r){return Sm(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class iu extends kh{}class su extends kh{constructor(e){super(),this.elements=e}}function xE(s,e){const n=CE(e);for(const r of s.elements)n.some((o=>zi(o,r)))||n.push(r);return{arrayValue:{values:n}}}class ru extends kh{constructor(e){super(),this.elements=e}}function RE(s,e){let n=CE(e);for(const r of s.elements)n=n.filter((o=>!zi(o,r)));return{arrayValue:{values:n}}}class _h extends kh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function h_(s){return At(s.integerValue||s.doubleValue)}function CE(s){return ng(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n){this.field=e,this.transform=n}}function gR(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof su&&o instanceof su||r instanceof ru&&o instanceof ru?yo(r.elements,o.elements,zi):r instanceof _h&&o instanceof _h?zi(r.Ae,o.Ae):r instanceof iu&&o instanceof iu})(s.transform,e.transform)}class pR{constructor(e,n){this.version=e,this.transformResults=n}}class li{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new li}static exists(e){return new li(void 0,e)}static updateTime(e){return new li(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Lh{}function IE(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new og(s.key,li.none()):new du(s.key,s.data,li.none());{const n=s.data,r=Fn.empty();let o=new qt(Wt.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?r.delete(u):r.set(u,f),o=o.add(u)}return new ca(s.key,r,new ai(o.toArray()),li.none())}}function yR(s,e,n){s instanceof du?(function(o,u,f){const g=o.value.clone(),y=d_(o.fieldTransforms,u,f.transformResults);g.setAll(y),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(s,e,n):s instanceof ca?(function(o,u,f){if(!nh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const g=d_(o.fieldTransforms,u,f.transformResults),y=u.data;y.setAll(NE(o)),y.setAll(g),u.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(s,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Kl(s,e,n,r){return s instanceof du?(function(u,f,g,y){if(!nh(u.precondition,f))return g;const p=u.value.clone(),b=m_(u.fieldTransforms,y,f);return p.setAll(b),f.convertToFoundDocument(f.version,p).setHasLocalMutations(),null})(s,e,n,r):s instanceof ca?(function(u,f,g,y){if(!nh(u.precondition,f))return g;const p=m_(u.fieldTransforms,y,f),b=f.data;return b.setAll(NE(u)),b.setAll(p),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((w=>w.field)))})(s,e,n,r):(function(u,f,g){return nh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g})(s,e,n)}function vR(s,e){let n=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),u=AE(r.transform,o||null);u!=null&&(n===null&&(n=Fn.empty()),n.set(r.field,u))}return n||null}function f_(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&yo(r,o,((u,f)=>gR(u,f)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class du extends Lh{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ca extends Lh{constructor(e,n,r,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function NE(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}})),e}function d_(s,e,n){const r=new Map;$e(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const u=s[o],f=u.transform,g=e.data.field(u.field);r.set(u.field,dR(f,g,n[o]))}return r}function m_(s,e,n){const r=new Map;for(const o of s){const u=o.transform,f=n.data.field(o.field);r.set(o.field,fR(u,f,e))}return r}class og extends Lh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _R extends Lh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&yR(u,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Kl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Kl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=wE();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let g=this.applyToLocalView(f,u.mutatedFields);g=n.has(o.key)?null:g;const y=IE(f,g);y!==null&&r.set(o.key,y),f.isValidDocument()||f.convertToNoDocument(Se.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&yo(this.mutations,e.mutations,((n,r)=>f_(n,r)))&&yo(this.baseMutations,e.baseMutations,((n,r)=>f_(n,r)))}}class lg{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){$e(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return oR})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,r[f].version);return new lg(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Be;function wR(s){switch(s){case J.OK:return Te(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Te(15467,{code:s})}}function DE(s){if(s===void 0)return ps("GRPC error has no .code"),J.UNKNOWN;switch(s){case kt.OK:return J.OK;case kt.CANCELLED:return J.CANCELLED;case kt.UNKNOWN:return J.UNKNOWN;case kt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case kt.INTERNAL:return J.INTERNAL;case kt.UNAVAILABLE:return J.UNAVAILABLE;case kt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case kt.NOT_FOUND:return J.NOT_FOUND;case kt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case kt.ABORTED:return J.ABORTED;case kt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case kt.DATA_LOSS:return J.DATA_LOSS;default:return Te(39323,{code:s})}}(Be=kt||(kt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=new ur([4294967295,4294967295],0);function g_(s){const e=SR().encode(s),n=new Q1;return n.update(e),new Uint8Array(n.digest())}function p_(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ur([n,r],0),new ur([o,u],0)]}class ug{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Pl(`Invalid padding: ${n}`);if(r<0)throw new Pl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Pl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Pl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ur.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(ur.fromNumber(r)));return o.compare(AR)===1&&(o=new ur([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=g_(e),[r,o]=p_(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);if(!this.we(f))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new ug(u,o,n);return r.forEach((g=>f.insert(g))),f}insert(e){if(this.ge===0)return;const n=g_(e),[r,o]=p_(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Pl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n,r,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,mu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Uh(Se.min(),o,new pt(Ue),vs(),Pe())}}class mu{constructor(e,n,r,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new mu(r,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n,r,o){this.be=e,this.removedTargetIds=n,this.key=r,this.De=o}}class OE{constructor(e,n){this.targetId=e,this.Ce=n}}class ME{constructor(e,n,r=en.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class y_{constructor(){this.ve=0,this.Fe=v_(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),n=Pe(),r=Pe();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Te(38017,{changeType:u})}})),new mu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=v_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class xR{constructor(e){this.Ge=e,this.ze=new Map,this.je=vs(),this.Je=Gc(),this.He=Gc(),this.Ye=new pt(Ue)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(xm(u))if(r===0){const f=new Ee(u.path);this.et(n,f,rn.newNoDocument(f,Se.min()))}else $e(r===1,20013,{expectedCount:r});else{const f=this._t(n);if(f!==r){const g=this.ut(e),y=g?this.ct(g,e,f):1;if(y!==0){this.it(n);const p=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=n;let f,g;try{f=mr(r).toUint8Array()}catch(y){if(y instanceof sE)return po("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new ug(f,o,u)}catch(y){return po(y instanceof Pl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.ge===0?null:g}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((u=>{const f=this.Ge.ht(),g=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const g=this.ot(f);if(g){if(u.current&&xm(g.target)){const y=new Ee(g.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,rn.newNoDocument(y,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let r=Pe();this.He.forEach(((u,f)=>{let g=!0;f.forEachWhile((y=>{const p=this.ot(y);return!p||p.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(r=r.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new Uh(e,n,this.Ye,this.je,r);return this.je=vs(),this.Je=Gc(),this.He=Gc(),this.Ye=new pt(Ue),o}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new y_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new qt(Ue),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new qt(Ue),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ce("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new y_),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Gc(){return new pt(Ee.comparator)}function v_(){return new pt(Ee.comparator)}const RR={asc:"ASCENDING",desc:"DESCENDING"},CR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IR={and:"AND",or:"OR"};class NR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cm(s,e){return s.useProto3Json||Oh(e)?e:{value:e}}function Eh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VE(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function DR(s,e){return Eh(s,e.toTimestamp())}function ki(s){return $e(!!s,49232),Se.fromTimestamp((function(n){const r=dr(n);return new ct(r.seconds,r.nanos)})(s))}function cg(s,e){return Im(s,e).canonicalString()}function Im(s,e){const n=(function(o){return new ot(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function jE(s){const e=ot.fromString(s);return $e(zE(e),10190,{key:e.toString()}),e}function Nm(s,e){return cg(s.databaseId,e.path)}function sm(s,e){const n=jE(e);if(n.get(1)!==s.databaseId.projectId)throw new oe(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new oe(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Ee(LE(n))}function kE(s,e){return cg(s.databaseId,e)}function OR(s){const e=jE(s);return e.length===4?ot.emptyPath():LE(e)}function Dm(s){return new ot(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function LE(s){return $e(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function __(s,e,n){return{name:Nm(s,e),fields:n.value.mapValue.fields}}function MR(s,e){let n;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Te(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,b){return p.useProto3Json?($e(b===void 0||typeof b=="string",58123),en.fromBase64String(b||"")):($e(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),en.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),f=e.targetChange.cause,g=f&&(function(p){const b=p.code===void 0?J.UNKNOWN:DE(p.code);return new oe(b,p.message||"")})(f);n=new ME(r,o,u,g||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=sm(s,r.document.name),u=ki(r.document.updateTime),f=r.document.createTime?ki(r.document.createTime):Se.min(),g=new Fn({mapValue:{fields:r.document.fields}}),y=rn.newFoundDocument(o,u,f,g),p=r.targetIds||[],b=r.removedTargetIds||[];n=new ih(p,b,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=sm(s,r.document),u=r.readTime?ki(r.readTime):Se.min(),f=rn.newNoDocument(o,u),g=r.removedTargetIds||[];n=new ih([],g,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=sm(s,r.document),u=r.removedTargetIds||[];n=new ih([],u,o,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,f=new TR(o,u),g=r.targetId;n=new OE(g,f)}}return n}function VR(s,e){let n;if(e instanceof du)n={update:__(s,e.key,e.value)};else if(e instanceof og)n={delete:Nm(s,e.key)};else if(e instanceof ca)n={update:__(s,e.key,e.data),updateMask:HR(e.fieldMask)};else{if(!(e instanceof _R))return Te(16599,{Vt:e.type});n={verify:Nm(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(u,f){const g=f.transform;if(g instanceof iu)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof su)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof ru)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof _h)return{fieldPath:f.field.canonicalString(),increment:g.Ae};throw Te(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:DR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Te(27497)})(s,e.precondition)),n}function jR(s,e){return s&&s.length>0?($e(e!==void 0,14353),s.map((n=>(function(o,u){let f=o.updateTime?ki(o.updateTime):ki(u);return f.isEqual(Se.min())&&(f=ki(u)),new pR(f,o.transformResults||[])})(n,e)))):[]}function kR(s,e){return{documents:[kE(s,e.path)]}}function LR(s,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=kE(s,o);const u=(function(p){if(p.length!==0)return PE(ui.create(p,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(p){if(p.length!==0)return p.map((b=>(function(x){return{field:ro(x.field),direction:zR(x.dir)}})(b)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const g=Cm(s,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:o}}function UR(s){let e=OR(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){$e(r===1,65062);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];n.where&&(u=(function(w){const x=UE(w);return x instanceof ui&&mE(x)?x.getFilters():[x]})(n.where));let f=[];n.orderBy&&(f=(function(w){return w.map((x=>(function(K){return new nu(ao(K.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(K.direction))})(x)))})(n.orderBy));let g=null;n.limit&&(g=(function(w){let x;return x=typeof w=="object"?w.value:w,Oh(x)?null:x})(n.limit));let y=null;n.startAt&&(y=(function(w){const x=!!w.before,q=w.values||[];return new yh(q,x)})(n.startAt));let p=null;return n.endAt&&(p=(function(w){const x=!w.before,q=w.values||[];return new yh(q,x)})(n.endAt)),nR(e,o,f,u,g,"F",y,p)}function PR(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function UE(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ao(n.unaryFilter.field);return Lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=ao(n.unaryFilter.field);return Lt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=ao(n.unaryFilter.field);return Lt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=ao(n.unaryFilter.field);return Lt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Lt.create(ao(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return ui.create(n.compositeFilter.filters.map((r=>UE(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(n.compositeFilter.op))})(s):Te(30097,{filter:s})}function zR(s){return RR[s]}function qR(s){return CR[s]}function BR(s){return IR[s]}function ro(s){return{fieldPath:s.canonicalString()}}function ao(s){return Wt.fromServerFormat(s.fieldPath)}function PE(s){return s instanceof Lt?(function(n){if(n.op==="=="){if(a_(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NAN"}};if(r_(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(a_(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NOT_NAN"}};if(r_(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ro(n.field),op:qR(n.op),value:n.value}}})(s):s instanceof ui?(function(n){const r=n.getFilters().map((o=>PE(o)));return r.length===1?r[0]:{compositeFilter:{op:BR(n.op),filters:r}}})(s):Te(54877,{filter:s})}function HR(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function zE(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n,r,o,u=Se.min(),f=Se.min(),g=en.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(e){return new rr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e){this.yt=e}}function GR(s){const e=UR({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?vh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this.Cn=new YR}addToCollectionParentIndex(e,n){return this.Cn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(fr.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(fr.min())}updateCollectionGroup(e,n,r){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class YR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new qt(ot.comparator),u=!o.has(r);return this.index[n]=o.add(r),u}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new qt(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qE=41943040;class bn{static withCacheSize(e){return new bn(e,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(qE,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Eo(0)}static cr(){return new Eo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="LruGarbageCollector",KR=1048576;function T_([s,e],[n,r]){const o=Ue(s,n);return o===0?Ue(e,r):o}class $R{constructor(e){this.Ir=e,this.buffer=new qt(T_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();T_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class XR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ce(b_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Io(n)?ce(b_,"Ignoring IndexedDB error during garbage collection: ",n):await Co(n)}await this.Vr(3e5)}))}}class JR{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return W.resolve(Dh.ce);const r=new $R(n);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(E_)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),E_):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,o,u,f,g,y,p;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,f=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(r=w,g=Date.now(),this.removeTargets(e,r,n)))).next((w=>(u=w,y=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(p=Date.now(),io()<=Le.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-b}ms
	Determined least recently used ${o} in `+(g-f)+`ms
	Removed ${u} targets in `+(y-g)+`ms
	Removed ${w} documents in `+(p-y)+`ms
Total Duration: ${p-b}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w}))))}}function ZR(s,e){return new JR(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(){this.changes=new ua((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?W.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&Kl(r.mutation,o,ai.empty(),ct.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Pe()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Pe()){const o=Wr();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((u=>{let f=Ul();return u.forEach(((g,y)=>{f=f.insert(g,y.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const r=Wr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Pe())))}populateOverlays(e,n,r){const o=[];return r.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,g)=>{n.set(f,g)}))}))}computeViews(e,n,r,o){let u=vs();const f=Yl(),g=(function(){return Yl()})();return n.forEach(((y,p)=>{const b=r.get(p.key);o.has(p.key)&&(b===void 0||b.mutation instanceof ca)?u=u.insert(p.key,p):b!==void 0?(f.set(p.key,b.mutation.getFieldMask()),Kl(b.mutation,p,b.mutation.getFieldMask(),ct.now())):f.set(p.key,ai.empty())})),this.recalculateAndSaveOverlays(e,u).next((y=>(y.forEach(((p,b)=>f.set(p,b))),n.forEach(((p,b)=>g.set(p,new eC(b,f.get(p)??null)))),g)))}recalculateAndSaveOverlays(e,n){const r=Yl();let o=new pt(((f,g)=>f-g)),u=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const g of f)g.keys().forEach((y=>{const p=n.get(y);if(p===null)return;let b=r.get(y)||ai.empty();b=g.applyToLocalView(p,b),r.set(y,b);const w=(o.get(g.batchId)||Pe()).add(y);o=o.insert(g.batchId,w)}))})).next((()=>{const f=[],g=o.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),p=y.key,b=y.value,w=wE();b.forEach((x=>{if(!u.has(x)){const q=IE(n.get(x),r.get(x));q!==null&&w.set(x,q),u=u.add(x)}})),f.push(this.documentOverlayCache.saveOverlays(e,p,w))}return W.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return(function(f){return Ee.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-u.size):W.resolve(Wr());let g=Zl,y=u;return f.next((p=>W.forEach(p,((b,w)=>(g<w.largestBatchId&&(g=w.largestBatchId),u.get(b)?W.resolve():this.remoteDocumentCache.getEntry(e,b).next((x=>{y=y.insert(b,x)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,y,p,Pe()))).next((b=>({batchId:g,changes:TE(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ee(n)).next((r=>{let o=Ul();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const u=n.collectionGroup;let f=Ul();return this.indexManager.getCollectionParents(e,u).next((g=>W.forEach(g,(y=>{const p=(function(w,x){return new No(x,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,r,o).next((b=>{b.forEach(((w,x)=>{f=f.insert(w,x)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,u,o)))).next((f=>{u.forEach(((y,p)=>{const b=p.getKey();f.get(b)===null&&(f=f.insert(b,rn.newInvalidDocument(b)))}));let g=Ul();return f.forEach(((y,p)=>{const b=u.get(y);b!==void 0&&Kl(b.mutation,p,ai.empty(),ct.now()),jh(n,p)&&(g=g.insert(y,p))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return W.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:ki(o.createTime)}})(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:GR(o.bundledQuery),readTime:ki(o.readTime)}})(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.overlays=new pt(Ee.comparator),this.qr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Wr();return W.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,u)=>{this.St(e,n,u)})),W.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),W.resolve()}getOverlaysForCollection(e,n,r){const o=Wr(),u=n.length+1,f=new Ee(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const y=g.getNext().value,p=y.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===u&&y.largestBatchId>r&&o.set(y.getKey(),y)}return W.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let u=new pt(((p,b)=>p-b));const f=this.overlays.getIterator();for(;f.hasNext();){const p=f.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let b=u.get(p.largestBatchId);b===null&&(b=Wr(),u=u.insert(p.largestBatchId,b)),b.set(p.getKey(),p)}}const g=Wr(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((p,b)=>g.set(p,b))),!(g.size()>=o)););return W.resolve(g)}St(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new bR(n,r));let u=this.qr.get(n);u===void 0&&(u=Pe(),this.qr.set(n,u)),this.qr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(){this.Qr=new qt(Gt.$r),this.Ur=new qt(Gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Gt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Gt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Ee(new ot([])),r=new Gt(n,e),o=new Gt(n,e+1),u=[];return this.Ur.forEachInRange([r,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ee(new ot([])),r=new Gt(n,e),o=new Gt(n,e+1);let u=Pe();return this.Ur.forEachInRange([r,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new Gt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Gt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ee.comparator(e.key,n.key)||Ue(e.Yr,n.Yr)}static Kr(e,n){return Ue(e.Yr,n.Yr)||Ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qt(Gt.$r)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new ER(u,n,r,o);this.mutationQueue.push(f);for(const g of o)this.Zr=this.Zr.add(new Gt(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return W.resolve(f)}lookupMutationBatch(e,n){return W.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.ei(r),u=o<0?0:o;return W.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?eg:this.tr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Gt(n,0),o=new Gt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(f=>{const g=this.Xr(f.Yr);u.push(g)})),W.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qt(Ue);return n.forEach((o=>{const u=new Gt(o,0),f=new Gt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(g=>{r=r.add(g.Yr)}))})),W.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let u=r;Ee.isDocumentKey(u)||(u=u.child(""));const f=new Gt(new Ee(u),0);let g=new qt(Ue);return this.Zr.forEachWhile((y=>{const p=y.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(g=g.add(y.Yr)),!0)}),f),W.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){$e(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return W.forEach(n.mutations,(o=>{const u=new Gt(o.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Gt(n,0),o=this.Zr.firstAfterOrEqual(r);return W.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e){this.ri=e,this.docs=(function(){return new pt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return W.resolve(r?r.document.mutableCopy():rn.newInvalidDocument(n))}getEntries(e,n){let r=vs();return n.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():rn.newInvalidDocument(o))})),W.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let u=vs();const f=n.path,g=new Ee(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:p,value:{document:b}}=y.getNext();if(!f.isPrefixOf(p.path))break;p.path.length>f.length+1||Vx(Mx(b),r)<=0||(o.has(b.key)||jh(n,b))&&(u=u.insert(b.key,b.mutableCopy()))}return W.resolve(u)}getAllFromCollectionGroup(e,n,r,o){Te(9500)}ii(e,n){return W.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new oC(this)}getSize(e){return W.resolve(this.size)}}class oC extends WR{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),W.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.persistence=e,this.si=new ua((n=>ig(n)),sg),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new hg,this.targetCount=0,this.ai=Eo.ur()}forEachTarget(e,n){return this.si.forEach(((r,o)=>n(o))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),W.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Eo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Pr(n),W.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,r){let o=0;const u=[];return this.si.forEach(((f,g)=>{g.sequenceNumber<=n&&r.get(g.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),W.waitFor(u).next((()=>o))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return W.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),W.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),W.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return W.resolve(r)}containsKey(e,n){return W.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e,n){this.ui={},this.overlays={},this.ci=new Dh(0),this.li=!1,this.li=!0,this.hi=new sC,this.referenceDelegate=e(this),this.Pi=new lC(this),this.indexManager=new QR,this.remoteDocumentCache=(function(o){return new aC(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new FR(n),this.Ii=new nC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new iC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new rC(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ce("MemoryPersistence","Starting transaction:",e);const o=new uC(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return W.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class uC extends kx{constructor(e){super(),this.currentSequenceNumber=e}}class fg{constructor(e){this.persistence=e,this.Ri=new hg,this.Vi=null}static mi(e){return new fg(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),W.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),W.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,(r=>{const o=Ee.fromPath(r);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Se.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return W.or([()=>W.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class bh{constructor(e,n){this.persistence=e,this.pi=new ua((r=>Px(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=ZR(this,n)}static mi(e,n){return new bh(e,n)}Ei(){}di(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return W.forEach(this.pi,((r,o)=>this.br(e,r,o).next((u=>u?W.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,n).next((g=>{g||(r++,u.removeEntry(f,Se.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=eh(e.data.value)),n}br(e,n,r){return W.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return W.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=o}static As(e,n){let r=Pe(),o=Pe();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new dg(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Ww()?8:Lx(an())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,o,r).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new cC;return this.Ss(e,n,f).next((g=>{if(u.result=g,this.Vs)return this.bs(e,n,f,g.size)}))})).next((()=>u.result))}bs(e,n,r,o){return r.documentReadCount<this.fs?(io()<=Le.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",so(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):(io()<=Le.DEBUG&&ce("QueryEngine","Query:",so(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(io()<=Le.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",so(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ji(n))):W.resolve())}ys(e,n){if(c_(n))return W.resolve(null);let r=ji(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=vh(n,null,"F"),r=ji(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const f=Pe(...u);return this.ps.getDocuments(e,f).next((g=>this.indexManager.getMinOffset(e,r).next((y=>{const p=this.Ds(n,g);return this.Cs(n,p,f,y.readTime)?this.ys(e,vh(n,null,"F")):this.vs(e,p,n,y)}))))})))))}ws(e,n,r,o){return c_(n)||o.isEqual(Se.min())?W.resolve(null):this.ps.getDocuments(e,r).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,r,o)?W.resolve(null):(io()<=Le.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),so(n)),this.vs(e,f,n,Ox(o,Zl)).next((g=>g)))}))}Ds(e,n){let r=new qt(EE(e));return n.forEach(((o,u)=>{jh(e,u)&&(r=r.add(u))})),r}Cs(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,r){return io()<=Le.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",so(n)),this.ps.getDocumentsMatchingQuery(e,n,fr.min(),r)}vs(e,n,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="LocalStore",fC=3e8;class dC{constructor(e,n,r,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new pt(Ue),this.xs=new ua((u=>ig(u)),sg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function mC(s,e,n,r){return new dC(s,e,n,r)}async function HE(s,e){const n=xe(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((u=>{const f=[],g=[];let y=Pe();for(const p of o){f.push(p.batchId);for(const b of p.mutations)y=y.add(b.key)}for(const p of u){g.push(p.batchId);for(const b of p.mutations)y=y.add(b.key)}return n.localDocuments.getDocuments(r,y).next((p=>({Ls:p,removedBatchIds:f,addedBatchIds:g})))}))}))}function gC(s,e){const n=xe(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,y,p,b){const w=p.batch,x=w.keys();let q=W.resolve();return x.forEach((K=>{q=q.next((()=>b.getEntry(y,K))).next((M=>{const k=p.docVersions.get(K);$e(k!==null,48541),M.version.compareTo(k)<0&&(w.applyToRemoteDocument(M,p),M.isValidDocument()&&(M.setReadTime(p.commitVersion),b.addEntry(M)))}))})),q.next((()=>g.mutationQueue.removeMutationBatch(y,w)))})(n,r,e,u).next((()=>u.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(g){let y=Pe();for(let p=0;p<g.mutationResults.length;++p)g.mutationResults[p].transformResults.length>0&&(y=y.add(g.batch.mutations[p].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function FE(s){const e=xe(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function pC(s,e){const n=xe(s),r=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((b,w)=>{const x=o.get(w);if(!x)return;g.push(n.Pi.removeMatchingKeys(u,b.removedDocuments,w).next((()=>n.Pi.addMatchingKeys(u,b.addedDocuments,w))));let q=x.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?q=q.withResumeToken(en.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):b.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(b.resumeToken,r)),o=o.insert(w,q),(function(M,k,re){return M.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=fC?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0})(x,q,b)&&g.push(n.Pi.updateTargetData(u,q))}));let y=vs(),p=Pe();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,b))})),g.push(yC(u,f,e.documentUpdates).next((b=>{y=b.ks,p=b.qs}))),!r.isEqual(Se.min())){const b=n.Pi.getLastRemoteSnapshotVersion(u).next((w=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));g.push(b)}return W.waitFor(g).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,y,p))).next((()=>y))})).then((u=>(n.Ms=o,u)))}function yC(s,e,n){let r=Pe(),o=Pe();return n.forEach((u=>r=r.add(u))),e.getEntries(s,r).next((u=>{let f=vs();return n.forEach(((g,y)=>{const p=u.get(g);y.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(g)),y.isNoDocument()&&y.version.isEqual(Se.min())?(e.removeEntry(g,y.readTime),f=f.insert(g,y)):!p.isValidDocument()||y.version.compareTo(p.version)>0||y.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(y),f=f.insert(g,y)):ce(mg,"Ignoring outdated watch update for ",g,". Current version:",p.version," Watch version:",y.version)})),{ks:f,qs:o}}))}function vC(s,e){const n=xe(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=eg),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function _C(s,e){const n=xe(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.Pi.getTargetData(r,e).next((u=>u?(o=u,W.resolve(o)):n.Pi.allocateTargetId(r).next((f=>(o=new rr(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Om(s,e,n){const r=xe(s),o=r.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,(f=>r.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!Io(f))throw f;ce(mg,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function w_(s,e,n){const r=xe(s);let o=Se.min(),u=Pe();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(y,p,b){const w=xe(y),x=w.xs.get(b);return x!==void 0?W.resolve(w.Ms.get(x)):w.Pi.getTargetData(p,b)})(r,f,ji(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,g.targetId).next((y=>{u=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,e,n?o:Se.min(),n?u:Pe()))).next((g=>(EC(r,sR(e),g),{documents:g,Qs:u})))))}function EC(s,e,n){let r=s.Os.get(e)||Se.min();n.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(e,r)}class S_{constructor(){this.activeTargetIds=cR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bC{constructor(){this.Mo=new S_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new S_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="ConnectivityMonitor";class x_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ce(A_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ce(A_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc=null;function Mm(){return Qc===null?Qc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qc++,"0x"+Qc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm="RestConnection",wC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===gh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,n,r,o,u){const f=Mm(),g=this.zo(e,n.toUriEncodedString());ce(rm,`Sending RPC '${e}' ${f}:`,g,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,u);const{host:p}=new URL(g),b=So(p);return this.Jo(e,g,y,r,b).then((w=>(ce(rm,`Received RPC '${e}' ${f}: `,w),w)),(w=>{throw po(rm,`RPC '${e}' ${f} failed with error: `,w,"url: ",g,"request:",r),w}))}Ho(e,n,r,o,u,f){return this.Go(e,n,r,o,u)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ro})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),r&&r.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const r=wC[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class xC extends SC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,o,u){const f=Mm();return new Promise(((g,y)=>{const p=new Y1;p.setWithCredentials(!0),p.listenOnce(K1.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Wc.NO_ERROR:const w=p.getResponseJson();ce(nn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(w)),g(w);break;case Wc.TIMEOUT:ce(nn,`RPC '${e}' ${f} timed out`),y(new oe(J.DEADLINE_EXCEEDED,"Request time out"));break;case Wc.HTTP_ERROR:const x=p.getStatus();if(ce(nn,`RPC '${e}' ${f} failed with status:`,x,"response text:",p.getResponseText()),x>0){let q=p.getResponseJson();Array.isArray(q)&&(q=q[0]);const K=q==null?void 0:q.error;if(K&&K.status&&K.message){const M=(function(re){const ue=re.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(ue)>=0?ue:J.UNKNOWN})(K.status);y(new oe(M,K.message))}else y(new oe(J.UNKNOWN,"Server responded with status "+p.getStatus()))}else y(new oe(J.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:f,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ce(nn,`RPC '${e}' ${f} completed.`)}}));const b=JSON.stringify(o);ce(nn,`RPC '${e}' ${f} sending request:`,o),p.send(n,"POST",b,r,15)}))}T_(e,n,r){const o=Mm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=J1(),g=X1(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(y.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,r),y.encodeInitMessageHeaders=!0;const b=u.join("");ce(nn,`Creating RPC '${e}' stream ${o}: ${b}`,y);const w=f.createWebChannel(b,y);this.I_(w);let x=!1,q=!1;const K=new AC({Yo:k=>{q?ce(nn,`Not sending because RPC '${e}' stream ${o} is closed:`,k):(x||(ce(nn,`Opening RPC '${e}' stream ${o} transport.`),w.open(),x=!0),ce(nn,`RPC '${e}' stream ${o} sending:`,k),w.send(k))},Zo:()=>w.close()}),M=(k,re,ue)=>{k.listen(re,(le=>{try{ue(le)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return M(w,Ll.EventType.OPEN,(()=>{q||(ce(nn,`RPC '${e}' stream ${o} transport opened.`),K.o_())})),M(w,Ll.EventType.CLOSE,(()=>{q||(q=!0,ce(nn,`RPC '${e}' stream ${o} transport closed`),K.a_(),this.E_(w))})),M(w,Ll.EventType.ERROR,(k=>{q||(q=!0,po(nn,`RPC '${e}' stream ${o} transport errored. Name:`,k.name,"Message:",k.message),K.a_(new oe(J.UNAVAILABLE,"The operation could not be completed")))})),M(w,Ll.EventType.MESSAGE,(k=>{var re;if(!q){const ue=k.data[0];$e(!!ue,16349);const le=ue,ie=(le==null?void 0:le.error)||((re=le[0])==null?void 0:re.error);if(ie){ce(nn,`RPC '${e}' stream ${o} received error:`,ie);const ye=ie.status;let me=(function(C){const O=kt[C];if(O!==void 0)return DE(O)})(ye),R=ie.message;me===void 0&&(me=J.INTERNAL,R="Unknown error status: "+ye+" with message "+ie.message),q=!0,K.a_(new oe(me,R)),w.close()}else ce(nn,`RPC '${e}' stream ${o} received:`,ue),K.u_(ue)}})),M(g,$1.STAT_EVENT,(k=>{k.stat===bm.PROXY?ce(nn,`RPC '${e}' stream ${o} detected buffering proxy`):k.stat===bm.NOPROXY&&ce(nn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{K.__()}),0),K}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function am(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(s){return new NR(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n,r=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&ce("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_="PersistentStream";class QE{constructor(e,n,r,o,u,f,g,y){this.Mi=e,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new GE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(ps(n.toString()),ps("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new oe(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(R_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ce(R_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class RC extends QE{constructor(e,n,r,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=MR(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Se.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Se.min():f.readTime?ki(f.readTime):Se.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Dm(this.serializer),n.addTarget=(function(u,f){let g;const y=f.target;if(g=xm(y)?{documents:kR(u,y)}:{query:LR(u,y).ft},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=VE(u,f.resumeToken);const p=Cm(u,f.expectedCount);p!==null&&(g.expectedCount=p)}else if(f.snapshotVersion.compareTo(Se.min())>0){g.readTime=Eh(u,f.snapshotVersion.toTimestamp());const p=Cm(u,f.expectedCount);p!==null&&(g.expectedCount=p)}return g})(this.serializer,e);const r=PR(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Dm(this.serializer),n.removeTarget=e,this.q_(n)}}class CC extends QE{constructor(e,n,r,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=jR(e.writeResults,e.commitTime),r=ki(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Dm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>VR(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{}class NC extends IC{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new oe(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,Im(n,r),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new oe(J.UNKNOWN,u.toString())}))}Ho(e,n,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,g])=>this.connection.Ho(e,Im(n,r),o,f,g,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new oe(J.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class DC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ps(n),this.aa=!1):ce("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa="RemoteStore";class OC{constructor(e,n,r,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{ha(this)&&(ce(oa,"Restarting streams for network reachability change."),await(async function(y){const p=xe(y);p.Ea.add(4),await gu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await zh(p)})(this))}))})),this.Ra=new DC(r,o)}}async function zh(s){if(ha(s))for(const e of s.da)await e(!0)}async function gu(s){for(const e of s.da)await e(!1)}function YE(s,e){const n=xe(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),vg(n)?yg(n):Do(n).O_()&&pg(n,e))}function gg(s,e){const n=xe(s),r=Do(n);n.Ia.delete(e),r.O_()&&KE(n,e),n.Ia.size===0&&(r.O_()?r.L_():ha(n)&&n.Ra.set("Unknown"))}function pg(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Do(s).Y_(e)}function KE(s,e){s.Va.Ue(e),Do(s).Z_(e)}function yg(s){s.Va=new xR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Do(s).start(),s.Ra.ua()}function vg(s){return ha(s)&&!Do(s).x_()&&s.Ia.size>0}function ha(s){return xe(s).Ea.size===0}function $E(s){s.Va=void 0}async function MC(s){s.Ra.set("Online")}async function VC(s){s.Ia.forEach(((e,n)=>{pg(s,e)}))}async function jC(s,e){$E(s),vg(s)?(s.Ra.ha(e),yg(s)):s.Ra.set("Unknown")}async function kC(s,e,n){if(s.Ra.set("Online"),e instanceof ME&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,f),o.Ia.delete(g),o.Va.removeTarget(g))})(s,e)}catch(r){ce(oa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Th(s,r)}else if(e instanceof ih?s.Va.Ze(e):e instanceof OE?s.Va.st(e):s.Va.tt(e),!n.isEqual(Se.min()))try{const r=await FE(s.localStore);n.compareTo(r)>=0&&await(function(u,f){const g=u.Va.Tt(f);return g.targetChanges.forEach(((y,p)=>{if(y.resumeToken.approximateByteSize()>0){const b=u.Ia.get(p);b&&u.Ia.set(p,b.withResumeToken(y.resumeToken,f))}})),g.targetMismatches.forEach(((y,p)=>{const b=u.Ia.get(y);if(!b)return;u.Ia.set(y,b.withResumeToken(en.EMPTY_BYTE_STRING,b.snapshotVersion)),KE(u,y);const w=new rr(b.target,y,p,b.sequenceNumber);pg(u,w)})),u.remoteSyncer.applyRemoteEvent(g)})(s,n)}catch(r){ce(oa,"Failed to raise snapshot:",r),await Th(s,r)}}async function Th(s,e,n){if(!Io(e))throw e;s.Ea.add(1),await gu(s),s.Ra.set("Offline"),n||(n=()=>FE(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ce(oa,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await zh(s)}))}function XE(s,e){return e().catch((n=>Th(s,n,e)))}async function qh(s){const e=xe(s),n=pr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:eg;for(;LC(e);)try{const o=await vC(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,UC(e,o)}catch(o){await Th(e,o)}JE(e)&&ZE(e)}function LC(s){return ha(s)&&s.Ta.length<10}function UC(s,e){s.Ta.push(e);const n=pr(s);n.O_()&&n.X_&&n.ea(e.mutations)}function JE(s){return ha(s)&&!pr(s).x_()&&s.Ta.length>0}function ZE(s){pr(s).start()}async function PC(s){pr(s).ra()}async function zC(s){const e=pr(s);for(const n of s.Ta)e.ea(n.mutations)}async function qC(s,e,n){const r=s.Ta.shift(),o=lg.from(r,e,n);await XE(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await qh(s)}async function BC(s,e){e&&pr(s).X_&&await(async function(r,o){if((function(f){return wR(f)&&f!==J.ABORTED})(o.code)){const u=r.Ta.shift();pr(r).B_(),await XE(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await qh(r)}})(s,e),JE(s)&&ZE(s)}async function C_(s,e){const n=xe(s);n.asyncQueue.verifyOperationInProgress(),ce(oa,"RemoteStore received new credentials");const r=ha(n);n.Ea.add(3),await gu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await zh(n)}async function HC(s,e){const n=xe(s);e?(n.Ea.delete(2),await zh(n)):e||(n.Ea.add(2),await gu(n),n.Ra.set("Unknown"))}function Do(s){return s.ma||(s.ma=(function(n,r,o){const u=xe(n);return u.sa(),new RC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:MC.bind(null,s),t_:VC.bind(null,s),r_:jC.bind(null,s),H_:kC.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),vg(s)?yg(s):s.Ra.set("Unknown")):(await s.ma.stop(),$E(s))}))),s.ma}function pr(s){return s.fa||(s.fa=(function(n,r,o){const u=xe(n);return u.sa(),new CC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:PC.bind(null,s),r_:BC.bind(null,s),ta:zC.bind(null,s),na:qC.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await qh(s)):(await s.fa.stop(),s.Ta.length>0&&(ce(oa,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,n,r,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new ds,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,u){const f=Date.now()+r,g=new _g(e,n,f,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Eg(s,e){if(ps("AsyncQueue",`${e}: ${s}`),Io(s))return new oe(J.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{static emptySet(e){return new ho(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ee.comparator(n.key,r.key):(n,r)=>Ee.comparator(n.key,r.key),this.keyedMap=Ul(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ho)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ho;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(){this.ga=new pt(Ee.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class bo{constructor(e,n,r,o,u,f,g,y,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,o,u){const f=[];return n.forEach((g=>{f.push({type:0,doc:g})})),new bo(e,n,ho.emptySet(n),f,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class GC{constructor(){this.queries=N_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=xe(n),u=o.queries;o.queries=N_(),u.forEach(((f,g)=>{for(const y of g.Sa)y.onError(r)}))})(this,new oe(J.ABORTED,"Firestore shutting down"))}}function N_(){return new ua((s=>_E(s)),Vh)}async function WE(s,e){const n=xe(s);let r=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(r=2):(u=new FC,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const g=Eg(f,`Initialization of query '${so(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&bg(n)}async function eb(s,e){const n=xe(s),r=e.query;let o=3;const u=n.queries.get(r);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function QC(s,e){const n=xe(s);let r=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const g of f.Sa)g.Fa(o)&&(r=!0);f.wa=o}}r&&bg(n)}function YC(s,e,n){const r=xe(s),o=r.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);r.queries.delete(e)}function bg(s){s.Ca.forEach((e=>{e.next()}))}var Vm,D_;(D_=Vm||(Vm={})).Ma="default",D_.Cache="cache";class tb{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new bo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Vm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e){this.key=e}}class ib{constructor(e){this.key=e}}class KC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=EE(e),this.tu=new ho(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new I_,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,g=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,w)=>{const x=o.get(b),q=jh(this.query,w)?w:null,K=!!x&&this.mutatedKeys.has(x.key),M=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let k=!1;x&&q?x.data.isEqual(q.data)?K!==M&&(r.track({type:3,doc:q}),k=!0):this.su(x,q)||(r.track({type:2,doc:q}),k=!0,(y&&this.eu(q,y)>0||p&&this.eu(q,p)<0)&&(g=!0)):!x&&q?(r.track({type:0,doc:q}),k=!0):x&&!q&&(r.track({type:1,doc:x}),k=!0,(y||p)&&(g=!0)),k&&(q?(f=f.add(q),u=M?u.add(b):u.delete(b)):(f=f.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const b=this.query.limitType==="F"?f.last():f.first();f=f.delete(b.key),u=u.delete(b.key),r.track({type:1,doc:b})}return{tu:f,iu:r,Cs:g,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((b,w)=>(function(q,K){const M=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:k})}};return M(q)-M(K)})(b.type,w.type)||this.eu(b.doc,w.doc))),this.ou(r),o=o??!1;const g=n&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,p=y!==this.Za;return this.Za=y,f.length!==0||p?{snapshot:new bo(this.query,e.tu,u,f,e.mutatedKeys,y===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new I_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new ib(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new nb(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return bo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Tg="SyncEngine";class $C{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class XC{constructor(e){this.key=e,this.hu=!1}}class JC{constructor(e,n,r,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new ua((g=>_E(g)),Vh),this.Iu=new Map,this.Eu=new Set,this.du=new pt(Ee.comparator),this.Au=new Map,this.Ru=new hg,this.Vu={},this.mu=new Map,this.fu=Eo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ZC(s,e,n=!0){const r=ub(s);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await sb(r,e,n,!0),o}async function WC(s,e){const n=ub(s);await sb(n,e,!0,!1)}async function sb(s,e,n,r){const o=await _C(s.localStore,ji(e)),u=o.targetId,f=s.sharedClientState.addLocalQueryTarget(u,n);let g;return r&&(g=await eI(s,e,u,f==="current",o.resumeToken)),s.isPrimaryClient&&n&&YE(s.remoteStore,o),g}async function eI(s,e,n,r,o){s.pu=(w,x,q)=>(async function(M,k,re,ue){let le=k.view.ru(re);le.Cs&&(le=await w_(M.localStore,k.query,!1).then((({documents:R})=>k.view.ru(R,le))));const ie=ue&&ue.targetChanges.get(k.targetId),ye=ue&&ue.targetMismatches.get(k.targetId)!=null,me=k.view.applyChanges(le,M.isPrimaryClient,ie,ye);return M_(M,k.targetId,me.au),me.snapshot})(s,w,x,q);const u=await w_(s.localStore,e,!0),f=new KC(e,u.Qs),g=f.ru(u.documents),y=mu.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",o),p=f.applyChanges(g,s.isPrimaryClient,y);M_(s,n,p.au);const b=new $C(e,n,f);return s.Tu.set(e,b),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),p.snapshot}async function tI(s,e,n){const r=xe(s),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((f=>!Vh(f,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Om(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&gg(r.remoteStore,o.targetId),jm(r,o.targetId)})).catch(Co)):(jm(r,o.targetId),await Om(r.localStore,o.targetId,!0))}async function nI(s,e){const n=xe(s),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gg(n.remoteStore,r.targetId))}async function iI(s,e,n){const r=cI(s);try{const o=await(function(f,g){const y=xe(f),p=ct.now(),b=g.reduce(((q,K)=>q.add(K.key)),Pe());let w,x;return y.persistence.runTransaction("Locally write mutations","readwrite",(q=>{let K=vs(),M=Pe();return y.Ns.getEntries(q,b).next((k=>{K=k,K.forEach(((re,ue)=>{ue.isValidDocument()||(M=M.add(re))}))})).next((()=>y.localDocuments.getOverlayedDocuments(q,K))).next((k=>{w=k;const re=[];for(const ue of g){const le=vR(ue,w.get(ue.key).overlayedDocument);le!=null&&re.push(new ca(ue.key,le,hE(le.value.mapValue),li.exists(!0)))}return y.mutationQueue.addMutationBatch(q,p,re,g)})).next((k=>{x=k;const re=k.applyToLocalDocumentSet(w,M);return y.documentOverlayCache.saveOverlays(q,k.batchId,re)}))})).then((()=>({batchId:x.batchId,changes:TE(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(f,g,y){let p=f.Vu[f.currentUser.toKey()];p||(p=new pt(Ue)),p=p.insert(g,y),f.Vu[f.currentUser.toKey()]=p})(r,o.batchId,n),await pu(r,o.changes),await qh(r.remoteStore)}catch(o){const u=Eg(o,"Failed to persist write");n.reject(u)}}async function rb(s,e){const n=xe(s);try{const r=await pC(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&($e(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?$e(f.hu,14607):o.removedDocuments.size>0&&($e(f.hu,42227),f.hu=!1))})),await pu(n,r,e)}catch(r){await Co(r)}}function O_(s,e,n){const r=xe(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((u,f)=>{const g=f.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(f,g){const y=xe(f);y.onlineState=g;let p=!1;y.queries.forEach(((b,w)=>{for(const x of w.Sa)x.va(g)&&(p=!0)})),p&&bg(y)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function sI(s,e,n){const r=xe(s);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),u=o&&o.key;if(u){let f=new pt(Ee.comparator);f=f.insert(u,rn.newNoDocument(u,Se.min()));const g=Pe().add(u),y=new Uh(Se.min(),new Map,new pt(Ue),f,g);await rb(r,y),r.du=r.du.remove(u),r.Au.delete(e),wg(r)}else await Om(r.localStore,e,!1).then((()=>jm(r,e,n))).catch(Co)}async function rI(s,e){const n=xe(s),r=e.batch.batchId;try{const o=await gC(n.localStore,e);ob(n,r,null),ab(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await pu(n,o)}catch(o){await Co(o)}}async function aI(s,e,n){const r=xe(s);try{const o=await(function(f,g){const y=xe(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let b;return y.mutationQueue.lookupMutationBatch(p,g).next((w=>($e(w!==null,37113),b=w.keys(),y.mutationQueue.removeMutationBatch(p,w)))).next((()=>y.mutationQueue.performConsistencyCheck(p))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(p,b,g))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,b))).next((()=>y.localDocuments.getDocuments(p,b)))}))})(r.localStore,e);ob(r,e,n),ab(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await pu(r,o)}catch(o){await Co(o)}}function ab(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function ob(s,e,n){const r=xe(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function jm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||lb(s,r)}))}function lb(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(gg(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),wg(s))}function M_(s,e,n){for(const r of n)r instanceof nb?(s.Ru.addReference(r.key,e),oI(s,r)):r instanceof ib?(ce(Tg,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||lb(s,r.key)):Te(19791,{wu:r})}function oI(s,e){const n=e.key,r=n.path.canonicalString();s.du.get(n)||s.Eu.has(r)||(ce(Tg,"New document in limbo: "+n),s.Eu.add(r),wg(s))}function wg(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Ee(ot.fromString(e)),r=s.fu.next();s.Au.set(r,new XC(n)),s.du=s.du.insert(n,r),YE(s.remoteStore,new rr(ji(rg(n.path)),r,"TargetPurposeLimboResolution",Dh.ce))}}async function pu(s,e,n){const r=xe(s),o=[],u=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((g,y)=>{f.push(r.pu(y,e,n).then((p=>{var b;if((p||n)&&r.isPrimaryClient){const w=p?!p.fromCache:(b=n==null?void 0:n.targetChanges.get(y.targetId))==null?void 0:b.current;r.sharedClientState.updateQueryState(y.targetId,w?"current":"not-current")}if(p){o.push(p);const w=dg.As(y.targetId,p);u.push(w)}})))})),await Promise.all(f),r.Pu.H_(o),await(async function(y,p){const b=xe(y);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>W.forEach(p,(x=>W.forEach(x.Es,(q=>b.persistence.referenceDelegate.addReference(w,x.targetId,q))).next((()=>W.forEach(x.ds,(q=>b.persistence.referenceDelegate.removeReference(w,x.targetId,q)))))))))}catch(w){if(!Io(w))throw w;ce(mg,"Failed to update sequence numbers: "+w)}for(const w of p){const x=w.targetId;if(!w.fromCache){const q=b.Ms.get(x),K=q.snapshotVersion,M=q.withLastLimboFreeSnapshotVersion(K);b.Ms=b.Ms.insert(x,M)}}})(r.localStore,u))}async function lI(s,e){const n=xe(s);if(!n.currentUser.isEqual(e)){ce(Tg,"User change. New user:",e.toKey());const r=await HE(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((g=>{g.forEach((y=>{y.reject(new oe(J.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pu(n,r.Ls)}}function uI(s,e){const n=xe(s),r=n.Au.get(e);if(r&&r.hu)return Pe().add(r.key);{let o=Pe();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const g=n.Tu.get(f);o=o.unionWith(g.view.nu)}return o}}function ub(s){const e=xe(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=rb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sI.bind(null,e),e.Pu.H_=QC.bind(null,e.eventManager),e.Pu.yu=YC.bind(null,e.eventManager),e}function cI(s){const e=xe(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aI.bind(null,e),e}class wh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ph(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return mC(this.persistence,new hC,e.initialUser,this.serializer)}Cu(e){return new BE(fg.mi,this.serializer)}Du(e){return new bC}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wh.provider={build:()=>new wh};class hI extends wh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){$e(this.persistence.referenceDelegate instanceof bh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new XR(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new BE((r=>bh.mi(r,n)),this.serializer)}}class km{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>O_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lI.bind(null,this.syncEngine),await HC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new GC})()}createDatastore(e){const n=Ph(e.databaseInfo.databaseId),r=(function(u){return new xC(u)})(e.databaseInfo);return(function(u,f,g,y){return new NC(u,f,g,y)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,u,f,g){return new OC(r,o,u,f,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>O_(this.syncEngine,n,0)),(function(){return x_.v()?new x_:new TC})())}createSyncEngine(e,n){return(function(o,u,f,g,y,p,b){const w=new JC(o,u,f,g,y,p);return b&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const u=xe(o);ce(oa,"RemoteStore shutting down."),u.Ea.add(5),await gu(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}km.provider={build:()=>new km};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ps("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr="FirestoreClient";class fI{constructor(e,n,r,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=sn.UNAUTHENTICATED,this.clientId=Wm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async f=>{ce(yr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(ce(yr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ds;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Eg(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function om(s,e){s.asyncQueue.verifyOperationInProgress(),ce(yr,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await HE(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function V_(s,e){s.asyncQueue.verifyOperationInProgress();const n=await dI(s);ce(yr,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((r=>C_(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>C_(e.remoteStore,o))),s._onlineComponents=e}async function dI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ce(yr,"Using user provided OfflineComponentProvider");try{await om(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;po("Error using user provided cache. Falling back to memory cache: "+n),await om(s,new wh)}}else ce(yr,"Using default OfflineComponentProvider"),await om(s,new hI(void 0));return s._offlineComponents}async function hb(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ce(yr,"Using user provided OnlineComponentProvider"),await V_(s,s._uninitializedComponentsProvider._online)):(ce(yr,"Using default OnlineComponentProvider"),await V_(s,new km))),s._onlineComponents}function mI(s){return hb(s).then((e=>e.syncEngine))}async function fb(s){const e=await hb(s),n=e.eventManager;return n.onListen=ZC.bind(null,e.syncEngine),n.onUnlisten=tI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=WC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nI.bind(null,e.syncEngine),n}function gI(s,e,n={}){const r=new ds;return s.asyncQueue.enqueueAndForget((async()=>(function(u,f,g,y,p){const b=new cb({next:x=>{b.Nu(),f.enqueueAndForget((()=>eb(u,w)));const q=x.docs.has(g);!q&&x.fromCache?p.reject(new oe(J.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&x.fromCache&&y&&y.source==="server"?p.reject(new oe(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(x)},error:x=>p.reject(x)}),w=new tb(rg(g.path),b,{includeMetadataChanges:!0,qa:!0});return WE(u,w)})(await fb(s),s.asyncQueue,e,n,r))),r.promise}function pI(s,e,n={}){const r=new ds;return s.asyncQueue.enqueueAndForget((async()=>(function(u,f,g,y,p){const b=new cb({next:x=>{b.Nu(),f.enqueueAndForget((()=>eb(u,w))),x.fromCache&&y.source==="server"?p.reject(new oe(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(x)},error:x=>p.reject(x)}),w=new tb(g,b,{includeMetadataChanges:!0,qa:!0});return WE(u,w)})(await fb(s),s.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="firestore.googleapis.com",k_=!0;class L_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mb,this.ssl=k_}else this.host=e.host,this.ssl=e.ssl??k_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KR)throw new oe(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Nx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=db(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new oe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new oe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new oe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bh{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new L_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new L_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Ex;switch(r.type){case"firstParty":return new Sx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=j_.get(n);r&&(ce("ComponentProvider","Removing Datastore"),j_.delete(n),r.terminate())})(this),Promise.resolve()}}function yI(s,e,n,r={}){var p;s=ys(s,Bh);const o=So(e),u=s._getSettings(),f={...u,emulatorOptions:s._getEmulatorOptions()},g=`${e}:${n}`;o&&(o1(`https://${g}`),l1("Firestore",!0)),u.host!==mb&&u.host!==g&&po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...u,host:g,ssl:o,emulatorOptions:r};if(!ia(y,f)&&(s._setSettings(y),r.mockUserToken)){let b,w;if(typeof r.mockUserToken=="string")b=r.mockUserToken,w=sn.MOCK_USER;else{b=Fw(r.mockUserToken,(p=s._app)==null?void 0:p.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new oe(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new sn(x)}s._authCredentials=new bx(new W1(b,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vr(this.firestore,e,this._query)}}class Pt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pt(this.firestore,e,this._key)}toJSON(){return{type:Pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(fu(n,Pt._jsonSchema))return new Pt(e,r||null,new Ee(ot.fromString(n.referencePath)))}}Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:Ut("string",Pt._jsonSchemaVersion),referencePath:Ut("string")};class cr extends vr{constructor(e,n,r){super(e,n,rg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new Ee(e))}withConverter(e){return new cr(this.firestore,e,this._path)}}function xt(s,e,...n){if(s=fn(s),eE("collection","path",e),s instanceof Bh){const r=ot.fromString(e,...n);return Xv(r),new cr(s,null,r)}{if(!(s instanceof Pt||s instanceof cr))throw new oe(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ot.fromString(e,...n));return Xv(r),new cr(s.firestore,null,r)}}function _s(s,e,...n){if(s=fn(s),arguments.length===1&&(e=Wm.newId()),eE("doc","path",e),s instanceof Bh){const r=ot.fromString(e,...n);return $v(r),new Pt(s,null,new Ee(r))}{if(!(s instanceof Pt||s instanceof cr))throw new oe(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ot.fromString(e,...n));return $v(r),new Pt(s.firestore,s instanceof cr?s.converter:null,new Ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="AsyncQueue";class P_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new GE(this,"async_queue_retry"),this._c=()=>{const r=am();r&&ce(U_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=am();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=am();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ds;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Io(e))throw e;ce(U_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ps("INTERNAL UNHANDLED ERROR: ",z_(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=_g.createAndSchedule(this,e,n,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Te(47125,{Pc:z_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function z_(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Oo extends Bh{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new P_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new P_(e),this._firestoreClient=void 0,await e}}}function vI(s,e){const n=typeof s=="object"?s:f1(),r=typeof s=="string"?s:gh,o=qm(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=Bw("firestore");u&&yI(o,...u)}return o}function Sg(s){if(s._terminated)throw new oe(J.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||_I(s),s._firestoreClient}function _I(s){var r,o,u;const e=s._freezeSettings(),n=(function(g,y,p,b){return new Bx(g,y,p,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,db(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator)})(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new fI(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(g){const y=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(y),_online:y}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gn(en.fromBase64String(e))}catch(n){throw new oe(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gn(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fu(e,Gn._jsonSchema))return Gn.fromBase64String(e.bytes)}}Gn._jsonSchemaVersion="firestore/bytes/1.0",Gn._jsonSchema={type:Ut("string",Gn._jsonSchemaVersion),bytes:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new oe(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new oe(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new oe(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Li._jsonSchemaVersion}}static fromJSON(e){if(fu(e,Li._jsonSchema))return new Li(e.latitude,e.longitude)}}Li._jsonSchemaVersion="firestore/geoPoint/1.0",Li._jsonSchema={type:Ut("string",Li._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ui._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fu(e,Ui._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ui(e.vectorValues);throw new oe(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ui._jsonSchemaVersion="firestore/vectorValue/1.0",Ui._jsonSchema={type:Ut("string",Ui._jsonSchemaVersion),vectorValues:Ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=/^__.*__$/;class bI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ca(e,this.data,this.fieldMask,n,this.fieldTransforms):new du(e,this.data,n,this.fieldTransforms)}}function gb(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:s})}}class Rg{constructor(e,n,r,o,u,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Rg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Sh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(gb(this.Ac)&&EI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class TI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ph(e)}Cc(e,n,r,o=!1){return new Rg({Ac:e,methodName:n,Dc:r,path:Wt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cg(s){const e=s._freezeSettings(),n=Ph(s._databaseId);return new TI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function pb(s,e,n,r,o,u={}){const f=s.Cc(u.merge||u.mergeFields?2:0,e,n,o);_b("Data must be an object, but it was:",f,r);const g=yb(r,f);let y,p;if(u.merge)y=new ai(f.fieldMask),p=f.fieldTransforms;else if(u.mergeFields){const b=[];for(const w of u.mergeFields){const x=SI(e,w,n);if(!f.contains(x))throw new oe(J.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);xI(b,x)||b.push(x)}y=new ai(b),p=f.fieldTransforms.filter((w=>y.covers(w.field)))}else y=null,p=f.fieldTransforms;return new bI(new Fn(g),y,p)}class Ig extends xg{_toFieldTransform(e){return new mR(e.path,new iu)}isEqual(e){return e instanceof Ig}}function wI(s,e,n,r=!1){return Ng(n,s.Cc(r?4:3,e))}function Ng(s,e){if(vb(s=fn(s)))return _b("Unsupported field value:",e,s),yb(s,e);if(s instanceof xg)return(function(r,o){if(!gb(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let f=0;for(const g of r){let y=Ng(g,o.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),f++}return{arrayValue:{values:u}}})(s,e)}return(function(r,o){if((r=fn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hR(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=ct.fromDate(r);return{timestampValue:Eh(o.serializer,u)}}if(r instanceof ct){const u=new ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Eh(o.serializer,u)}}if(r instanceof Li)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gn)return{bytesValue:VE(o.serializer,r._byteString)};if(r instanceof Pt){const u=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:cg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Ui)return(function(f,g){return{mapValue:{fields:{[uE]:{stringValue:cE},[ph]:{arrayValue:{values:f.toArray().map((p=>{if(typeof p!="number")throw g.Sc("VectorValues must only contain numeric values.");return ag(g.serializer,p)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Nh(r)}`)})(s,e)}function yb(s,e){const n={};return iE(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):la(s,((r,o)=>{const u=Ng(o,e.mc(r));u!=null&&(n[r]=u)})),{mapValue:{fields:n}}}function vb(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ct||s instanceof Li||s instanceof Gn||s instanceof Pt||s instanceof xg||s instanceof Ui)}function _b(s,e,n){if(!vb(n)||!tE(n)){const r=Nh(n);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function SI(s,e,n){if((e=fn(e))instanceof Ag)return e._internalPath;if(typeof e=="string")return Eb(s,e);throw Sh("Field path arguments must be of type string or ",s,!1,void 0,n)}const AI=new RegExp("[~\\*/\\[\\]]");function Eb(s,e,n){if(e.search(AI)>=0)throw Sh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Ag(...e.split("."))._internalPath}catch{throw Sh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Sh(s,e,n,r,o){const u=r&&!r.isEmpty(),f=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(u||f)&&(y+=" (found",u&&(y+=` in field ${r}`),f&&(y+=` in document ${o}`),y+=")"),new oe(J.INVALID_ARGUMENT,g+s+y)}function xI(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,n,r,o,u){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class RI extends bb{data(){return super.data()}}function Hh(s,e){return typeof e=="string"?Eb(s,e):e instanceof Ag?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new oe(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dg{}class Og extends Dg{}function on(s,e,...n){let r=[];e instanceof Dg&&r.push(e),r=r.concat(n),(function(u){const f=u.filter((y=>y instanceof Mg)).length,g=u.filter((y=>y instanceof Fh)).length;if(f>1||f>0&&g>0)throw new oe(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class Fh extends Og{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Fh(e,n,r)}_apply(e){const n=this._parse(e);return Tb(e._query,n),new vr(e.firestore,e.converter,Rm(e._query,n))}_parse(e){const n=Cg(e.firestore);return(function(u,f,g,y,p,b,w){let x;if(p.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new oe(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){B_(w,b);const K=[];for(const M of w)K.push(q_(y,u,M));x={arrayValue:{values:K}}}else x=q_(y,u,w)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||B_(w,b),x=wI(g,f,w,b==="in"||b==="not-in");return Lt.create(p,b,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ln(s,e,n){const r=e,o=Hh("where",s);return Fh._create(o,r,n)}class Mg extends Dg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Mg(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ui.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let f=o;const g=u.getFlattenedFilters();for(const y of g)Tb(f,y),f=Rm(f,y)})(e._query,n),new vr(e.firestore,e.converter,Rm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vg extends Og{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Vg(e,n)}_apply(e){const n=(function(o,u,f){if(o.startAt!==null)throw new oe(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new oe(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nu(u,f)})(e._query,this._field,this._direction);return new vr(e.firestore,e.converter,(function(o,u){const f=o.explicitOrderBy.concat([u]);return new No(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Gh(s,e="asc"){const n=e,r=Hh("orderBy",s);return Vg._create(r,n)}class jg extends Og{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new jg(e,n,r)}_apply(e){return new vr(e.firestore,e.converter,vh(e._query,this._limit,this._limitType))}}function fa(s){return Dx("limit",s),jg._create("limit",s,"F")}function q_(s,e,n){if(typeof(n=fn(n))=="string"){if(n==="")throw new oe(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vE(e)&&n.indexOf("/")!==-1)throw new oe(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ot.fromString(n));if(!Ee.isDocumentKey(r))throw new oe(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return s_(s,new Ee(r))}if(n instanceof Pt)return s_(s,n._key);throw new oe(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nh(n)}.`)}function B_(s,e){if(!Array.isArray(s)||s.length===0)throw new oe(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Tb(s,e){const n=(function(o,u){for(const f of o)for(const g of f.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new oe(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class II{convertValue(e,n="none"){switch(gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return la(e,((o,u)=>{r[o]=this.convertValue(u,n)})),r}convertVectorValue(e){var r,o,u;const n=(u=(o=(r=e.fields)==null?void 0:r[ph].arrayValue)==null?void 0:o.values)==null?void 0:u.map((f=>At(f.doubleValue)));return new Ui(n)}convertGeoPoint(e){return new Li(At(e.latitude),At(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Mh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wl(e));default:return null}}convertTimestamp(e){const n=dr(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ot.fromString(e);$e(zE(r),9688,{name:e});const o=new eu(r.get(1),r.get(3)),u=new Ee(r.popFirst(5));return o.isEqual(n)||ps(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(s,e,n){let r;return r=s?s.toFirestore(e):e,r}class zl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class na extends bb{constructor(e,n,r,o,u,f){super(e,n,r,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Hh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=na._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}na._jsonSchemaVersion="firestore/documentSnapshot/1.0",na._jsonSchema={type:Ut("string",na._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class sh extends na{data(e={}){return super.data(e)}}class fo{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new zl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new sh(this._firestore,this._userDataWriter,r.key,r,new zl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new oe(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((g=>{const y=new sh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new zl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const y=new sh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new zl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,b=-1;return g.type!==0&&(p=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),b=f.indexOf(g.doc.key)),{type:NI(g.type),doc:y,oldIndex:p,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=fo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Wm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function NI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(s){s=ys(s,Pt);const e=ys(s.firestore,Oo);return gI(Sg(e),s._key).then((n=>OI(e,s,n)))}fo._jsonSchemaVersion="firestore/querySnapshot/1.0",fo._jsonSchema={type:Ut("string",fo._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class Sb extends II{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,n)}}function un(s){s=ys(s,vr);const e=ys(s.firestore,Oo),n=Sg(e),r=new Sb(e);return CI(s._query),pI(n,s._query).then((o=>new fo(e,r,s,o)))}function To(s,e,n){s=ys(s,Pt);const r=ys(s.firestore,Oo),o=wb(s.converter,e);return Lg(r,[pb(Cg(r),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,li.none())])}function DI(s){return Lg(ys(s.firestore,Oo),[new og(s._key,li.none())])}function Ab(s,e){const n=ys(s.firestore,Oo),r=_s(s),o=wb(s.converter,e);return Lg(n,[pb(Cg(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,li.exists(!1))]).then((()=>r))}function Lg(s,e){return(function(r,o){const u=new ds;return r.asyncQueue.enqueueAndForget((async()=>iI(await mI(r),o,u))),u.promise})(Sg(s),e)}function OI(s,e,n){const r=n.docs.get(e._key),o=new Sb(s);return new na(s,o,e._key,r,new zl(n.hasPendingWrites,n.fromCache),e.converter)}function wo(){return new Ig("serverTimestamp")}(function(e,n=!0){(function(o){Ro=o})(Ao),mo(new sa("firestore",((r,{instanceIdentifier:o,options:u})=>{const f=r.getProvider("app").getImmediate(),g=new Oo(new Tx(r.getProvider("auth-internal")),new Ax(f,r.getProvider("app-check-internal")),(function(p,b){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new oe(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eu(p.options.projectId,b)})(f,o),f);return u={useFetchStreams:n,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),lr(Gv,Qv,e),lr(Gv,Qv,"esm2020")})();const MI={apiKey:"AIzaSyAO5S3OWAuWoeu7PgZDKtXjSk_Ki2NoxSA",authDomain:"codeswipe-9ea2d.firebaseapp.com",projectId:"codeswipe-9ea2d",storageBucket:"codeswipe-9ea2d.firebasestorage.app",messagingSenderId:"305149132359",appId:"1:305149132359:web:101dcbbca9831d59083b62",measurementId:"G-VRZVEESJS0"},xb=h1(MI),at=vx(xb),ht=vI(xb);s2(at,k1).catch(s=>{console.error("Firebase persistence error:",s)});const VI=new cs;async function jI(s){const e=_s(ht,"Users",s.uid);(await kg(e)).exists()||await To(e,{user_id:s.uid,username:s.displayName||"",email:s.email||"",password_hash:null,profile_pic:s.photoURL||"",created_at:wo(),is_verified:!!s.emailVerified})}const kI=async()=>{const s=await R2(at,VI);return await jI(s.user),s};async function LI(s,e){const n=xt(ht,"Settings"),r=on(n,ln("user_id","==",s),fa(1)),o=await un(r);if(o.empty){const u=_s(xt(ht,"Settings"));await To(u,{set_id:u.id,user_id:s,level:e.level,languages:e.languages,topics:e.topics,created_at:wo()})}else{const u=o.docs[0];await To(_s(ht,"Settings",u.id),{set_id:u.id,user_id:s,level:e.level,languages:e.languages,topics:e.topics,updated_at:wo(),created_at:u.data().created_at})}}async function Rb(s){const e=xt(ht,"Settings"),n=on(e,ln("user_id","==",s),fa(1)),r=await un(n);if(r.empty)return null;const o=r.docs[0].data();return{level:o.level||"",languages:o.languages||[],topics:o.topics||[]}}const UI=LI;function H_(s,e){(e==null||e>s.length)&&(e=s.length);for(var n=0,r=Array(e);n<e;n++)r[n]=s[n];return r}function PI(s){if(Array.isArray(s))return s}function zI(s,e,n){return(e=YI(e))in s?Object.defineProperty(s,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[e]=n,s}function qI(s,e){var n=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(n!=null){var r,o,u,f,g=[],y=!0,p=!1;try{if(u=(n=n.call(s)).next,e!==0)for(;!(y=(r=u.call(n)).done)&&(g.push(r.value),g.length!==e);y=!0);}catch(b){p=!0,o=b}finally{try{if(!y&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw o}}return g}}function BI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F_(s,e){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(s,o).enumerable})),n.push.apply(n,r)}return n}function G_(s){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F_(Object(n),!0).forEach(function(r){zI(s,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):F_(Object(n)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(n,r))})}return s}function HI(s,e){if(s==null)return{};var n,r,o=FI(s,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);for(r=0;r<u.length;r++)n=u[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(s,n)&&(o[n]=s[n])}return o}function FI(s,e){if(s==null)return{};var n={};for(var r in s)if({}.hasOwnProperty.call(s,r)){if(e.indexOf(r)!==-1)continue;n[r]=s[r]}return n}function GI(s,e){return PI(s)||qI(s,e)||KI(s,e)||BI()}function QI(s,e){if(typeof s!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var r=n.call(s,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function YI(s){var e=QI(s,"string");return typeof e=="symbol"?e:e+""}function KI(s,e){if(s){if(typeof s=="string")return H_(s,e);var n={}.toString.call(s).slice(8,-1);return n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set"?Array.from(s):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H_(s,e):void 0}}function $I(s,e,n){return e in s?Object.defineProperty(s,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[e]=n,s}function Q_(s,e){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(s,o).enumerable})),n.push.apply(n,r)}return n}function Y_(s){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q_(Object(n),!0).forEach(function(r){$I(s,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):Q_(Object(n)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(n,r))})}return s}function XI(){for(var s=arguments.length,e=new Array(s),n=0;n<s;n++)e[n]=arguments[n];return function(r){return e.reduceRight(function(o,u){return u(o)},r)}}function ql(s){return function e(){for(var n=this,r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return o.length>=s.length?s.apply(this,o):function(){for(var f=arguments.length,g=new Array(f),y=0;y<f;y++)g[y]=arguments[y];return e.apply(n,[].concat(o,g))}}}function Ah(s){return{}.toString.call(s).includes("Object")}function JI(s){return!Object.keys(s).length}function au(s){return typeof s=="function"}function ZI(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function WI(s,e){return Ah(e)||hr("changeType"),Object.keys(e).some(function(n){return!ZI(s,n)})&&hr("changeField"),e}function eN(s){au(s)||hr("selectorType")}function tN(s){au(s)||Ah(s)||hr("handlerType"),Ah(s)&&Object.values(s).some(function(e){return!au(e)})&&hr("handlersType")}function nN(s){s||hr("initialIsRequired"),Ah(s)||hr("initialType"),JI(s)&&hr("initialContent")}function iN(s,e){throw new Error(s[e]||s.default)}var sN={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},hr=ql(iN)(sN),Yc={changes:WI,selector:eN,handler:tN,initial:nN};function rN(s){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Yc.initial(s),Yc.handler(e);var n={current:s},r=ql(lN)(n,e),o=ql(oN)(n),u=ql(Yc.changes)(s),f=ql(aN)(n);function g(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(b){return b};return Yc.selector(p),p(n.current)}function y(p){XI(r,o,u,f)(p)}return[g,y]}function aN(s,e){return au(e)?e(s.current):e}function oN(s,e){return s.current=Y_(Y_({},s.current),e),e}function lN(s,e,n){return au(e)?e(s.current):Object.keys(n).forEach(function(r){var o;return(o=e[r])===null||o===void 0?void 0:o.call(e,s.current[r])}),n}var uN={create:rN},cN={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.54.0/min/vs"}};function hN(s){return function e(){for(var n=this,r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return o.length>=s.length?s.apply(this,o):function(){for(var f=arguments.length,g=new Array(f),y=0;y<f;y++)g[y]=arguments[y];return e.apply(n,[].concat(o,g))}}}function fN(s){return{}.toString.call(s).includes("Object")}function dN(s){return s||K_("configIsRequired"),fN(s)||K_("configType"),s.urls?(mN(),{paths:{vs:s.urls.monacoBase}}):s}function mN(){console.warn(Cb.deprecation)}function gN(s,e){throw new Error(s[e]||s.default)}var Cb={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},K_=hN(gN)(Cb),pN={config:dN},yN=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(o){return n.reduceRight(function(u,f){return f(u)},o)}};function Ib(s,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&s[n]&&Object.assign(e[n],Ib(s[n],e[n]))}),G_(G_({},s),e)}var vN={type:"cancelation",msg:"operation is manually canceled"};function lm(s){var e=!1,n=new Promise(function(r,o){s.then(function(u){return e?o(vN):r(u)}),s.catch(o)});return n.cancel=function(){return e=!0},n}var _N=["monaco"],EN=uN.create({config:cN,isInitialized:!1,resolve:null,reject:null,monaco:null}),Nb=GI(EN,2),yu=Nb[0],Qh=Nb[1];function bN(s){var e=pN.config(s),n=e.monaco,r=HI(e,_N);Qh(function(o){return{config:Ib(o.config,r),monaco:n}})}function TN(){var s=yu(function(e){var n=e.monaco,r=e.isInitialized,o=e.resolve;return{monaco:n,isInitialized:r,resolve:o}});if(!s.isInitialized){if(Qh({isInitialized:!0}),s.monaco)return s.resolve(s.monaco),lm(um);if(window.monaco&&window.monaco.editor)return Db(window.monaco),s.resolve(window.monaco),lm(um);yN(wN,AN)(xN)}return lm(um)}function wN(s){return document.body.appendChild(s)}function SN(s){var e=document.createElement("script");return s&&(e.src=s),e}function AN(s){var e=yu(function(r){var o=r.config,u=r.reject;return{config:o,reject:u}}),n=SN("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return s()},n.onerror=e.reject,n}function xN(){var s=yu(function(n){var r=n.config,o=n.resolve,u=n.reject;return{config:r,resolve:o,reject:u}}),e=window.require;e.config(s.config),e(["vs/editor/editor.main"],function(n){var r=n.m;Db(r),s.resolve(r)},function(n){s.reject(n)})}function Db(s){yu().monaco||Qh({monaco:s})}function RN(){return yu(function(s){var e=s.monaco;return e})}var um=new Promise(function(s,e){return Qh({resolve:s,reject:e})}),Ob={config:bN,init:TN,__getMonacoInstance:RN},CN={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},cm=CN,IN={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},NN=IN;function DN({children:s}){return ea.createElement("div",{style:NN.container},s)}var ON=DN,MN=ON;function VN({width:s,height:e,isEditorReady:n,loading:r,_ref:o,className:u,wrapperProps:f}){return ea.createElement("section",{style:{...cm.wrapper,width:s,height:e},...f},!n&&ea.createElement(MN,null,r),ea.createElement("div",{ref:o,style:{...cm.fullWidth,...!n&&cm.hide},className:u}))}var jN=VN,Mb=ee.memo(jN);function kN(s){ee.useEffect(s,[])}var Vb=kN;function LN(s,e,n=!0){let r=ee.useRef(!0);ee.useEffect(r.current||!n?()=>{r.current=!1}:s,e)}var Dn=LN;function $l(){}function oo(s,e,n,r){return UN(s,r)||PN(s,e,n,r)}function UN(s,e){return s.editor.getModel(jb(s,e))}function PN(s,e,n,r){return s.editor.createModel(e,n,r?jb(s,r):void 0)}function jb(s,e){return s.Uri.parse(e)}function zN({original:s,modified:e,language:n,originalLanguage:r,modifiedLanguage:o,originalModelPath:u,modifiedModelPath:f,keepCurrentOriginalModel:g=!1,keepCurrentModifiedModel:y=!1,theme:p="light",loading:b="Loading...",options:w={},height:x="100%",width:q="100%",className:K,wrapperProps:M={},beforeMount:k=$l,onMount:re=$l}){let[ue,le]=ee.useState(!1),[ie,ye]=ee.useState(!0),me=ee.useRef(null),R=ee.useRef(null),A=ee.useRef(null),C=ee.useRef(re),O=ee.useRef(k),V=ee.useRef(!1);Vb(()=>{let fe=Ob.init();return fe.then(H=>(R.current=H)&&ye(!1)).catch(H=>(H==null?void 0:H.type)!=="cancelation"&&console.error("Monaco initialization: error:",H)),()=>me.current?Fe():fe.cancel()}),Dn(()=>{if(me.current&&R.current){let fe=me.current.getOriginalEditor(),H=oo(R.current,s||"",r||n||"text",u||"");H!==fe.getModel()&&fe.setModel(H)}},[u],ue),Dn(()=>{if(me.current&&R.current){let fe=me.current.getModifiedEditor(),H=oo(R.current,e||"",o||n||"text",f||"");H!==fe.getModel()&&fe.setModel(H)}},[f],ue),Dn(()=>{let fe=me.current.getModifiedEditor();fe.getOption(R.current.editor.EditorOption.readOnly)?fe.setValue(e||""):e!==fe.getValue()&&(fe.executeEdits("",[{range:fe.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),fe.pushUndoStop())},[e],ue),Dn(()=>{var fe,H;(H=(fe=me.current)==null?void 0:fe.getModel())==null||H.original.setValue(s||"")},[s],ue),Dn(()=>{let{original:fe,modified:H}=me.current.getModel();R.current.editor.setModelLanguage(fe,r||n||"text"),R.current.editor.setModelLanguage(H,o||n||"text")},[n,r,o],ue),Dn(()=>{var fe;(fe=R.current)==null||fe.editor.setTheme(p)},[p],ue),Dn(()=>{var fe;(fe=me.current)==null||fe.updateOptions(w)},[w],ue);let L=ee.useCallback(()=>{var ne;if(!R.current)return;O.current(R.current);let fe=oo(R.current,s||"",r||n||"text",u||""),H=oo(R.current,e||"",o||n||"text",f||"");(ne=me.current)==null||ne.setModel({original:fe,modified:H})},[n,e,o,s,r,u,f]),I=ee.useCallback(()=>{var fe;!V.current&&A.current&&(me.current=R.current.editor.createDiffEditor(A.current,{automaticLayout:!0,...w}),L(),(fe=R.current)==null||fe.editor.setTheme(p),le(!0),V.current=!0)},[w,p,L]);ee.useEffect(()=>{ue&&C.current(me.current,R.current)},[ue]),ee.useEffect(()=>{!ie&&!ue&&I()},[ie,ue,I]);function Fe(){var H,ne,de,Ce;let fe=(H=me.current)==null?void 0:H.getModel();g||((ne=fe==null?void 0:fe.original)==null||ne.dispose()),y||((de=fe==null?void 0:fe.modified)==null||de.dispose()),(Ce=me.current)==null||Ce.dispose()}return ea.createElement(Mb,{width:q,height:x,isEditorReady:ue,loading:b,_ref:A,className:K,wrapperProps:M})}var qN=zN;ee.memo(qN);function BN(s){let e=ee.useRef();return ee.useEffect(()=>{e.current=s},[s]),e.current}var HN=BN,Kc=new Map;function FN({defaultValue:s,defaultLanguage:e,defaultPath:n,value:r,language:o,path:u,theme:f="light",line:g,loading:y="Loading...",options:p={},overrideServices:b={},saveViewState:w=!0,keepCurrentModel:x=!1,width:q="100%",height:K="100%",className:M,wrapperProps:k={},beforeMount:re=$l,onMount:ue=$l,onChange:le,onValidate:ie=$l}){let[ye,me]=ee.useState(!1),[R,A]=ee.useState(!0),C=ee.useRef(null),O=ee.useRef(null),V=ee.useRef(null),L=ee.useRef(ue),I=ee.useRef(re),Fe=ee.useRef(),fe=ee.useRef(r),H=HN(u),ne=ee.useRef(!1),de=ee.useRef(!1);Vb(()=>{let N=Ob.init();return N.then(Q=>(C.current=Q)&&A(!1)).catch(Q=>(Q==null?void 0:Q.type)!=="cancelation"&&console.error("Monaco initialization: error:",Q)),()=>O.current?He():N.cancel()}),Dn(()=>{var Q,te,ae,ve;let N=oo(C.current,s||r||"",e||o||"",u||n||"");N!==((Q=O.current)==null?void 0:Q.getModel())&&(w&&Kc.set(H,(te=O.current)==null?void 0:te.saveViewState()),(ae=O.current)==null||ae.setModel(N),w&&((ve=O.current)==null||ve.restoreViewState(Kc.get(u))))},[u],ye),Dn(()=>{var N;(N=O.current)==null||N.updateOptions(p)},[p],ye),Dn(()=>{!O.current||r===void 0||(O.current.getOption(C.current.editor.EditorOption.readOnly)?O.current.setValue(r):r!==O.current.getValue()&&(de.current=!0,O.current.executeEdits("",[{range:O.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),O.current.pushUndoStop(),de.current=!1))},[r],ye),Dn(()=>{var Q,te;let N=(Q=O.current)==null?void 0:Q.getModel();N&&o&&((te=C.current)==null||te.editor.setModelLanguage(N,o))},[o],ye),Dn(()=>{var N;g!==void 0&&((N=O.current)==null||N.revealLine(g))},[g],ye),Dn(()=>{var N;(N=C.current)==null||N.editor.setTheme(f)},[f],ye);let Ce=ee.useCallback(()=>{var N;if(!(!V.current||!C.current)&&!ne.current){I.current(C.current);let Q=u||n,te=oo(C.current,r||s||"",e||o||"",Q||"");O.current=(N=C.current)==null?void 0:N.editor.create(V.current,{model:te,automaticLayout:!0,...p},b),w&&O.current.restoreViewState(Kc.get(Q)),C.current.editor.setTheme(f),g!==void 0&&O.current.revealLine(g),me(!0),ne.current=!0}},[s,e,n,r,o,u,p,b,w,f,g]);ee.useEffect(()=>{ye&&L.current(O.current,C.current)},[ye]),ee.useEffect(()=>{!R&&!ye&&Ce()},[R,ye,Ce]),fe.current=r,ee.useEffect(()=>{var N,Q;ye&&le&&((N=Fe.current)==null||N.dispose(),Fe.current=(Q=O.current)==null?void 0:Q.onDidChangeModelContent(te=>{de.current||le(O.current.getValue(),te)}))},[ye,le]),ee.useEffect(()=>{if(ye){let N=C.current.editor.onDidChangeMarkers(Q=>{var ae;let te=(ae=O.current.getModel())==null?void 0:ae.uri;if(te&&Q.find(ve=>ve.path===te.path)){let ve=C.current.editor.getModelMarkers({resource:te});ie==null||ie(ve)}});return()=>{N==null||N.dispose()}}return()=>{}},[ye,ie]);function He(){var N,Q;(N=Fe.current)==null||N.dispose(),x?w&&Kc.set(u,O.current.saveViewState()):(Q=O.current.getModel())==null||Q.dispose(),O.current.dispose()}return ea.createElement(Mb,{width:q,height:K,isEditorReady:ye,loading:y,_ref:V,className:M,wrapperProps:k})}var GN=FN,QN=ee.memo(GN),YN=QN;const KN=({value:s,onChange:e,language:n,placeholder:r="// Your code here"})=>{const o=ee.useRef(null),[u,f]=ee.useState(!1),g=(b,w)=>{o.current=b,b.updateOptions({fontSize:14,lineHeight:20,minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on",automaticLayout:!0,padding:{top:10,bottom:10},mouseWheelZoom:!0,fastScrollSensitivity:5,scrollbar:{vertical:"auto",horizontal:"auto",verticalScrollbarSize:12,horizontalScrollbarSize:12},overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1}),w.editor.setTheme("vs-dark"),b.addCommand(w.KeyCode.Enter,()=>{b.trigger("keyboard","type",{text:`
`})}),b.onDidFocusEditorText(()=>{window.innerWidth<=768&&setTimeout(()=>{b.getContainerDomNode().scrollIntoView({behavior:"smooth",block:"center"})},300)})},y=b=>{b!==void 0&&e(b)},p={selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!0,fontSize:window.innerWidth<=768?16:14,lineHeight:window.innerWidth<=768?22:20,minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on",theme:"vs-dark",padding:{top:12,bottom:12},mouseWheelZoom:!0,multiCursorModifier:"ctrlCmd",formatOnPaste:!0,formatOnType:!0,scrollbar:{vertical:"auto",horizontal:"auto",verticalScrollbarSize:window.innerWidth<=768?14:12,horizontalScrollbarSize:window.innerWidth<=768?14:12},selectionHighlight:!1,occurrencesHighlight:!1,hover:{enabled:window.innerWidth>768},parameterHints:{enabled:window.innerWidth>768},suggestOnTriggerCharacters:window.innerWidth>768,overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1};return u?_.jsx("div",{className:"fallback-editor h-full",children:_.jsx("textarea",{className:"w-full h-full bg-slate-900 text-white font-mono text-sm p-4 border border-slate-700 rounded-md resize-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",value:s,onChange:b=>e(b.target.value),placeholder:r,spellCheck:"false",style:{fontSize:"16px"}})}):_.jsx("div",{className:"mobile-code-editor h-full",children:_.jsx(YN,{height:"100%",language:n.toLowerCase(),value:s,onChange:y,onMount:g,options:p,theme:"vs-dark",loading:_.jsx("div",{className:"flex items-center justify-center h-full bg-slate-900 text-slate-400",children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"w-8 h-8 border-2 border-sky-400 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),_.jsx("p",{children:"Loading editor..."})]})}),onValidate:b=>{},beforeMount:b=>{b.editor.defineTheme("custom-dark",{base:"vs-dark",inherit:!0,rules:[],colors:{"editor.background":"#0f172a","editor.foreground":"#e2e8f0"}})}})})},$N=({code:s,setCode:e,language:n="javascript"})=>_.jsxs("div",{className:"code-editor-container h-full",children:[_.jsx("label",{htmlFor:"code-editor",className:"sr-only",children:"Code Editor"}),_.jsx("div",{className:"h-full rounded-md border border-slate-700/50 overflow-hidden bg-slate-900 shadow-sm ring-1 ring-inset ring-slate-700/50 focus-within:ring-2 focus-within:ring-inset focus-within:ring-red-500 transition",children:_.jsx(KN,{value:s,onChange:e,language:n,placeholder:"// Your solution goes here..."})})]}),Ug=s=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:_.jsx("path",{fillRule:"evenodd",d:"M11.25 4.5A2.25 2.25 0 0 0 9 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25h1.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25h-1.5ZM9 6.75A.75.75 0 0 1 9.75 6h3a.75.75 0 0 1 .75.75v10.5a.75.75 0 0 1-.75.75h-3a.75.75 0 0 1-.75-.75V6.75ZM6.31 6.47a.75.75 0 0 1 0 1.06L2.625 12l3.685 4.47a.75.75 0 1 1-1.12 1.002l-4.25-5.185a.75.75 0 0 1 0-1.002l4.25-5.185a.75.75 0 0 1 1.12 0Zm11.38 0a.75.75 0 0 1 1.12 0l4.25 5.185a.75.75 0 0 1 0 1.002l-4.25 5.185a.75.75 0 1 1-1.12-1.002L21.375 12l-3.685-4.47a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}),XN=s=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:_.jsx("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.647c1.295.742 1.295 2.545 0 3.286L7.279 20.99c-1.25.717-2.779-.217-2.779-1.643V5.653Z",clipRule:"evenodd"})}),JN=s=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),ZN=s=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),kb=s=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})}),Lb=s=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:[_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-1.003 1.11-1.226a21.75 21.75 0 0 1 2.592 0c.55.223 1.02.684 1.11 1.226.09.542.058 1.12-.1 1.668a21.75 21.75 0 0 1-2.592 0c-.158-.548-.19-1.126-.1-1.668ZM15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a.75.75 0 0 0-.529-.634l-1.5-1.5a.75.75 0 0 0-.634-.529c-1.209-.092-2.43-.138-3.662-.138s-2.453.046-3.662.138a.75.75 0 0 0-.634.529l-1.5 1.5a.75.75 0 0 0-.529.634c-.092 1.209-.138 2.43-.138 3.662s.046 2.453.138 3.662a.75.75 0 0 0 .529.634l1.5 1.5a.75.75 0 0 0 .634.529c1.209.092 2.43.138 3.662.138s2.453-.046 3.662-.138a.75.75 0 0 0 .634-.529l1.5-1.5a.75.75 0 0 0 .529-.634c.092-1.209.138-2.43.138-3.662Z"})]}),rh=s=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:[_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9a9.75 9.75 0 0 1 9 0Z"}),_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 18.75c0-1.105-1.12-2.004-2.508-2.525A11.2 11.2 0 0 0 12 15.75a11.2 11.2 0 0 0-5.008.475C5.62 16.746 4.5 17.645 4.5 18.75m15 0h-15"}),_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15.75V11.25m6-4.5h-12a1.5 1.5 0 0 1-1.5-1.5V3.75a1.5 1.5 0 0 1 1.5-1.5h12a1.5 1.5 0 0 1 1.5 1.5v1.5a1.5 1.5 0 0 1-1.5 1.5Z"})]}),WN=s=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456Z"})}),e4=s=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"})}),t4=s=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"})}),n4=s=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),i4=s=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:[_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})]}),s4=s=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",...s,children:[_.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),_.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),_.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.222,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),_.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571l6.19,5.238C42.012,36.417,44,30.638,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]});async function r4(s,e){try{if(await Pg(s,e))throw new Error("Question already liked");const r={user_id:s,question_id:e,created_at:new Date},o=await Ab(xt(ht,"Likes"),r);return console.log("Like saved with ID:",o.id),o.id}catch(n){throw console.error("Error saving like:",n),n}}async function a4(s,e){try{const n=on(xt(ht,"Likes"),ln("user_id","==",s),ln("question_id","==",e)),r=await un(n);if(!r.empty){const o=r.docs[0];await DI(_s(ht,"Likes",o.id)),console.log("Like removed")}}catch(n){throw console.error("Error removing like:",n),n}}async function Pg(s,e){try{const n=on(xt(ht,"Likes"),ln("user_id","==",s),ln("question_id","==",e));return!(await un(n)).empty}catch(n){return console.error("Error checking if question liked:",n),!1}}async function Ub(s){try{const e=on(xt(ht,"Likes"),ln("user_id","==",s)),n=await un(e),r=[];return n.forEach(o=>{r.push({like_id:o.id,...o.data()})}),r.sort((o,u)=>{const f=o.created_at instanceof Date?o.created_at:new Date(o.created_at);return(u.created_at instanceof Date?u.created_at:new Date(u.created_at)).getTime()-f.getTime()}),r}catch(e){throw console.error("Error fetching user likes:",e),e}}async function o4(s,e){try{return await Pg(s,e)?(await a4(s,e),!1):(await r4(s,e),!0)}catch(n){throw console.error("Error toggling like:",n),n}}async function l4(s){try{const n=(await Ub(s)).map(async o=>{try{const u=await un(on(xt(ht,"Questions"),ln("question_id","==",o.question_id)));if(!u.empty){const f=u.docs[0].data();return{like_id:o.like_id,created_at:o.created_at,question:{question_id:o.question_id,title:f.title||"Unknown Question",description:f.description||"",difficulty:f.difficulty||"Intermediate",language:f.language||"JavaScript"}}}return null}catch(u){return console.error("Error fetching question details:",u),null}});return(await Promise.all(n)).filter(o=>o!==null)}catch(e){return console.error("Error fetching liked questions with details:",e),[]}}const u4=s=>{switch(s){case"JavaScript":return{abbr:"JS",className:"bg-yellow-400 text-slate-900"};case"Python":return{abbr:"Py",className:"bg-blue-500 text-white"};case"Go":return{abbr:"Go",className:"bg-cyan-400 text-slate-900"};default:return{abbr:"C",className:"bg-slate-500 text-white"}}},$_=({label:s,children:e,onClick:n})=>_.jsxs("button",{onClick:n,className:"flex flex-col items-center gap-1 group",children:[_.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-800/70 flex items-center justify-center group-hover:bg-slate-700/90 transition-all duration-200 transform group-hover:scale-110 shadow-lg backdrop-blur-sm",children:e}),_.jsx("span",{className:"text-[10px] font-medium text-slate-400",children:s})]}),c4=({language:s,questionId:e,currentMode:n,onOpenModeSelection:r})=>{const{abbr:o,className:u}=u4(s),[f,g]=ee.useState(!1),[y,p]=ee.useState(!1);ee.useEffect(()=>{(async()=>{if(!(!at.currentUser||!e))try{const K=await Pg(at.currentUser.uid,e);g(K)}catch(K){console.error("Error checking like status:",K)}})()},[e]);const b=async()=>{if(!(!at.currentUser||!e||y)){p(!0);try{const q=await o4(at.currentUser.uid,e);g(q)}catch(q){console.error("Error toggling like:",q)}finally{p(!1)}}},w=()=>{const q={title:"Code Swipe Challenge",text:"Check out this coding challenge on Code Swipe!",url:window.location.href};if(navigator.share)navigator.share(q).catch(()=>{});else{const K=window.location.href,M=document.createElement("div");M.className="fixed inset-0 bg-black/50 z-50 flex items-end justify-center",M.innerHTML=`
        <div class="bg-slate-800 rounded-t-2xl p-6 w-full max-w-md animate-slide-up">
          <h3 class="text-white font-bold text-lg mb-4">Share Challenge</h3>
          <div class="space-y-3">
            <a href="https://twitter.com/intent/tweet?text=${encodeURIComponent(q.text)}&url=${encodeURIComponent(K)}" target="_blank" class="flex items-center gap-3 p-3 bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors">
              <span class="text-2xl"></span>
              <span class="text-white">Share on Twitter</span>
            </a>
            <a href="https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(K)}" target="_blank" class="flex items-center gap-3 p-3 bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors">
              <span class="text-2xl"></span>
              <span class="text-white">Share on LinkedIn</span>
            </a>
            <a href="https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(K)}" target="_blank" class="flex items-center gap-3 p-3 bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors">
              <span class="text-2xl"></span>
              <span class="text-white">Share on Facebook</span>
            </a>
            <button onclick="navigator.clipboard.writeText('${K}').then(() => alert('Link copied!'))" class="flex items-center gap-3 p-3 bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors w-full text-left">
              <span class="text-2xl"></span>
              <span class="text-white">Copy Link</span>
            </button>
          </div>
          <button onclick="this.closest('.fixed').remove()" class="mt-4 w-full p-3 bg-slate-700 hover:bg-slate-600 rounded-lg text-white transition-colors">
            Cancel
          </button>
        </div>
      `,M.onclick=k=>{k.target===M&&M.remove()},document.body.appendChild(M)}},x=()=>n==="ai"?"":"";return _.jsxs("div",{className:"absolute right-[0.1rem] top-1/2 -translate-y-1/2 z-10 flex flex-col items-center gap-3",children:[_.jsx("div",{className:"flex flex-col items-center gap-1 group cursor-pointer",children:_.jsx("div",{className:`relative w-11 h-11 rounded-full flex items-center justify-center font-bold text-base border-2 border-white/40 shadow-lg transition-transform transform group-hover:scale-110 ${u}`,children:o})}),_.jsx($_,{label:"Like",onClick:b,children:_.jsx(e4,{className:`w-5 h-5 drop-shadow-lg transition-colors ${f?"text-red-500":"text-white"} ${y?"animate-pulse":""}`})}),_.jsx($_,{label:"Share",onClick:w,children:_.jsx(t4,{className:"w-5 h-5 text-white drop-shadow-lg"})}),r&&_.jsxs("button",{onClick:r,className:"flex flex-col items-center gap-1 group",children:[_.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-800/70 flex items-center justify-center group-hover:bg-slate-700/90 transition-all duration-200 transform group-hover:scale-110 shadow-lg backdrop-blur-sm",children:_.jsx("span",{className:"text-lg",children:x()})}),_.jsx("span",{className:"text-[10px] font-medium text-slate-400",children:"Mode"})]})]})},h4={Beginner:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",Intermediate:"bg-amber-500/20 text-amber-400 border-amber-500/30",Advanced:"bg-red-500/20 text-red-400 border-red-500/30",Expert:"bg-purple-500/20 text-purple-400 border-purple-500/30"},f4=({title:s,description:e,difficulty:n,language:r,topics:o,userLevel:u,onGenerateAnswer:f,isGeneratingAnswer:g=!1})=>{const y=u||n;return _.jsxs("div",{className:"w-full",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("h2",{className:"text-2xl font-bold text-white drop-shadow-lg",children:s}),_.jsx("span",{className:`inline-flex items-center rounded-md px-2 py-1 text-xs font-medium border ${h4[y]}`,children:y}),f&&_.jsx("button",{onClick:f,disabled:g,className:`w-8 h-8 rounded-full bg-sky-600 hover:bg-sky-500 
                           disabled:bg-gray-600 disabled:cursor-not-allowed
                           flex items-center justify-center transition-colors
                           shadow-lg hover:shadow-sky-500/50`,"aria-label":"Generate answer",children:g?_.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):_.jsx(WN,{className:"w-5 h-5 text-white"})})]}),_.jsx("p",{className:"mt-2 text-slate-200 text-sm drop-shadow-md",children:e})]})},d4=({challenge:s,userCode:e,setUserCode:n,onRunTests:r,results:o,isLoading:u,error:f,questionId:g,userLanguage:y,userTopics:p,userLevel:b,currentMode:w,onOpenModeSelection:x,onGenerateAnswer:q,isGeneratingAnswer:K})=>{const re=s.description.length>150?"max-h-[35%]":"max-h-[25%]";return _.jsxs("div",{className:"w-full h-full mx-auto flex flex-col relative bg-black",children:[_.jsxs("div",{className:"flex-grow flex flex-col h-full overflow-hidden",children:[_.jsx("div",{className:`${re} overflow-y-auto px-4 pt-4 pb-2 flex-shrink-0`,style:{marginBottom:"10px"},children:_.jsx(f4,{title:s.title,description:s.description,difficulty:s.difficulty,language:y,topics:p,userLevel:b,onGenerateAnswer:q,isGeneratingAnswer:K})}),_.jsx("div",{className:"h-[50%] px-4 py-2 flex-shrink-0 relative overflow-hidden",style:{marginTop:"10px"},children:_.jsx($N,{code:e,setCode:n,language:s.language})}),_.jsx("div",{className:"px-4 py-2 flex-shrink-0 flex justify-center",children:_.jsx("button",{onClick:r,disabled:u,className:"inline-flex items-center justify-center gap-2 rounded-full bg-gradient-to-r from-red-500 to-pink-600 px-8 py-2.5 text-sm font-bold text-white shadow-lg hover:from-red-600 hover:to-pink-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-500 disabled:from-slate-700 disabled:to-slate-700 disabled:text-slate-400 disabled:cursor-not-allowed transition-all transform hover:scale-[1.02] active:scale-[0.98]",children:u?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),_.jsx("span",{children:"Running..."})]}):_.jsxs(_.Fragment,{children:[_.jsx(XN,{className:"w-5 h-5"}),_.jsx("span",{children:"Run Tests"})]})})})]}),_.jsx(c4,{language:s.language,questionId:g||s.id,currentMode:w,onOpenModeSelection:x})]})},m4="https://emkc.org/api/v2/piston",g4={JavaScript:{language:"javascript",version:"18.15.0"},Python:{language:"python",version:"3.10.0"},Go:{language:"go",version:"1.16.2"},Java:{language:"java",version:"15.0.2"},TypeScript:{language:"typescript",version:"5.0.3"},"C++":{language:"c++",version:"10.2.0"},"C#":{language:"csharp",version:"6.12.0"},Rust:{language:"rust",version:"1.68.2"}};function X_(s,e){const n={JavaScript:/function\s+(\w+)/,TypeScript:/function\s+(\w+)/,Python:/def\s+(\w+)/,Go:/func\s+(\w+)/,Java:/(?:public|private|protected)?\s*(?:static)?\s*\w+\s+(\w+)\s*\(/,"C++":/\w+\s+(\w+)\s*\(/,"C#":/(?:public|private|protected)?\s*(?:static)?\s*\w+\s+(\w+)\s*\(/,Rust:/fn\s+(\w+)/},r=s.match(n[e]);return r?r[1]:null}function p4(s,e,n,r){const o=JSON.stringify(n.input),u=JSON.stringify(n.expected);switch(r){case"JavaScript":case"TypeScript":return`
${s}

const input = ${o};
const expected = ${u};
let args;
if (Array.isArray(input)) {
    args = input;
} else if (typeof input === 'object' && input !== null) {
    args = Object.values(input);
} else {
    args = [input];
}
const result = ${e}(...args);
console.log(JSON.stringify({ result, expected }));
`;case"Python":return`
import json

${s}

input_data = ${o}
expected = ${u}
args = list(input_data.values())
result = ${e}(*args)
print(json.dumps({"result": result, "expected": expected}))
`;case"Go":return`
package main
import (
    "encoding/json"
    "fmt"
)

${s}

func main() {
    input := ${o}
    expected := ${u}
    // Note: Go requires manual argument extraction
    result := ${e}(/* extract args from input */)
    output := map[string]interface{}{"result": result, "expected": expected}
    jsonOutput, _ := json.Marshal(output)
    fmt.Println(string(jsonOutput))
}
`;case"Java":return`
import com.google.gson.Gson;
import java.util.*;

${s}

public class Main {
    public static void main(String[] args) {
        Gson gson = new Gson();
        // Note: Java requires manual argument extraction
        Object result = null; // Call function here
        Map<String, Object> output = new HashMap<>();
        output.put("result", result);
        output.put("expected", ${u});
        System.out.println(gson.toJson(output));
    }
}
`;case"Rust":return`
use serde_json::json;

${s}

fn main() {
    let input = ${o};
    let expected = ${u};
    // Note: Rust requires manual argument extraction
    let result = ${e}(/* extract args */);
    println!("{}", json!({"result": result, "expected": expected}));
}
`;case"C++":return`
#include <iostream>
#include <string>
using namespace std;

${s}

int main() {
    // Note: C++ requires manual argument extraction and JSON handling
    cout << "{\\"result\\": null, \\"expected\\": ${u}}" << endl;
    return 0;
}
`;case"C#":return`
using System;
using Newtonsoft.Json;

${s}

class Program {
    static void Main() {
        // Note: C# requires manual argument extraction
        var result = /* call function */;
        var output = new { result, expected = ${u} };
        Console.WriteLine(JsonConvert.SerializeObject(output));
    }
}
`;default:return s}}async function y4(s,e){const n=g4[e];try{const r=await fetch(`${m4}/execute`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({language:n.language,version:n.version,files:[{content:s}]})});if(!r.ok)throw new Error(`Piston API error: ${r.status}`);const o=await r.json();return{stdout:o.run.stdout||"",stderr:o.run.stderr||"",code:o.run.code||0}}catch(r){throw console.error("Piston API error:",r),r}}const v4=(s,e)=>{const n=Object.keys(e),r=Object.values(e);return new Function(...n,`
        "use strict";
        ${s}
    `)(...r)},_4=async(s,e,n,r="JavaScript")=>r==="JavaScript"?T4(s,e,n):w4(s,e,n,r),E4=async(s,e,n,r,o)=>{const u="https://curator-305149132359.europe-west1.run.app";try{const f=await fetch(`${u}/api/reviewCode`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userCode:s,solutionCode:e,language:n,testsPassed:r,challengeTitle:o})});if(!f.ok)throw new Error(`Code review API error: ${f.status}`);const g=await f.json();return{score:g.score||0,strength:g.strength||"Code submitted successfully.",improvement:g.improvement||"Keep practicing!"}}catch(f){return console.error("AI Code Review error:",f),{score:r?7:4,strength:r?"Your solution passes all test cases!":"Keep trying! Practice makes perfect.",improvement:r?"Consider exploring edge cases and optimizing your solution.":"Review the test failures and try to fix the issues.",error:"AI review temporarily unavailable"}}};function b4(s,e){const n=[new RegExp(`function\\s+${e}\\s*\\(([^)]*)\\)`),new RegExp(`const\\s+${e}\\s*=\\s*\\(([^)]*)\\)\\s*=>`),new RegExp(`let\\s+${e}\\s*=\\s*\\(([^)]*)\\)\\s*=>`),new RegExp(`var\\s+${e}\\s*=\\s*\\(([^)]*)\\)\\s*=>`)];for(const r of n){const o=s.match(r);if(o&&o[1])return o[1].split(",").map(f=>f.trim().split("=")[0].trim()).filter(f=>f.length>0)}return null}function T4(s,e,n){return new Promise((r,o)=>{setTimeout(()=>{try{const u=e.map(f=>{let g,y=!1;try{let p=s.match(/function\s+(\w+)/),b=s;if(p||(p=n.match(/function\s+(\w+)/),b=n),!p)throw new Error("Could not determine function name.");const w=p[1];let x;if(Array.isArray(f.input))x=f.input;else if(typeof f.input=="object"&&f.input!==null){const K=b4(b,w);K&&K.length>0?x=K.map(M=>f.input[M]):x=Object.values(f.input)}else x=[f.input];const q=`${s}
return ${w}(...args);`;g=v4(q,{args:x}),y=JSON.stringify(g)===JSON.stringify(f.expected)}catch(p){g=p.message,y=!1}return{input:`Input: ${JSON.stringify(f.input)}`,expected:`Expected: ${JSON.stringify(f.expected)}`,actual:`Got: ${JSON.stringify(g)}`,passed:y}});r(u)}catch(u){console.error("Evaluation error:",u),o(new Error("Failed to execute code. Check for syntax errors."))}},1e3)})}async function w4(s,e,n,r){let o=X_(s,r);if(o||(o=X_(n,r)),!o)throw new Error(`Could not determine function name for ${r}`);const u=[];for(const f of e)try{const g=p4(s,o,f,r),y=await y4(g,r);let p,b=!1;if(y.code===0&&y.stdout)try{const w=JSON.parse(y.stdout.trim());p=w.result,b=JSON.stringify(w.result)===JSON.stringify(w.expected)}catch{p=y.stdout.trim(),b=!1}else p=y.stderr||"Execution failed",b=!1;u.push({input:`Input: ${JSON.stringify(f.input)}`,expected:`Expected: ${JSON.stringify(f.expected)}`,actual:`Got: ${JSON.stringify(p)}`,passed:b})}catch(g){u.push({input:`Input: ${JSON.stringify(f.input)}`,expected:`Expected: ${JSON.stringify(f.expected)}`,actual:`Error: ${g.message}`,passed:!1})}return u}async function J_(s){const e=new TextEncoder().encode(s),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(o=>o.toString(16).padStart(2,"0")).join("")}const Pb="codeswipe_question_history",S4=50,A4=24;function zb(){try{const s=localStorage.getItem(Pb);if(!s)return{shownQuestionIds:[],lastReset:Date.now()};const e=JSON.parse(s);return(Date.now()-e.lastReset)/(1e3*60*60)>=A4?(console.log(" Resetting question history (24 hours elapsed)"),{shownQuestionIds:[],lastReset:Date.now()}):e.shownQuestionIds.length>=S4?(console.log(" Resetting question history (50 questions reached)"),{shownQuestionIds:[],lastReset:Date.now()}):e}catch(s){return console.warn("Failed to read question history from localStorage:",s),{shownQuestionIds:[],lastReset:Date.now()}}}function qb(s){try{localStorage.setItem(Pb,JSON.stringify(s))}catch(e){console.warn("Failed to save question history to localStorage:",e)}}function x4(s){const e=zb();e.shownQuestionIds.includes(s)||(e.shownQuestionIds.push(s),qb(e),console.log(` Added question to history. Total: ${e.shownQuestionIds.length}`))}function R4(){const s={shownQuestionIds:[],lastReset:Date.now()};qb(s),console.log(" Question history manually reset")}async function Z_(s){const e=xt(ht,"Questions"),n=on(e,ln("title","==",s.title),ln("language","==",s.language),fa(1));try{const g=await un(n);if(!g.empty){const y=g.docs[0];return console.log(` Question "${s.title}" already exists with ID: ${y.id}`),y.id}}catch(g){console.warn("Error checking for existing question, proceeding with hash-based approach:",g)}const r={title:s.title,language:s.language,difficulty:s.difficulty,description:s.description,starterCode:s.starterCode,testCases:s.testCases,solution:s.solution||"",solutionHash:await J_(s.solution||"")},o=await J_(JSON.stringify(r)),u=_s(e,o);return(await kg(u)).exists()?console.log(` Question with hash ${o} already exists`):(console.log(` Saving new question "${s.title}" with ID: ${o}`),await To(u,{question_id:o,...r,source:"ai-or-mock",created_at:wo()})),o}async function Lm(s=10,e){try{const n=xt(ht,"Questions"),r=on(n,Gh("created_at","desc"),fa(s*3)),o=await un(r),u=[];o.forEach(y=>{const p=y.data();u.push({id:y.id,title:p.title,language:p.language,difficulty:p.difficulty,description:p.description,starterCode:p.starterCode,testCases:p.testCases||[],solution:p.solution||""})});let f=u;if(e)try{const y=on(xt(ht,"Achievements"),ln("user_id","==",e)),p=await un(y),b=new Set;p.forEach(w=>{const x=w.data();x.question_id&&b.add(x.question_id)}),f=u.filter(w=>!b.has(w.id)),console.log(`Filtered out ${b.size} solved questions from ${u.length} total questions`)}catch(y){console.warn("Error filtering solved questions, showing all questions:",y),f=u}return f.length<s&&(console.log(`Not enough unsolved questions (${f.length}), including solved ones`),f=u),f.sort(()=>.5-Math.random()).slice(0,s)}catch(n){return console.error("Error fetching random questions:",n),D4(s)}}let Bl=new Set;const C4=10;function I4(s){if(Bl.add(s),Bl.size>C4){const e=Bl.values().next().value;e&&Bl.delete(e)}}async function Bb(s=10,e,n){try{console.log(" Fetching smart questions with hybrid approach...");const r=Math.max(1,Math.floor(s*.7)),o=s-r;console.log(` Target: ${r} from DB + ${o} fresh questions`);const u=await N4(r*3,e,n),f=u.filter(q=>!Bl.has(q.id));console.log(` Found ${u.length} unsolved questions, ${f.length} after filtering recent ones`);const g=f.sort(()=>.5-Math.random()).slice(0,r);g.forEach(q=>I4(q.id));const y=g.length,p=Math.max(0,s-y);console.log(` Adjusted: ${y} from DB + ${p} fresh questions`);const b=p>0?await Lm(p,e):[],x=[...g,...b].sort(()=>.5-Math.random());return console.log(` Returning ${x.length} smart questions`),x.slice(0,s)}catch(r){return console.error(" Error in smart question fetching, falling back to random:",r),Lm(s,e)}}async function N4(s,e,n){try{if(!e||s<=0)return Lm(Math.max(1,s));const r=on(xt(ht,"Achievements"),ln("user_id","==",e)),o=await un(r),u=new Set;o.forEach(w=>{const x=w.data();x.question_id&&u.add(x.question_id)});const f=xt(ht,"Questions"),g=Math.max(1,s*3);let y=on(f,Gh("created_at","desc"),fa(g));const p=await un(y),b=[];return p.forEach(w=>{const x=w.data();u.has(w.id)||n!=null&&n.level&&x.difficulty!==n.level||n!=null&&n.languages&&n.languages.length>0&&!n.languages.includes(x.language)||b.push({id:w.id,title:x.title,language:x.language,difficulty:x.difficulty,description:x.description,starterCode:x.starterCode,testCases:x.testCases||[],solution:x.solution||""})}),console.log(` Found ${b.length} unsolved questions matching preferences`),b.slice(0,s)}catch(r){return console.error("Error fetching unsolved questions:",r),[]}}function D4(s){return[{id:"fallback-1",title:"Two Sum",language:"JavaScript",difficulty:"Beginner",description:"Given an array of integers and a target sum, return indices of two numbers that add up to the target.",starterCode:`function twoSum(nums, target) {
  // Your code here
}`,testCases:[{input:{nums:[2,7,11,15],target:9},expected:"[0, 1]"},{input:{nums:[3,2,4],target:6},expected:"[1, 2]"}],solution:""},{id:"fallback-2",title:"Reverse String",language:"Python",difficulty:"Beginner",description:"Write a function that reverses a string.",starterCode:`def reverse_string(s):
    # Your code here
    pass`,testCases:[{input:{s:"hello"},expected:"olleh"},{input:{s:"world"},expected:"dlrow"}],solution:""},{id:"fallback-3",title:"Binary Search",language:"Java",difficulty:"Intermediate",description:"Implement binary search algorithm to find target in sorted array.",starterCode:`public int binarySearch(int[] arr, int target) {
    // Your code here
    return -1;
}`,testCases:[{input:{arr:[1,3,5,7,9],target:5},expected:"2"},{input:{arr:[1,3,5,7,9],target:10},expected:"-1"}],solution:""},{id:"fallback-4",title:"Fibonacci Sequence",language:"Go",difficulty:"Intermediate",description:"Generate the nth Fibonacci number efficiently.",starterCode:`func fibonacci(n int) int {
    // Your code here
    return 0
}`,testCases:[{input:{n:5},expected:"5"},{input:{n:10},expected:"55"}],solution:""},{id:"fallback-5",title:"Valid Parentheses",language:"TypeScript",difficulty:"Intermediate",description:"Determine if the input string has valid parentheses.",starterCode:`function isValid(s: string): boolean {
    // Your code here
    return false;
}`,testCases:[{input:{s:"()"},expected:"true"},{input:{s:"([)]"},expected:"false"}],solution:""}].slice(0,s)}async function O4(s,e){try{console.log(" Fetching question from database only (no API calls)"),console.log(" User settings:",e);const n=zb();console.log(` Question history: ${n.shownQuestionIds.length} questions shown`);const r=on(xt(ht,"Achievements"),ln("user_id","==",s)),o=await un(r),u=new Set;o.forEach(K=>{const M=K.data();M.question_id&&u.add(M.question_id)}),console.log(` User has solved ${u.size} questions`);const f=xt(ht,"Questions"),g=on(f,Gh("created_at","desc"),fa(200)),y=await un(g),p=[],b=[];y.forEach(K=>{const M=K.data();if(u.has(K.id)||e!=null&&e.level&&M.difficulty!==e.level||e!=null&&e.languages&&e.languages.length>0&&!e.languages.includes(M.language))return;const k={id:K.id,title:M.title,language:M.language,difficulty:M.difficulty,description:M.description,starterCode:M.starterCode,testCases:M.testCases||[],solution:M.solution||""};n.shownQuestionIds.includes(K.id)?b.push(k):p.push(k)}),console.log(` Found ${p.length} new questions, ${b.length} previously shown`);let w=p.length>0?p:b;if(w.length===0)throw new Error("No questions available matching your settings. Try adjusting your preferences or switch to AI mode.");p.length===0&&b.length>0&&(console.log(" All matching questions have been shown. Resetting history."),R4());const x=Math.floor(Math.random()*w.length),q=w[x];return x4(q.id),console.log(` Selected question: ${q.title} (${q.difficulty})`),q}catch(n){throw console.error(" Error fetching database-only question:",n),n}}async function M4(){try{const s=xt(ht,"Questions"),e=on(s,Gh("created_at","desc"),fa(100)),n=await un(e),r=new Set;n.forEach(u=>{const f=u.data();f.language&&typeof f.language=="string"&&r.add(f.language)});const o=Array.from(r).sort();return o.length>0?(console.log(" Fetched unique languages from database:",o),o):(console.log(" No languages found in database, using fallback categories"),[])}catch(s){return console.error(" Error fetching unique languages:",s),[]}}async function V4(s){const{userId:e,questionId:n,userCode:r,results:o}=s,u=xt(ht,"Submissions"),f=_s(u),g=o.every(y=>y.passed);if(await To(f,{submission_id:f.id,user_id:e,question_id:n,user_code:r,result:o,created_at:wo(),passed_all_tests:g}),g){const y=xt(ht,"Achievements"),p=_s(y);await To(p,{ac_id:p.id,user_id:e,question_id:n,completionDate:wo()})}return{passedAll:g}}const Hb="https://curator-305149132359.europe-west1.run.app";async function hm(s){console.log(" Sending request to curator with filters:",s);const e=await fetch(`${Hb}/api/getQuestion`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filters:s||{}})});if(!e.ok){const r=await e.text().catch(()=>"Unknown error");throw new Error(`Curator API error: ${e.status} ${r}`)}const n=await e.json();return console.log(" Received challenge from curator - Difficulty:",n.difficulty),{id:n.questionId,title:n.title,language:n.language,difficulty:n.difficulty,description:n.description,starterCode:n.starterCode,testCases:n.testCases,solution:n.solution||""}}let Fb=0;function j4(){return Fb}function fm(){Fb++}function k4(s){const e=[[!0,!1,!0,!1,!0,!1,!1,!0],[!0,!1,!1,!0,!1,!0,!1,!0],[!1,!0,!1,!0,!0,!1,!0,!1]],n=Math.floor(Date.now()/(1e3*60*30))%e.length,r=e[n],o=s%r.length;return console.log(` Using pattern ${n+1}, position ${o+1}/${r.length}`),r[o]}async function L4(s,e){try{console.log(" Using alternating question fetching strategy...");const n=j4(),r=k4(n);if(console.log(` Question #${n+1} - Source: ${r?"AI (Gemini)":"Database"}`),r)return console.log(" Generating fresh question via Gemini API..."),fm(),await hm(e);{console.log(" Fetching question from database...");const o=await Bb(1,s,e);return o.length>0?(console.log(" Returning question from database"),fm(),o[0]):(console.log(" No DB questions available, falling back to Gemini..."),fm(),await hm(e))}}catch(n){return console.error(" Smart question fetching failed, falling back to Gemini:",n),await hm(e)}}async function U4(s){console.log(" Generating answer for challenge:",s.title);const e=new AbortController,n=setTimeout(()=>e.abort(),3e4);try{const r={title:s.title,description:s.description,language:s.language,difficulty:s.difficulty,starterCode:s.starterCode,testCases:s.testCases},o=await fetch(`${Hb}/api/generateAnswer`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),signal:e.signal});if(clearTimeout(n),!o.ok){const f=await o.text().catch(()=>"Unknown error");throw new Error(`Answer generation failed: ${o.status} - ${f}`)}const u=await o.json();if(!u.solution)throw new Error("No solution returned from server");return console.log(" Answer generated successfully"),u.solution}catch(r){throw clearTimeout(n),r.name==="AbortError"?(console.error(" Answer generation timed out after 30 seconds"),new Error("Answer generation timed out. Please try again.")):(console.error(" Answer generation failed:",r),r)}}const kl=({label:s,Icon:e,isActive:n,onClick:r})=>_.jsxs("button",{onClick:r,className:`flex flex-col items-center justify-center gap-1 w-full transition-colors duration-200 ${n?"text-white":"text-gray-500 hover:text-gray-300"}`,children:[_.jsx(e,{className:"w-6 h-6"}),_.jsx("span",{className:"text-xs font-medium",children:s})]}),P4=({activeView:s,setActiveView:e})=>_.jsx("footer",{className:"fixed bottom-0 left-0 right-0 bg-black border-t border-gray-800",children:_.jsxs("nav",{className:"flex items-center justify-around max-w-lg mx-auto h-16 px-2",children:[_.jsx(kl,{label:"Home",Icon:n4,viewType:"home",isActive:s==="home",onClick:()=>e("home")}),_.jsx(kl,{label:"Discover",Icon:i4,viewType:"discover",isActive:s==="discover",onClick:()=>e("discover")}),_.jsx(kl,{label:"Achievements",Icon:rh,viewType:"achievements",isActive:s==="achievements",onClick:()=>e("achievements")}),_.jsx(kl,{label:"Settings",Icon:Lb,viewType:"settings",isActive:s==="settings",onClick:()=>e("settings")}),_.jsx(kl,{label:"Profile",Icon:kb,viewType:"profile",isActive:s==="profile",onClick:()=>e("profile")})]})}),z4=({user:s,currentMode:e="ai",onOpenModeSelection:n})=>{var r;return _.jsx("header",{className:"px-4 pt-2",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Ug,{className:"h-8 w-8 text-sky-400"}),_.jsx("span",{className:"text-xl font-bold text-white",children:"Code Swipe"})]}),_.jsx("div",{className:"flex flex-col items-end gap-1.5",children:s&&_.jsx(_.Fragment,{children:_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-sm text-slate-200 max-w-[120px] sm:max-w-none truncate",children:s.displayName||((r=s.email)==null?void 0:r.split("@")[0])||"User"}),s.photoURL?_.jsx("img",{src:s.photoURL,alt:"User",className:"h-8 w-8 rounded-full flex-shrink-0"}):_.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-br from-sky-400 to-blue-600 flex items-center justify-center flex-shrink-0",children:_.jsx("span",{className:"text-white text-sm font-medium",children:(s.displayName||s.email||"U")[0].toUpperCase()})})]})})})]})})},q4=({onSelectChallenge:s})=>{const[e,n]=ee.useState([]),[r,o]=ee.useState(!0),[u,f]=ee.useState(null),[g,y]=ee.useState(""),[p,b]=ee.useState("For You"),[w,x]=ee.useState(["For You"]),[q,K]=ee.useState(!0);ee.useEffect(()=>{k(),M()},[]);const M=async()=>{K(!0);try{const ie=await M4();ie&&ie.length>0?(x(["For You",...ie]),console.log(" Loaded dynamic categories from database:",ie)):(x(["For You","JavaScript","Python","Java","Go","TypeScript"]),console.log(" Using fallback categories (database returned empty)"))}catch(ie){console.error(" Failed to load categories:",ie),x(["For You","JavaScript","Python","Java","Go","TypeScript"]),console.log(" Using fallback categories (error occurred)")}finally{K(!1)}},k=async()=>{var ie;o(!0),f(null);try{const ye=(ie=at.currentUser)==null?void 0:ie.uid,me=await Bb(10,ye);n(me)}catch(ye){console.error("Failed to load questions:",ye),f(ye.message||"Failed to load questions")}finally{o(!1)}},re=e.filter(ie=>{const ye=ie.title.toLowerCase().includes(g.toLowerCase())||ie.description.toLowerCase().includes(g.toLowerCase()),me=p==="For You"||ie.language.toLowerCase()===p.toLowerCase();return ye&&me}),ue=ie=>{switch(ie.toLowerCase()){case"beginner":return"text-green-400";case"intermediate":return"text-yellow-400";case"advanced":return"text-orange-400";case"expert":return"text-red-400";default:return"text-gray-400"}},le=ie=>({javascript:"bg-yellow-500",python:"bg-blue-500",java:"bg-red-500",go:"bg-cyan-500",typescript:"bg-blue-600","c++":"bg-purple-500","c#":"bg-green-600",rust:"bg-orange-600"})[ie.toLowerCase()]||"bg-gray-500";return r||q?_.jsx("div",{className:"flex h-full items-center justify-center",children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"w-12 h-12 border-4 border-red-400 border-dashed rounded-full animate-spin mx-auto mb-4"}),_.jsx("p",{className:"text-gray-300",children:r?"Loading questions...":"Loading categories..."})]})}):u?_.jsx("div",{className:"flex h-full items-center justify-center",children:_.jsxs("div",{className:"text-center max-w-md",children:[_.jsx("p",{className:"text-red-400 mb-4",children:u}),_.jsx("button",{onClick:k,className:"px-4 py-2 bg-sky-600 text-white rounded-md hover:bg-sky-500",children:"Retry"})]})}):_.jsx("div",{className:"h-full bg-black page-container",children:_.jsxs("div",{className:"p-4 pb-20",children:[_.jsxs("div",{className:"relative mb-4",children:[_.jsx("input",{type:"text",placeholder:"Search questions, languages, or topics",value:g,onChange:ie=>y(ie.target.value),className:"w-full bg-gray-900 rounded-full py-3 pl-10 pr-4 text-white border-none focus:outline-none focus:ring-2 focus:ring-red-500 placeholder-gray-400"}),_.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 flex items-center justify-center",children:_.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),_.jsx("div",{className:"mb-6 overflow-x-auto whitespace-nowrap pb-2",children:_.jsx("div",{className:"inline-flex gap-3",children:w.map(ie=>_.jsx("button",{onClick:()=>b(ie),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${p===ie?"bg-red-500 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:ie},ie))})}),_.jsxs("div",{className:"flex justify-between items-center mb-4",children:[_.jsx("h3",{className:"text-lg font-semibold",children:p==="For You"?"Trending Questions":`${p} Questions`}),_.jsx("button",{onClick:k,className:"text-sky-400 text-sm hover:text-sky-300",children:"Refresh"})]}),re.length===0?_.jsxs("div",{className:"text-center py-12",children:[_.jsx("p",{className:"text-gray-400 mb-4",children:"No questions found"}),_.jsx("button",{onClick:k,className:"px-4 py-2 bg-sky-600 text-white rounded-md hover:bg-sky-500",children:"Load More Questions"})]}):_.jsx("div",{className:"space-y-4",children:re.map((ie,ye)=>{var me;return _.jsxs("div",{onClick:()=>s(ie),className:"bg-gray-900 rounded-lg p-4 cursor-pointer hover:bg-gray-800 transition-colors border border-gray-800",children:[_.jsxs("div",{className:"flex justify-between items-start mb-2",children:[_.jsx("h4",{className:"text-white font-medium text-lg flex-1 mr-2",children:ie.title}),_.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[_.jsx("span",{className:`inline-block w-3 h-3 rounded-full ${le(ie.language)}`}),_.jsx("span",{className:"text-xs text-gray-400",children:ie.language})]})]}),_.jsx("p",{className:"text-gray-300 text-sm mb-3 line-clamp-2",children:ie.description}),_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{className:`text-xs font-medium ${ue(ie.difficulty)}`,children:ie.difficulty}),_.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[_.jsxs("span",{children:[((me=ie.testCases)==null?void 0:me.length)||0," tests"]}),_.jsx("span",{children:""}),_.jsx("span",{children:"Tap to solve"})]})]})]},`${ie.title}-${ye}`)})})]})})};async function B4(s){try{const e={...s,datetime:new Date},n=await Ab(xt(ht,"Achievements"),e);return console.log("Achievement saved with ID:",n.id),n.id}catch(e){throw console.error("Error saving achievement:",e),e}}async function Gb(s){var e,n,r,o,u,f,g,y,p,b,w;try{const x=on(xt(ht,"Achievements"),ln("user_id","==",s)),q=await un(x),K=[];for(const M of q.docs){const k=M.data();try{const re=_s(ht,"Questions",k.question_id),ue=await kg(re);if(ue.exists()){const le=ue.data();K.push({ac_id:M.id,completionDate:((e=k.datetime)==null?void 0:e.toDate())||new Date,question_id:k.question_id,user_id:k.user_id,title:le.title||"Unknown Challenge",description:le.description||"No description available",difficulty:le.difficulty||"Intermediate",language:le.language||"JavaScript",solution:k.solution||""})}else K.push({ac_id:M.id,completionDate:((n=k.datetime)==null?void 0:n.toDate())||new Date,question_id:k.question_id,user_id:k.user_id,title:((r=k.question)==null?void 0:r.title)||"Unknown Challenge",description:((o=k.question)==null?void 0:o.description)||"No description available",difficulty:((u=k.question)==null?void 0:u.difficulty)||"Intermediate",language:((f=k.question)==null?void 0:f.language)||"JavaScript",solution:k.solution||""})}catch(re){console.warn("Error fetching question data for achievement:",M.id,re),K.push({ac_id:M.id,completionDate:((g=k.datetime)==null?void 0:g.toDate())||new Date,question_id:k.question_id,user_id:k.user_id,title:((y=k.question)==null?void 0:y.title)||"Unknown Challenge",description:((p=k.question)==null?void 0:p.description)||"No description available",difficulty:((b=k.question)==null?void 0:b.difficulty)||"Intermediate",language:((w=k.question)==null?void 0:w.language)||"JavaScript",solution:k.solution||""})}}return K.sort((M,k)=>k.completionDate.getTime()-M.completionDate.getTime()),K}catch(x){throw console.error("Error fetching achievements:",x),x}}async function H4(s,e){try{const n=on(xt(ht,"Achievements"),ln("user_id","==",s),ln("question_id","==",e));return!(await un(n)).empty}catch(n){return console.error("Error checking if question solved:",n),!1}}async function F4(s){try{const e=await Gb(s),n={totalSolved:e.length,byDifficulty:{Beginner:0,Intermediate:0,Advanced:0,Expert:0},byLanguage:{},recentSolves:e.slice(0,5)};return e.forEach(r=>{var f,g;const o=((f=r.question)==null?void 0:f.difficulty)||r.difficulty||"Intermediate";o in n.byDifficulty&&n.byDifficulty[o]++;const u=((g=r.question)==null?void 0:g.language)||r.language||"JavaScript";n.byLanguage[u]=(n.byLanguage[u]||0)+1}),n}catch(e){throw console.error("Error getting user stats:",e),e}}const G4=()=>{const[s,e]=ee.useState([]),[n,r]=ee.useState(!0),[o,u]=ee.useState(null),[f,g]=ee.useState("All"),y=["All","JavaScript","Python","Java","Go","TypeScript"];ee.useEffect(()=>{p()},[]);const p=async()=>{if(at.currentUser){r(!0),u(null);try{const k=await Gb(at.currentUser.uid);e(k)}catch(k){console.error("Failed to load achievements:",k),u(k.message||"Failed to load achievements")}finally{r(!1)}}},b=s.filter(k=>f==="All"?!0:k.language===f),w=k=>{switch(k.toLowerCase()){case"beginner":return"text-green-400 bg-green-400/10";case"intermediate":return"text-yellow-400 bg-yellow-400/10";case"advanced":return"text-orange-400 bg-orange-400/10";case"expert":return"text-red-400 bg-red-400/10";default:return"text-gray-400 bg-gray-400/10"}},x=k=>({javascript:"bg-yellow-500",python:"bg-blue-500",java:"bg-red-500",go:"bg-cyan-500",typescript:"bg-blue-600","c++":"bg-purple-500","c#":"bg-green-600",rust:"bg-orange-600"})[k.toLowerCase()]||"bg-gray-500",q=k=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(k),K=()=>{const k=s.length,re=s.reduce((le,ie)=>(le[ie.difficulty]=(le[ie.difficulty]||0)+1,le),{}),ue=s.reduce((le,ie)=>(le[ie.language]=(le[ie.language]||0)+1,le),{});return{total:k,byDifficulty:re,byLanguage:ue}};if(n)return _.jsx("div",{className:"flex h-full items-center justify-center",children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"w-12 h-12 border-4 border-red-400 border-dashed rounded-full animate-spin mx-auto mb-4"}),_.jsx("p",{className:"text-gray-300",children:"Loading achievements..."})]})});if(o)return _.jsx("div",{className:"flex h-full items-center justify-center",children:_.jsxs("div",{className:"text-center max-w-md",children:[_.jsx("p",{className:"text-red-400 mb-4",children:o}),_.jsx("button",{onClick:p,className:"px-4 py-2 bg-sky-600 text-white rounded-md hover:bg-sky-500",children:"Retry"})]})});const M=K();return _.jsx("div",{className:"h-full bg-black page-container",children:_.jsxs("div",{className:"p-4 pb-20",children:[_.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[_.jsx(rh,{className:"w-8 h-8 text-yellow-500"}),_.jsx("h1",{className:"text-2xl font-bold text-white",children:"My Achievements"})]}),_.jsx("div",{className:"mb-6 overflow-x-auto whitespace-nowrap pb-2",children:_.jsx("div",{className:"inline-flex gap-3",children:y.map(k=>{const re=k==="All"?M.total:M.byLanguage[k]||0;return k!=="All"&&re===0?null:_.jsxs("button",{onClick:()=>g(k),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${f===k?"bg-red-500 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:[k,k!=="All"&&M.byLanguage[k]&&_.jsxs("span",{className:"ml-2 text-xs opacity-75",children:["(",M.byLanguage[k],")"]})]},k)})})}),b.length===0?_.jsxs("div",{className:"text-center py-12",children:[_.jsx(rh,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"}),_.jsx("h3",{className:"text-xl font-semibold text-slate-400 mb-2",children:f==="All"?"No achievements yet":`No ${f} achievements`}),_.jsx("p",{className:"text-slate-500 mb-4",children:f==="All"?"Start solving challenges to earn your first achievement!":`Try solving some ${f} challenges to earn achievements.`})]}):_.jsx("div",{className:"space-y-4",children:b.map(k=>_.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 hover:bg-gray-800 transition-colors border border-gray-800",children:[_.jsxs("div",{className:"flex justify-between items-start mb-3",children:[_.jsxs("div",{className:"flex-1",children:[_.jsx("h3",{className:"text-white font-semibold text-lg mb-1",children:k.title}),_.jsx("p",{className:"text-slate-300 text-sm mb-2 line-clamp-2",children:k.description})]}),_.jsx(rh,{className:"w-6 h-6 text-yellow-500 flex-shrink-0 ml-3"})]}),_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:`inline-block w-3 h-3 rounded-full ${x(k.language)}`}),_.jsx("span",{className:"text-xs text-slate-400",children:k.language})]}),_.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w(k.difficulty)}`,children:k.difficulty})]}),_.jsxs("div",{className:"text-xs text-slate-500",children:["Solved on ",q(k.completionDate)]})]})]},k.ac_id))})]})})},Q4=["JavaScript","Python","Go","Java","TypeScript","C++","C#","Rust"],Y4=["Beginner","Intermediate","Advanced","Expert"],K4=["Algorithms","Data Structures","Web Development","System Design","Database","Machine Learning","DevOps","Security"],$4=({onSettingsChange:s})=>{const[e,n]=ee.useState({level:"Intermediate",languages:["JavaScript"],topics:["Algorithms"],notifications:!0,darkMode:!0,autoSave:!0}),[r,o]=ee.useState(!0),[u,f]=ee.useState(!1),[g,y]=ee.useState(null),[p,b]=ee.useState(null);ee.useEffect(()=>{w()},[]);const w=async()=>{if(at.currentUser){o(!0),y(null);try{const M=await Rb(at.currentUser.uid);M&&n({level:M.level||"Intermediate",languages:M.languages||["JavaScript"],topics:M.topics||["Algorithms"],notifications:M.notifications??!0,darkMode:M.darkMode??!0,autoSave:M.autoSave??!0})}catch(M){console.error("Failed to load settings:",M),y(M.message||"Failed to load settings")}finally{o(!1)}}},x=async()=>{if(at.currentUser){f(!0),y(null),b(null);try{await UI(at.currentUser.uid,e),b("Settings saved successfully!"),s==null||s(),setTimeout(()=>b(null),3e3)}catch(M){console.error("Failed to save settings:",M),y(M.message||"Failed to save settings")}finally{f(!1)}}},q=M=>{n(k=>({...k,languages:k.languages.includes(M)?k.languages.filter(re=>re!==M):[...k.languages,M]}))},K=M=>{n(k=>({...k,topics:k.topics.includes(M)?k.topics.filter(re=>re!==M):[...k.topics,M]}))};return r?_.jsx("div",{className:"flex h-full items-center justify-center",children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"w-12 h-12 border-4 border-red-400 border-dashed rounded-full animate-spin mx-auto mb-4"}),_.jsx("p",{className:"text-gray-300",children:"Loading settings..."})]})}):_.jsx("div",{className:"h-full bg-black page-container",children:_.jsxs("div",{className:"p-4 pb-20",children:[_.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[_.jsx(Lb,{className:"w-8 h-8 text-sky-400"}),_.jsx("h1",{className:"text-2xl font-bold text-white",children:"Settings"})]}),g&&_.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4 mb-4",children:_.jsx("p",{className:"text-red-400",children:g})}),p&&_.jsx("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-4 mb-4",children:_.jsx("p",{className:"text-green-400",children:p})}),_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"bg-slate-800 rounded-lg p-4",children:[_.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Difficulty Level"}),_.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Choose your preferred challenge difficulty"}),_.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Y4.map(M=>_.jsx("button",{onClick:()=>n(k=>({...k,level:M})),className:`p-3 rounded-lg text-sm font-medium transition-colors ${e.level===M?"bg-sky-500 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:M},M))})]}),_.jsxs("div",{className:"bg-slate-800 rounded-lg p-4",children:[_.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Programming Languages"}),_.jsx("p",{className:"text-slate-400 text-sm mb-4",children:"Select languages you want to practice (at least one required)"}),_.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Q4.map(M=>_.jsx("button",{onClick:()=>q(M),disabled:e.languages.length===1&&e.languages.includes(M),className:`p-3 rounded-lg text-sm font-medium transition-colors ${e.languages.includes(M)?"bg-sky-500 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"} ${e.languages.length===1&&e.languages.includes(M)?"opacity-50 cursor-not-allowed":""}`,children:M},M))}),_.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["Selected: ",e.languages.join(", ")]})]}),_.jsxs("div",{className:"bg-slate-800 rounded-lg p-4",children:[_.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Topics of Interest"}),_.jsx("p",{className:"text-slate-400 text-sm mb-4",children:"Choose topics you want to focus on"}),_.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:K4.map(M=>_.jsx("button",{onClick:()=>K(M),className:`p-3 rounded-lg text-sm font-medium transition-colors ${e.topics.includes(M)?"bg-sky-500 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:M},M))}),_.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["Selected: ",e.topics.length>0?e.topics.join(", "):"None"]})]}),_.jsxs("div",{className:"bg-slate-800 rounded-lg p-4",children:[_.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"App Preferences"}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{children:[_.jsx("p",{className:"text-white font-medium",children:"Notifications"}),_.jsx("p",{className:"text-slate-400 text-sm",children:"Receive notifications about new challenges"})]}),_.jsx("button",{onClick:()=>n(M=>({...M,notifications:!M.notifications})),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${e.notifications?"bg-sky-500":"bg-slate-600"}`,children:_.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e.notifications?"translate-x-6":"translate-x-1"}`})})]}),_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{children:[_.jsx("p",{className:"text-white font-medium",children:"Auto-save Progress"}),_.jsx("p",{className:"text-slate-400 text-sm",children:"Automatically save your code as you type"})]}),_.jsx("button",{onClick:()=>n(M=>({...M,autoSave:!M.autoSave})),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${e.autoSave?"bg-sky-500":"bg-slate-600"}`,children:_.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e.autoSave?"translate-x-6":"translate-x-1"}`})})]})]})]}),_.jsx("div",{className:"flex justify-end",children:_.jsxs("button",{onClick:x,disabled:u,className:"px-6 py-3 bg-sky-600 hover:bg-sky-500 disabled:bg-sky-600/50 text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:[u&&_.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),u?"Saving...":"Save Settings"]})})]})]})})},X4=({user:s})=>{var K;const[e,n]=ee.useState(null),[r,o]=ee.useState([]),[u,f]=ee.useState(!0),[g,y]=ee.useState(null);ee.useEffect(()=>{p()},[]);const p=async()=>{if(at.currentUser){f(!0),y(null);try{const[M,k,re]=await Promise.all([F4(at.currentUser.uid),Ub(at.currentUser.uid),l4(at.currentUser.uid)]),ue=M.totalSolved<5?"Beginner":M.totalSolved<15?"Intermediate":M.totalSolved<30?"Advanced":"Expert",le=Math.max(1,100-M.totalSolved);n({...M,totalLikes:k.length,userLevel:ue,ranking:le}),o(re)}catch(M){console.error("Failed to load user stats:",M),y(M.message||"Failed to load profile data")}finally{f(!1)}}},b=async()=>{try{await l2()}catch(M){console.error("Error signing out:",M)}},w=M=>({javascript:"bg-yellow-500",python:"bg-blue-500",java:"bg-red-500",go:"bg-cyan-500",typescript:"bg-blue-600","c++":"bg-purple-500","c#":"bg-green-600",rust:"bg-orange-600"})[M.toLowerCase()]||"bg-gray-500",x=M=>{switch(M.toLowerCase()){case"beginner":return"text-green-400";case"intermediate":return"text-yellow-400";case"advanced":return"text-orange-400";case"expert":return"text-red-400";default:return"text-gray-400"}},q=M=>{try{const k=M!=null&&M.toDate?M.toDate():new Date(M);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long"}).format(k)}catch{return"Recently"}};return u?_.jsx("div",{className:"flex h-full items-center justify-center",children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"w-12 h-12 border-4 border-red-400 border-dashed rounded-full animate-spin mx-auto mb-4"}),_.jsx("p",{className:"text-gray-300",children:"Loading profile..."})]})}):g?_.jsx("div",{className:"flex h-full items-center justify-center",children:_.jsxs("div",{className:"text-center max-w-md",children:[_.jsx("p",{className:"text-red-400 mb-4",children:g}),_.jsx("button",{onClick:p,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-500",children:"Retry"})]})}):_.jsx("div",{className:"h-full bg-black page-container",children:_.jsxs("div",{className:"p-4 pb-20",children:[_.jsx("div",{className:"bg-slate-800 rounded-lg p-6 mb-6",children:_.jsxs("div",{className:"flex flex-col items-center text-center",children:[_.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-sky-400 to-blue-600 flex items-center justify-center mb-4",children:s.photoURL?_.jsx("img",{src:s.photoURL,alt:"Profile",className:"w-full h-full rounded-full object-cover"}):_.jsx(kb,{className:"w-16 h-16 text-white"})}),_.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:s.displayName||"Anonymous Developer"}),_.jsx("p",{className:"text-slate-400 mb-2",children:s.email}),_.jsxs("p",{className:"text-sm text-slate-500",children:["Joined ",q((K=s.metadata)==null?void 0:K.creationTime)]})]})}),e&&_.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[_.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 text-center",children:[_.jsx("div",{className:"text-2xl font-bold text-sky-400 mb-1",children:e.totalSolved}),_.jsx("div",{className:"text-sm text-slate-400",children:"Problems Solved"})]}),_.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 text-center",children:[_.jsx("div",{className:"text-2xl font-bold text-purple-400 mb-1",children:e.userLevel}),_.jsx("div",{className:"text-sm text-slate-400",children:"Level"})]}),_.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 text-center",children:[_.jsx("div",{className:"text-2xl font-bold text-pink-400 mb-1",children:e.totalLikes}),_.jsx("div",{className:"text-sm text-slate-400",children:"Total Likes"})]}),_.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 text-center",children:[_.jsxs("div",{className:"text-2xl font-bold text-yellow-400 mb-1",children:["#",e.ranking]}),_.jsx("div",{className:"text-sm text-slate-400",children:"Ranking"})]})]}),e&&Object.keys(e.byLanguage).length>0&&_.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 mb-6",children:[_.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[_.jsx(Ug,{className:"w-5 h-5"}),"Languages"]}),_.jsx("div",{className:"space-y-3",children:Object.entries(e.byLanguage).sort(([,M],[,k])=>k-M).map(([M,k])=>_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("span",{className:`w-3 h-3 rounded-full ${w(M)}`}),_.jsx("span",{className:"text-white",children:M})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"w-20 bg-slate-700 rounded-full h-2",children:_.jsx("div",{className:`h-2 rounded-full ${w(M)}`,style:{width:`${Math.min(k/e.totalSolved*100,100)}%`}})}),_.jsx("span",{className:"text-slate-400 text-sm w-8 text-right",children:k})]})]},M))})]}),r.length>0&&_.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 mb-6",children:[_.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[_.jsx("svg",{className:"w-5 h-5 text-pink-500",fill:"currentColor",viewBox:"0 0 20 20",children:_.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),"Liked Questions"]}),_.jsx("div",{className:"space-y-3",children:r.slice(0,5).map((M,k)=>{const re=M.question;return _.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors cursor-pointer",children:[_.jsxs("div",{className:"flex-1",children:[_.jsx("h4",{className:"text-white font-medium",children:re.title}),_.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[_.jsx("span",{className:`text-xs ${x(re.difficulty)}`,children:re.difficulty}),_.jsx("span",{className:"text-slate-500",children:""}),_.jsx("span",{className:"text-xs text-slate-400",children:re.language})]})]}),_.jsx("svg",{className:"w-5 h-5 text-pink-500",fill:"currentColor",viewBox:"0 0 20 20",children:_.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})})]},k)})})]}),_.jsxs("div",{className:"bg-slate-800 rounded-lg p-4",children:[_.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Account"}),_.jsx("div",{className:"space-y-3",children:_.jsx("button",{onClick:b,className:"w-full p-3 bg-red-600 hover:bg-red-500 text-white rounded-lg transition-colors font-medium",children:"Sign Out"})})]})]})})},J4=()=>{const[s,e]=ee.useState(!1),[n,r]=ee.useState(null),o=async()=>{e(!0),r(null);try{await kI()}catch(u){console.error("Google Sign-In Error:",u);let f="Could not sign in. Please try again.";u.code==="auth/popup-blocked"?f="Pop-up was blocked by the browser. Please allow pop-ups for this site and try again.":u.code==="auth/unauthorized-domain"&&(f="This domain is not authorized for sign-in. Please add the correct domain to the authorized domains list in your Firebase settings."),r(f)}finally{e(!1)}};return _.jsxs("div",{className:"min-h-screen bg-slate-900 text-white flex flex-col items-center justify-center p-4",children:[_.jsxs("div",{className:"text-center",children:[_.jsxs("div",{className:"flex items-center justify-center gap-3",children:[_.jsx(Ug,{className:"h-12 w-12 text-sky-400"}),_.jsx("h1",{className:"text-5xl font-bold tracking-tight text-white sm:text-6xl",children:"CodeSwipe"})]}),_.jsx("p",{className:"mt-4 text-xl text-slate-300",children:"The fast-paced way to sharpen your coding skills."})]}),_.jsx("div",{className:"mt-16",children:_.jsxs("button",{onClick:o,disabled:s,className:"inline-flex items-center justify-center gap-3 w-full rounded-md bg-white px-6 py-3.5 text-sm font-semibold text-slate-800 shadow-sm hover:bg-slate-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors",children:[_.jsx(s4,{className:"w-5 h-5"}),s?"Signing in...":"Sign in with Google"]})}),n&&_.jsx("p",{className:"mt-4 text-sm text-red-400 max-w-md text-center",children:n})]})};function Z4({isOpen:s,onClose:e,challenge:n,testResults:r,allTestsPassed:o,userSolution:u,onNextQuestion:f,onRetryQuestion:g,onRepeatQuestion:y}){const[p,b]=ee.useState(null),[w,x]=ee.useState(!1);if(ee.useEffect(()=>{s&&!p&&(x(!0),E4(u,n.solution,n.language,o,n.title).then(M=>{b(M),x(!1)}).catch(M=>{console.error("Failed to get code review:",M),b({score:o?7:4,strength:o?"Solution works correctly!":"Keep practicing!",improvement:"Review your code and try again.",error:"AI review unavailable"}),x(!1)}))},[s,u,n,o,p]),ee.useEffect(()=>{s||(b(null),x(!1))},[s]),!s)return null;const q=r.filter(M=>M.passed).length,K=r.length;return _.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:_.jsxs("div",{className:"bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[_.jsx("div",{className:`p-6 rounded-t-lg ${o?"bg-green-600":"bg-red-600"}`,children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center space-x-3",children:[_.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${o?"bg-green-500":"bg-red-500"}`,children:o?_.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):_.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),_.jsxs("div",{children:[_.jsx("h2",{className:"text-xl font-bold text-white",children:o?"Congratulations!":"Tests Failed"}),_.jsx("p",{className:"text-white opacity-90",children:o?"All tests passed successfully!":`${q} of ${K} tests passed`})]})]}),_.jsx("button",{onClick:e,className:"text-white hover:text-gray-300 transition-colors",children:_.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),_.jsxs("div",{className:"p-6",children:[_.jsxs("div",{className:"mb-6",children:[_.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:n.title}),_.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:[_.jsx("span",{className:"bg-blue-600 px-2 py-1 rounded text-white",children:n.language}),_.jsx("span",{className:"bg-yellow-600 px-2 py-1 rounded text-white",children:n.difficulty})]})]}),_.jsxs("div",{className:"mb-6",children:[_.jsx("h4",{className:"text-md font-semibold text-white mb-3",children:"Test Results"}),_.jsx("div",{className:`p-4 rounded-lg border ${o?"bg-green-900 border-green-600":"bg-red-900 border-red-600"}`,children:_.jsx("div",{className:"space-y-4",children:r.map((M,k)=>_.jsxs("div",{children:[_.jsxs("div",{className:"flex items-center justify-between mb-2",children:[_.jsxs("span",{className:"font-medium text-white",children:["Test Case #",k+1]}),_.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium ${M.passed?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:M.passed?"Passed":"Failed"})]}),_.jsxs("div",{className:"text-sm space-y-1",children:[_.jsxs("div",{className:"text-gray-300",children:[_.jsx("span",{className:"font-medium",children:"Input:"})," ",JSON.stringify(M.input)]}),_.jsxs("div",{className:"text-gray-300",children:[_.jsx("span",{className:"font-medium",children:"Expected:"})," ",M.expected]}),_.jsxs("div",{className:"text-gray-300",children:[_.jsx("span",{className:"font-medium",children:"Got:"})," ",M.actual]}),M.error&&_.jsxs("div",{className:"text-red-400",children:[_.jsx("span",{className:"font-medium",children:"Error:"})," ",M.error]})]}),k<r.length-1&&_.jsx("div",{className:"mt-4 border-t border-gray-700"})]},k))})})]}),_.jsxs("div",{className:"mb-6",children:[_.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[_.jsx("svg",{className:"w-5 h-5 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),_.jsx("h4",{className:"text-md font-semibold text-white",children:"AI-Powered Code Review"})]}),w?_.jsx("div",{className:"p-4 rounded-lg bg-gray-700 border border-gray-600",children:_.jsxs("div",{className:"flex items-center space-x-3",children:[_.jsx("div",{className:"w-5 h-5 border-2 border-purple-400 border-t-transparent rounded-full animate-spin"}),_.jsx("span",{className:"text-gray-300",children:"Analyzing your code..."})]})}):p?_.jsxs("div",{className:"p-4 rounded-lg bg-gradient-to-br from-purple-900 to-indigo-900 border border-purple-600",children:[_.jsxs("div",{className:"flex items-center justify-between mb-4",children:[_.jsx("span",{className:"text-white font-medium",children:"Code Quality Score"}),_.jsxs("div",{className:"flex items-center space-x-2",children:[_.jsx("div",{className:"flex space-x-1",children:[...Array(10)].map((M,k)=>_.jsx("div",{className:`w-2 h-6 rounded ${k<(p.score||0)?"bg-gradient-to-t from-purple-500 to-pink-500":"bg-gray-600"}`},k))}),_.jsxs("span",{className:"text-white font-bold text-lg",children:[p.score,"/10"]})]})]}),_.jsx("div",{className:"mb-3",children:_.jsxs("div",{className:"flex items-start space-x-2",children:[_.jsx("svg",{className:"w-5 h-5 text-green-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),_.jsxs("div",{children:[_.jsx("p",{className:"text-green-400 font-medium text-sm",children:"Strength"}),_.jsx("p",{className:"text-gray-200 text-sm mt-1",children:p.strength})]})]})}),_.jsx("div",{children:_.jsxs("div",{className:"flex items-start space-x-2",children:[_.jsx("svg",{className:"w-5 h-5 text-yellow-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),_.jsxs("div",{children:[_.jsx("p",{className:"text-yellow-400 font-medium text-sm",children:"Improvement Suggestion"}),_.jsx("p",{className:"text-gray-200 text-sm mt-1",children:p.improvement})]})]})}),p.error&&_.jsx("div",{className:"mt-3 text-xs text-gray-400 italic",children:p.error})]}):null]}),_.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:o?_.jsxs(_.Fragment,{children:[_.jsx("button",{onClick:f,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Next Question"}),_.jsx("button",{onClick:y,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Repeat Question"})]}):_.jsxs(_.Fragment,{children:[_.jsx("button",{onClick:g,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Try Again"}),_.jsx("button",{onClick:f,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Skip Question"})]})})]})]})})}function W4({isOpen:s,onClose:e,challenge:n,onContinue:r}){return s?_.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:_.jsx("div",{className:"bg-gray-800 rounded-lg max-w-md w-full",children:_.jsxs("div",{className:"p-6 text-center",children:[_.jsx("div",{className:"mx-auto w-16 h-16 bg-yellow-500 rounded-full flex items-center justify-center mb-4",children:_.jsx("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:_.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),_.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Achievement Unlocked!"}),_.jsx("p",{className:"text-gray-300 mb-4",children:"You successfully solved a coding challenge!"}),_.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 mb-6",children:[_.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:n.title}),_.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm",children:[_.jsx("span",{className:"bg-blue-600 px-2 py-1 rounded text-white",children:n.language}),_.jsx("span",{className:"bg-yellow-600 px-2 py-1 rounded text-white",children:n.difficulty})]})]}),_.jsxs("div",{className:"mb-6",children:[_.jsx("div",{className:"animate-bounce",children:""}),_.jsx("p",{className:"text-yellow-400 font-medium mt-2",children:"Challenge Completed!"})]}),_.jsx("button",{onClick:r,className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Continue Coding"}),_.jsx("button",{onClick:e,className:"w-full mt-2 text-gray-400 hover:text-white transition-colors",children:"Close"})]})})}):null}const e5=({isOpen:s,onClose:e,error:n})=>s?_.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm",children:_.jsxs("div",{className:"bg-slate-900 rounded-2xl shadow-2xl max-w-md w-full border border-red-500/30 animate-fadeIn",children:[_.jsx("div",{className:"p-6 border-b border-slate-800",children:_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/20 flex items-center justify-center",children:_.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-xl font-bold text-white",children:"Error Occurred"}),_.jsx("p",{className:"text-sm text-slate-400",children:"Something went wrong"})]})]})}),_.jsx("div",{className:"p-6",children:_.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4",children:_.jsx("p",{className:"text-red-400 text-sm font-mono break-words",children:n})})}),_.jsx("div",{className:"p-6 border-t border-slate-800 flex justify-end",children:_.jsx("button",{onClick:e,className:"px-6 py-2.5 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-full transition-colors",children:"Close"})})]})}):null,t5=({isOpen:s})=>s?_.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:_.jsx("div",{className:"bg-slate-800/90 rounded-2xl shadow-2xl p-8 border border-slate-700",children:_.jsx("div",{className:"flex flex-col items-center gap-4",children:_.jsx("div",{className:"w-16 h-16 border-4 border-sky-400 border-t-transparent rounded-full animate-spin"})})})}):null,n5=({isOpen:s,onClose:e,currentMode:n,onModeChange:r})=>{const[o,u]=ee.useState(n);if(!s)return null;const f=()=>{r(o),e()};return _.jsxs("div",{className:"fixed inset-0 bg-slate-900/90 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:[_.jsxs("div",{className:"w-full max-w-md mx-auto bg-slate-800 rounded-2xl border border-slate-700 shadow-2xl transform transition-all duration-300 animate-slide-up",children:[_.jsxs("div",{className:"p-6 border-b border-slate-700",children:[_.jsx("h2",{className:"text-2xl font-bold text-white text-center",children:"Select Question Mode"}),_.jsx("p",{className:"text-slate-400 text-center text-sm mt-2",children:"Choose how you want to receive coding challenges"})]}),_.jsxs("div",{className:"p-6 space-y-4",children:[_.jsx("div",{onClick:()=>u("ai"),className:`p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 ${o==="ai"?"bg-sky-500/20 border-sky-500 shadow-lg":"bg-slate-700/50 border-slate-600 hover:bg-slate-700 hover:border-slate-500"}`,children:_.jsxs("div",{className:"flex items-start gap-3",children:[_.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex-shrink-0 mt-0.5 flex items-center justify-center ${o==="ai"?"border-sky-400 bg-sky-500":"border-slate-500"}`,children:o==="ai"&&_.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-white"})}),_.jsxs("div",{className:"flex-1",children:[_.jsx("h3",{className:`font-semibold mb-1 ${o==="ai"?"text-white":"text-slate-300"}`,children:"AI Mode (Gemini API)"}),_.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"Fresh questions generated by AI"}),_.jsxs("ul",{className:"text-xs text-slate-400 space-y-1",children:[_.jsx("li",{children:" Unlimited variety"}),_.jsx("li",{children:" Tailored to your preferences"}),_.jsx("li",{children:" Always unique challenges"})]})]})]})}),_.jsx("div",{onClick:()=>u("db"),className:`p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 ${o==="db"?"bg-sky-500/20 border-sky-500 shadow-lg":"bg-slate-700/50 border-slate-600 hover:bg-slate-700 hover:border-slate-500"}`,children:_.jsxs("div",{className:"flex items-start gap-3",children:[_.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex-shrink-0 mt-0.5 flex items-center justify-center ${o==="db"?"border-sky-400 bg-sky-500":"border-slate-500"}`,children:o==="db"&&_.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-white"})}),_.jsxs("div",{className:"flex-1",children:[_.jsx("h3",{className:`font-semibold mb-1 ${o==="db"?"text-white":"text-slate-300"}`,children:"DB Mode (Database only)"}),_.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"Questions from our database"}),_.jsxs("ul",{className:"text-xs text-slate-400 space-y-1",children:[_.jsx("li",{children:" No API calls"}),_.jsx("li",{children:" Filtered by your settings"}),_.jsx("li",{children:" No repetition tracking"})]})]})]})})]}),_.jsxs("div",{className:"p-4 bg-slate-900/50 border-t border-slate-700 rounded-b-2xl flex justify-end gap-3",children:[_.jsx("button",{onClick:e,className:"px-5 py-2.5 text-sm font-semibold text-slate-300 hover:bg-slate-700 rounded-md transition-colors",children:"Cancel"}),_.jsx("button",{onClick:f,className:"px-5 py-2.5 text-sm font-semibold text-white bg-sky-600 hover:bg-sky-500 rounded-md transition-colors shadow-sm",children:"Confirm"})]})]}),_.jsx("style",{children:`
        @keyframes fade-in {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slide-up {
          from { transform: translateY(20px); opacity: 0; }
          to { transform: translateY(0); opacity: 1; }
        }
        .animate-fade-in { animation: fade-in 0.3s ease-out forwards; }
        .animate-slide-up { animation: slide-up 0.4s ease-out forwards; }
      `})]})},i5={success:{bg:"bg-emerald-500/20",border:"border-emerald-500/50",icon:_.jsx("svg",{className:"w-5 h-5 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})},error:{bg:"bg-red-500/20",border:"border-red-500/50",icon:_.jsx("svg",{className:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})},info:{bg:"bg-sky-500/20",border:"border-sky-500/50",icon:_.jsx("svg",{className:"w-5 h-5 text-sky-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},warning:{bg:"bg-amber-500/20",border:"border-amber-500/50",icon:_.jsx("svg",{className:"w-5 h-5 text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}},s5=({message:s,type:e="info",isOpen:n,onClose:r,duration:o=5e3})=>{if(ee.useEffect(()=>{if(n&&o>0){const f=setTimeout(()=>{r()},o);return()=>clearTimeout(f)}},[n,o,r]),!n)return null;const u=i5[e];return _.jsx("div",{className:"fixed top-4 right-4 z-[70] animate-slideInRight",children:_.jsx("div",{className:`${u.bg} ${u.border} border rounded-lg shadow-2xl p-4 min-w-[300px] max-w-md backdrop-blur-sm`,children:_.jsxs("div",{className:"flex items-start gap-3",children:[_.jsx("div",{className:"flex-shrink-0 mt-0.5",children:u.icon}),_.jsx("div",{className:"flex-1",children:_.jsx("p",{className:"text-white text-sm font-medium break-words",children:s})}),_.jsx("button",{onClick:r,className:"flex-shrink-0 text-slate-400 hover:text-white transition-colors","aria-label":"Close notification",children:_.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})})},W_="codeswipe_question_mode",r5=()=>{const[s,e]=ee.useState(null),[n,r]=ee.useState(!0),[o,u]=ee.useState(null),[f,g]=ee.useState(!1),[y,p]=ee.useState(""),[b,w]=ee.useState([]),[x,q]=ee.useState(!1),[K,M]=ee.useState(null),[k,re]=ee.useState(null),[ue,le]=ee.useState(null),[ie,ye]=ee.useState("home"),[me,R]=ee.useState(!1),[A,C]=ee.useState(!1),[O,V]=ee.useState(!1),[L,I]=ee.useState(!1),[Fe,fe]=ee.useState(null),[H,ne]=ee.useState("ai"),[de,Ce]=ee.useState(!1),[He,N]=ee.useState(""),[Q,te]=ee.useState([]),[ae,ve]=ee.useState(""),[Re,Oe]=ee.useState(!1),[Et,rt]=ee.useState(""),[qi,bs]=ee.useState("info"),[Ts,Bi]=ee.useState(!1),Rt=ee.useCallback(async()=>{if(at.currentUser){g(!0),M(null);try{const pe=await Rb(at.currentUser.uid);console.log(" User settings retrieved:",pe),pe&&(N(pe.languages[0]||""),te(pe.topics||[]),ve(pe.level||""));const ze=pe?{level:pe.level,languages:pe.languages,topics:pe.topics}:void 0;console.log(" Filters:",ze),console.log(" Current mode:",H);let ft;H==="db"?(console.log(" Using DB Mode - fetching from database only"),ft=await O4(at.currentUser.uid,ze)):(console.log(" Using AI Mode - smart fetching with Gemini"),ft=await L4(at.currentUser.uid,ze)),console.log(" Challenge received - Difficulty:",ft.difficulty),u(ft),p(ft.starterCode)}catch(pe){console.error("Failed to load question:",pe),M(pe.message||"Failed to load question. Please try again."),V(!0)}finally{g(!1)}}},[H]);ee.useEffect(()=>{try{const pe=localStorage.getItem(W_);(pe==="ai"||pe==="db")&&ne(pe)}catch(pe){console.warn("Failed to restore mode from localStorage:",pe)}},[]),ee.useEffect(()=>{const pe=o2(at,ze=>{e(ze),r(!1),ze&&Rt()});return()=>pe()},[Rt]),ee.useEffect(()=>{s&&!n&&Rt()},[H,s,n,Rt]);const _r=ee.useCallback(async()=>{if(o){q(!0),M(null),w([]);try{const pe=await Z_(o);fe(pe);const ze=await _4(y,o.testCases,o.solution||"",o.language);w(ze);const ft=ze.every(it=>it.passed);I(ft),at.currentUser&&(await V4({userId:at.currentUser.uid,questionId:pe,userCode:y,results:ze}),ft&&(await H4(at.currentUser.uid,pe)||(await B4({user_id:at.currentUser.uid,question_id:pe,question:{title:o.title,language:o.language,difficulty:o.difficulty,description:o.description},solution:y}),setTimeout(()=>{C(!0)},2e3)))),R(!0)}catch(pe){M(pe.message),V(!0)}finally{q(!1)}}},[y,o]),Qn=()=>{R(!1),C(!1),Rt()},Er=pe=>{u(pe),ye("home")},ws=()=>{Rt()},yt=()=>{R(!1),p((o==null?void 0:o.starterCode)||""),w([]),M(null)},bt=()=>{R(!1),p((o==null?void 0:o.starterCode)||""),w([]),M(null)},ci=()=>{R(!1)},Mo=()=>{C(!1)},da=()=>{C(!1),Rt()},Qt=ee.useCallback(pe=>{ne(pe);try{localStorage.setItem(W_,pe)}catch(ze){console.warn("Failed to save mode to localStorage:",ze)}},[]),hi=()=>{Ce(!0)},Hi=ee.useCallback((pe,ze="info")=>{rt(pe),bs(ze),Bi(!0)},[]),br=ee.useCallback(async()=>{var pe,ze,ft,it,Tr,Fi,wr;if(o){Oe(!0);try{console.log(" Generating answer for challenge:",o.title);const gt=await U4(o);p(gt),console.log(" Answer generated and inserted into editor"),Hi("Answer generated successfully!","success")}catch(gt){console.error(" Failed to generate answer:",gt);let dn="Unable to generate answer. Please try again.";(pe=gt.message)!=null&&pe.includes("timeout")||(ze=gt.message)!=null&&ze.includes("timed out")?dn="Answer generation timed out. Please try again.":(ft=gt.message)!=null&&ft.includes("network")||(it=gt.message)!=null&&it.includes("fetch")?dn="Network error. Please check your connection and try again.":(Tr=gt.message)!=null&&Tr.includes("500")||(Fi=gt.message)!=null&&Fi.includes("503")?dn="Service temporarily unavailable. Please try again in a moment.":(wr=gt.message)!=null&&wr.includes("429")?dn="Too many requests. Please wait a moment and try again.":gt.message&&(dn=gt.message),Hi(dn,"error")}finally{Oe(!1)}}},[o,Hi]),fi=60,Vo=pe=>{le(null),re(pe.targetTouches[0].clientX)},ma=pe=>{le(pe.targetTouches[0].clientX)},ga=()=>{if(k===null||ue===null)return;const pe=k-ue;Math.abs(pe)<fi||(pe>0?Qn():ws())};if(ee.useEffect(()=>{o&&(p(o.starterCode),w([]),M(null),Z_(o).then(pe=>fe(pe)).catch(()=>{}))},[o]),n)return _.jsx("div",{className:"flex h-screen items-center justify-center bg-slate-900",children:_.jsx("div",{className:"w-12 h-12 border-4 border-sky-400 border-dashed rounded-full animate-spin"})});if(!s)return _.jsx(J4,{});if(f)return _.jsx("div",{className:"flex h-screen items-center justify-center bg-slate-900",children:_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"w-12 h-12 border-4 border-sky-400 border-dashed rounded-full animate-spin mx-auto mb-4"}),_.jsx("p",{className:"text-slate-300",children:"Loading..."})]})});if(!o)return _.jsx("div",{className:"flex h-screen items-center justify-center bg-slate-900",children:_.jsxs("div",{className:"text-center max-w-md",children:[_.jsx("p",{className:"text-red-400 mb-4",children:K||"Failed to load challenge"}),_.jsx("button",{onClick:()=>Rt(),className:"px-4 py-2 bg-sky-600 text-white rounded-md hover:bg-sky-500",children:"Retry"})]})});const pa=()=>{switch(ie){case"discover":return _.jsx(q4,{onSelectChallenge:Er});case"achievements":return _.jsx(G4,{});case"settings":return _.jsx($4,{onSettingsChange:Rt});case"profile":return _.jsx(X4,{user:s});case"home":default:return _.jsxs("div",{className:"h-full flex flex-col bg-black",children:[_.jsx("div",{className:"flex-shrink-0 p-4",children:_.jsx(z4,{user:s,currentMode:H,onOpenModeSelection:hi})}),_.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:_.jsxs("div",{className:"w-full max-w-4xl flex items-center justify-center gap-4 h-full",children:[_.jsx("button",{onClick:ws,className:"p-2 rounded-full hover:bg-gray-700 transition-colors hidden md:block",children:_.jsx(JN,{className:"w-8 h-8 text-gray-400"})}),_.jsx("div",{className:"w-full max-w-2xl h-full",onTouchStart:Vo,onTouchMove:ma,onTouchEnd:ga,children:_.jsx(d4,{challenge:o,userCode:y,setUserCode:p,onRunTests:_r,results:b,isLoading:x,error:K,questionId:Fe,userLanguage:He,userTopics:Q,userLevel:ae,currentMode:H,onOpenModeSelection:hi,onGenerateAnswer:br,isGeneratingAnswer:Re})}),_.jsx("button",{onClick:Qn,className:"p-2 rounded-full hover:bg-gray-700 transition-colors hidden md:block",children:_.jsx(ZN,{className:"w-8 h-8 text-gray-400"})})]})})]})}};return _.jsxs("div",{className:"flex flex-col h-screen bg-black text-white",children:[_.jsxs("main",{className:"flex-grow relative bg-black overflow-hidden",children:[pa(),me&&o&&_.jsx(Z4,{isOpen:me,onClose:ci,challenge:o,testResults:b,allTestsPassed:L,userSolution:y,onNextQuestion:Qn,onRetryQuestion:yt,onRepeatQuestion:bt}),A&&o&&_.jsx(W4,{isOpen:A,onClose:Mo,challenge:o,onContinue:da}),O&&K&&_.jsx(e5,{isOpen:O,onClose:()=>{V(!1),M(null)},error:K}),_.jsx(t5,{isOpen:x}),_.jsx(n5,{isOpen:de,onClose:()=>Ce(!1),currentMode:H,onModeChange:Qt}),_.jsx(s5,{message:Et,type:qi,isOpen:Ts,onClose:()=>Bi(!1),duration:5e3})]}),_.jsx(P4,{activeView:ie,setActiveView:ye})]})},Qb=document.getElementById("root");if(!Qb)throw new Error("Could not find root element to mount to");const a5=Mw.createRoot(Qb);a5.render(_.jsx(ea.StrictMode,{children:_.jsx(r5,{})}));
